<div class="admin-page-container">
  <!-- Header -->
  <div class="admin-page-header">
    <div class="admin-header-content">
      <div class="admin-title-section">
        <h1>{{ 'errorCode.title' | translate }}</h1>
        <p class="subtitle" *ngIf="selectedApp()">
          Manage error codes for app "{{ selectedApp()!.name }}"
        </p>
        <p class="subtitle" *ngIf="!selectedApp()">
          Select an app to manage error codes
        </p>
      </div>
      <div class="admin-header-actions" *ngIf="selectedApp()">
        <button class="btn btn-outline btn-lg" *hasPermission="'error_codes:create'" (click)="openSettingsModal()">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
          Settings
        </button>
        <button *hasPermission="'error_codes:create'" class="btn btn-primary btn-lg" (click)="openCreateModal()">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
          </svg>
          Create
        </button>
      </div>
    </div>
  </div>

  <!-- Content Container -->
  <div class="container">
    <!-- No App Selected State -->
    <div class="admin-empty-state" *ngIf="!selectedApp() && hasApps()">
      <div class="empty-icon">
        <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10" stroke-width="1.5" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
      </div>
      <h3>Select an App</h3>
      <p>Choose an app from the header dropdown to manage its error codes.</p>
    </div>

    <!-- No Apps State -->
    <div class="admin-empty-state" *ngIf="!hasApps()">
      <div class="empty-icon">
        <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
      </div>
      <h3>Welcome to Error Codes</h3>
      <p>Start by creating your first application to manage error codes efficiently.</p>
      <a href="/admin/apps/create" class="btn btn-primary btn-lg">
        Create New App
      </a>
    </div>

    <!-- Main Content (only show when app is selected) -->
    <div *ngIf="selectedApp()">
      <!-- Filters -->
      <div class="admin-filters-section">
        <div class="admin-filters-grid">
          <!-- Search -->
          <div class="filter-item search-filter">
            <span class="search-icon">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
              </svg>
            </span>
            <input 
              type="text" 
              class="form-control"
              [value]="searchTerm()"
              (input)="searchTerm.set($any($event.target).value)"
              (keyup.enter)="onSearch()"
              placeholder="{{ 'errorCode.search' | translate }}">
          </div>



          <!-- Severity Filter -->
          <div class="filter-item">
            <select class="form-control" [value]="selectedSeverity() || ''" (change)="onSeverityChange($any($event.target).value)">
              <option value="">{{ 'errorCode.allSeverities' | translate }}</option>
              @for (severity of severityOptions; track severity) {
                <option [value]="severity">{{ severity }}</option>
              }
            </select>
          </div>

          <!-- View Toggle -->
          <div class="view-toggle">
            <button class="btn btn-icon" [class.btn-primary]="viewMode() === 'grid'" [class.btn-outline]="viewMode() !== 'grid'" (click)="viewMode.set('grid')" title="Grid View">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
              </svg>
            </button>
            <button class="btn btn-icon" [class.btn-primary]="viewMode() === 'list'" [class.btn-outline]="viewMode() !== 'list'" (click)="viewMode.set('list')" title="List View">
               <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
              </svg>
            </button>
          </div>
        </div>

        @if (hasFilters()) {
          <div class="d-flex justify-content-end mt-4">
               <button class="btn btn-ghost btn-sm text-muted" (click)="clearFilters()">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
                {{ 'errorCode.clearFilters' | translate }}
              </button>
          </div>
        }
      </div>

      <!-- Loading State -->
      @if (loading()) {
        <div class="admin-empty-state">
          <div class="spinner"></div>
          <p>{{ 'common.loading' | translate }}</p>
        </div>
      }

      <!-- Error Codes Content -->
      @if (!loading()) {
        @if (errorCodes().length === 0) {
          <div class="admin-empty-state">
            <div class="empty-icon">
               <svg width="100%" height="100%" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
              </svg>
            </div>
            <h3>{{ 'errorCode.noResults' | translate }}</h3>
            <p>{{ 'errorCode.noResultsDesc' | translate }}</p>
            <button class="btn btn-outline" (click)="clearFilters()" *ngIf="hasFilters()">
                Clear Filters
            </button>
          </div>
        } @else {
          <!-- Grid View -->
          @if (viewMode() === 'grid') {
            <div class="admin-grid">
              @for (errorCode of errorCodes(); track errorCode.id) {
                <div class="admin-card cursor-pointer" (click)="openEditModal(errorCode)">
                  <div class="admin-card-header">
                    <span class="card-badge bg-primary-subtle text-primary">
                      {{ errorCode.errorCode }}
                    </span>
                    <div class="d-flex gap-2">
                         <span class="status-badge" [ngClass]="getSeverityClass(errorCode.severity)">
                            {{ errorCode.severity }}
                        </span>
                    </div>
                  </div>
                  
                  <div class="admin-card-body">
                    <h3 class="admin-card-title">{{ errorCode.defaultMessage }}</h3>
                    
                    <div class="d-flex gap-2 flex-wrap">
                        <span class="status-badge" [ngClass]="getStatusClass(errorCode.status)">
                            {{ errorCode.status }}
                        </span>
                        <span class="status-badge info" *ngIf="errorCode.httpStatusCode">
                            HTTP {{ errorCode.httpStatusCode }}
                        </span>
                        <span class="status-badge neutral" *ngIf="errorCode.isPublic">Public</span>
                    </div>

                    <div class="admin-card-meta">
                      <div class="meta-row">
                        <span class="label">Module</span>
                        <span class="value">{{ errorCode.moduleName || '-' }}</span>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Hover Actions (optional, visible on hover via CSS) -->
                   <!-- We use full card click for edit, but maybe add explicit Delete/Edit actions? -->
                   <div class="p-3 border-top bg-surface-hover d-flex justify-content-end gap-2" (click)="$event.stopPropagation()">
                        <button *hasPermission="'error_codes:update'" class="btn btn-sm btn-ghost" (click)="openEditModal(errorCode)">Edit</button>
                        <button *hasPermission="'error_codes:delete'" class="btn btn-sm btn-ghost text-danger" (click)="deleteErrorCode(errorCode.id!)">Delete</button>
                   </div>
                </div>
              }
            </div>
          }

          <!-- List View -->
          @if (viewMode() === 'list') {
            <div class="admin-table-container">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Code</th>
                    <th>Message</th>
                    <th>Module</th>
                    <th>Severity</th>
                    <th>Status</th>
                    <th>HTTP</th>
                    <th class="text-end">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  @for (errorCode of errorCodes(); track errorCode.id) {
                    <tr class="cursor-pointer" (click)="openEditModal(errorCode)">
                      <td>
                        <span class="card-badge bg-primary-subtle text-primary">
                            {{ errorCode.errorCode }}
                        </span>
                      </td>
                      <td style="max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        {{ errorCode.defaultMessage }}
                      </td>
                      <td>{{ errorCode.moduleName || '-' }}</td>
                      <td>
                        <span class="status-badge" [ngClass]="getSeverityClass(errorCode.severity)">
                          {{ errorCode.severity }}
                        </span>
                      </td>
                      <td>
                        <span class="status-badge" [ngClass]="getStatusClass(errorCode.status)">
                          {{ errorCode.status }}
                        </span>
                      </td>
                      <td>{{ errorCode.httpStatusCode || '-' }}</td>
                      <td>
                         <div class="d-flex justify-content-end gap-2" (click)="$event.stopPropagation()">
                             <button *hasPermission="'error_codes:update'" class="btn btn-icon btn-sm btn-ghost" (click)="openEditModal(errorCode)">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                                </svg>
                             </button>
                             <button *hasPermission="'error_codes:delete'" class="btn btn-icon btn-sm btn-ghost text-danger" (click)="deleteErrorCode(errorCode.id!)">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                </svg>
                             </button>
                         </div>
                      </td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          }

          <!-- Pagination -->
          @if (totalPages() > 1) {
            <div class="d-flex justify-content-center gap-2 mt-4">
              <button class="btn btn-outline btn-sm" [disabled]="currentPage() === 0" (click)="previousPage()">
                Previous
              </button>
              <span class="d-flex align-items-center px-2 text-muted">
                 Page {{ currentPage() + 1 }} of {{ totalPages() }}
              </span>
              <button class="btn btn-outline btn-sm" [disabled]="currentPage() >= totalPages() - 1" (click)="nextPage()">
                Next
              </button>
            </div>
          }
        }
      }
    </div>
  </div>
</div>

<!-- Create/Edit Modal - Kept in component for now but using modern form styles -->
@if (showModal() && currentErrorCode()) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ modalMode() === 'create' ? 'Create New Error Code' : 'Edit Error Code' }}</h2>
        <button class="btn btn-icon btn-sm btn-ghost" (click)="closeModal()">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-grid">
          <!-- Error Code with Auto-Generation -->
          <div class="form-group">
            <label class="form-label">{{ 'errorCode.code' | translate }} *</label>
            <div class="input-group">
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="currentErrorCode()!.errorCode"
                placeholder="e.g., AUTH_001">
              <button 
                type="button"
                class="btn btn-outline btn-icon"
                (click)="generateErrorCode()"
                [disabled]="generatingCode()"
                title="Generate unique error code">
                @if (generatingCode()) {
                  <span class="spinner-small"></span>
                } @else {
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                  </svg>
                }
              </button>
            </div>
            @if (previewCode()) {
              <small class="form-text text-muted">
                Next available: {{ previewCode() }}
              </small>
            }
          </div>

          <!-- Module Name -->
          <div class="form-group">
            <label class="form-label">{{ 'errorCode.moduleName' | translate }}</label>
            <div class="module-input-container">
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="currentErrorCode()!.moduleName"
                placeholder="e.g., Authentication"
                list="modules-list">
              <datalist id="modules-list">
                @for (module of modules(); track module) {
                  <option [value]="module">{{ module }}</option>
                }
              </datalist>
            </div>
            <small class="form-text text-muted">
              Select from existing modules or type a new one
            </small>
          </div>

          <!-- Severity -->
          <div class="form-group">
            <label class="form-label">{{ 'errorCode.severity' | translate }} *</label>
            <select class="form-control" [(ngModel)]="currentErrorCode()!.severity">
              @for (severity of severityOptions; track severity) {
                <option [value]="severity">{{ severity }}</option>
              }
            </select>
          </div>

          <!-- Status -->
          <div class="form-group">
            <label class="form-label">{{ 'errorCode.status' | translate }} *</label>
            <select class="form-control" [(ngModel)]="currentErrorCode()!.status">
              @for (status of statusOptions; track status) {
                <option [value]="status">{{ status }}</option>
              }
            </select>
          </div>

          <!-- HTTP Status Code -->
          <div class="form-group">
            <label class="form-label">{{ 'errorCode.httpCode' | translate }}</label>
            <input 
              type="number" 
              class="form-control"
              [(ngModel)]="currentErrorCode()!.httpStatusCode"
              placeholder="e.g., 400">
          </div>

          <!-- Flags -->
          <div class="form-group full-width">
             <div class="d-flex gap-4 p-2 bg-surface rounded border">
                <label class="checkbox-label d-flex align-items-center gap-2 cursor-pointer">
                  <input type="checkbox" [(ngModel)]="currentErrorCode()!.isPublic">
                  <span>{{ 'errorCode.isPublic' | translate }}</span>
                </label>
                <label class="checkbox-label d-flex align-items-center gap-2 cursor-pointer">
                  <input type="checkbox" [(ngModel)]="currentErrorCode()!.isRetryable">
                  <span>{{ 'errorCode.isRetryable' | translate }}</span>
                </label>
             </div>
          </div>
        </div>

        <!-- Default Message -->
        <div class="form-group mt-3">
          <label class="form-label">{{ 'errorCode.defaultMessage' | translate }} *</label>
          <textarea 
            class="form-control"
            [(ngModel)]="currentErrorCode()!.defaultMessage"
            rows="2"
            [placeholder]="'errorCode.defaultMessage' | translate"></textarea>
        </div>

        <!-- Technical Details -->
        <div class="form-group mt-3">
          <label class="form-label">{{ 'errorCode.technicalDetails' | translate }}</label>
          <textarea 
            class="form-control"
            [(ngModel)]="currentErrorCode()!.technicalDetails"
            rows="2"
            [placeholder]="'errorCode.technicalDetails' | translate"></textarea>
        </div>

        <!-- Resolution Steps -->
        <div class="form-group mt-3">
          <label class="form-label">{{ 'errorCode.resolutionSteps' | translate }}</label>
          <textarea 
            class="form-control"
            [(ngModel)]="currentErrorCode()!.resolutionSteps"
            rows="2"
            [placeholder]="'errorCode.resolutionSteps' | translate"></textarea>
        </div>

        <!-- Documentation URL -->
        <div class="form-group mt-3">
          <label class="form-label">{{ 'errorCode.documentationUrl' | translate }}</label>
          <input 
            type="url" 
            class="form-control"
            [(ngModel)]="currentErrorCode()!.documentationUrl"
            placeholder="https://docs.example.com/errors/AUTH_001">
        </div>

        <!-- Translations -->
        <div class="translations-section mt-5 border-top pt-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="h5 m-0">{{ 'errorCode.translations' | translate }}</h3>
            <div class="add-language-dropdown">
              <select 
                class="form-control form-control-sm"
                (change)="addLanguage($any($event.target).value); $any($event.target).value = ''">
                <option value="">+ Add Language</option>
                @for (lang of getAvailableLanguagesToAdd(); track lang.code) {
                  <option [value]="lang.code">{{ lang.name }} ({{ lang.nativeName }})</option>
                }
              </select>
            </div>
          </div>
          
          <!-- Dynamic Language Translations -->
          @for (langCode of selectedLanguages(); track langCode) {
            <div class="translation-group p-3 bg-surface rounded border mb-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h4 class="h6 m-0 text-muted">{{ getLanguageName(langCode) }}</h4>
                @if (langCode !== 'en') {
                  <button 
                    type="button"
                    class="btn btn-icon btn-sm btn-ghost text-danger" 
                    (click)="removeLanguage(langCode)"
                    title="Remove language">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                  </button>
                }
              </div>
              <div class="form-group">
                <label class="form-label small">{{ 'errorCode.message' | translate }}</label>
                <input 
                  type="text" 
                  class="form-control"
                  [value]="getTranslation(langCode, 'message')"
                  (input)="updateTranslation(langCode, 'message', $any($event.target).value)">
              </div>
            </div>
          }
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">{{ 'common.cancel' | translate }}</button>
        <button class="btn btn-primary" (click)="saveErrorCode()" [disabled]="!isErrorCodeFormValid() || saving()">
          @if (saving()) {
            <span class="spinner-small"></span>
          }
          {{ modalMode() === 'create' ? ('common.create' | translate) : ('common.save' | translate) }}
        </button>
      </div>
    </div>
  </div>
}

<!-- Error Code Settings Modal -->
@if (showSettingsModal() && errorCodeSettings()) {
  <div class="modal-overlay" (click)="closeSettingsModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Error Code Generation Settings</h2>
        <button class="btn btn-icon btn-sm btn-ghost" (click)="closeSettingsModal()">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-grid">
          <!-- Prefix -->
          <div class="form-group">
            <label class="form-label">Prefix *</label>
            <input 
              type="text" 
              class="form-control"
              [(ngModel)]="errorCodeSettings()!.prefix"
              (input)="onSettingsChange()"
              placeholder="e.g., E, ERR, AUTH"
              maxlength="10">
            <small class="form-text text-muted">
              Letters/numbers that appear at the beginning of each error code
            </small>
          </div>

          <!-- Sequence Length -->
          <div class="form-group">
            <label class="form-label">Sequence Length *</label>
            <input 
              type="number" 
              class="form-control"
              [(ngModel)]="errorCodeSettings()!.sequenceLength"
              (input)="onSettingsChange()"
              min="1"
              max="10"
              placeholder="6">
            <small class="form-text text-muted">
              Number of digits in the sequence (1-10)
            </small>
          </div>

          <!-- Separator -->
          <div class="form-group">
            <label class="form-label">Separator</label>
            <input 
              type="text" 
              class="form-control"
              [(ngModel)]="errorCodeSettings()!.separator"
              (input)="onSettingsChange()"
              placeholder="Leave empty or use _, -, etc."
              maxlength="5">
            <small class="form-text text-muted">
              Optional character(s) between prefix and sequence
            </small>
          </div>

          <!-- Current Sequence -->
          <div class="form-group">
            <label class="form-label">Current Sequence</label>
            <input 
              type="number" 
              class="form-control"
              [value]="errorCodeSettings()!.currentSequence"
              readonly
              disabled>
            <small class="form-text text-muted">
              Current sequence number (read-only)
            </small>
          </div>
        </div>

        <!-- Preview Section -->
        <div class="preview-section mt-4 p-3 bg-surface rounded border">
          <h4 class="h6 mb-2">Preview</h4>
          <div class="d-flex align-items-center gap-3">
            <span class="preview-label">Next code will be:</span>
            <span class="preview-code badge bg-primary-subtle text-primary fs-6">
              {{ previewCode() || 'Loading...' }}
            </span>
          </div>
          <small class="text-muted d-block mt-1">
            Format: {{ errorCodeSettings()!.prefix }}{{ errorCodeSettings()!.separator }}{{ '0'.repeat(errorCodeSettings()!.sequenceLength) }}
          </small>
        </div>

        <!-- Active Status -->
        <div class="form-group mt-3">
          <label class="checkbox-label d-flex align-items-center gap-2 cursor-pointer">
            <input type="checkbox" [(ngModel)]="errorCodeSettings()!.isActive">
            <span>Enable auto-generation</span>
          </label>
          <small class="form-text text-muted">
            When enabled, the generate button will be available in the create form
          </small>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeSettingsModal()">{{ 'common.cancel' | translate }}</button>
        <button class="btn btn-primary" (click)="saveErrorCodeSettings()" [disabled]="saving()">
          @if (saving()) {
            <span class="spinner-small"></span>
          }
          {{ 'common.save' | translate }}
        </button>
      </div>
    </div>
  </div>
}
