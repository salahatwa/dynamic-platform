import{a as Pe,b as W,d as $,g as U,l as re,m as oe,n as ae,r as G}from"./chunk-BC33UU65.js";import{b as ke}from"./chunk-PEIDCZCY.js";import{a as ye}from"./chunk-NAK5AQJJ.js";import{c as ve,e as we,g as Me}from"./chunk-5CKBWUIT.js";import{b as Ce}from"./chunk-QRIHUA6I.js";import{Ab as de,Bb as me,Cb as be,Eb as fe,Fb as T,Gb as O,Hb as E,Jb as H,Ka as c,La as Y,Q as te,Sa as u,V as _e,W as ue,Wb as K,Ya as y,Z as N,Za as ce,_a as k,a as j,ab as I,cb as C,db as he,fa as ne,fb as L,fc as xe,ga as d,gb as z,ha as m,hb as i,ia as f,ib as o,ic as R,ja as M,jb as h,kb as w,lb as p,mb as l,pa as A,tb as J,ub as X,vb as Z,wb as s,xb as V,yb as D,zb as ie}from"./chunk-KOA5EEQG.js";var Q=function(a){return a.HTML="HTML",a.TXT="TXT",a.FORM="FORM",a}(Q||{}),q=function(a){return a.PORTRAIT="PORTRAIT",a.LANDSCAPE="LANDSCAPE",a}(q||{}),Te={[q.PORTRAIT]:"A4 Vertical (Portrait)",[q.LANDSCAPE]:"A4 Horizontal (Landscape)"},Oe={[q.PORTRAIT]:"Suitable for: Account statements, invoices, letters, reports",[q.LANDSCAPE]:"Suitable for: Certificates, diplomas, charts, wide tables"};var le=(()=>{class a{extractVariables(e){let n=/\$\{([^}]+)\}/g,t=e.matchAll(n),r=new Set;for(let g of t)r.add(g[1].trim());return Array.from(r).map(g=>({name:g,type:"detected"}))}extractLists(e){let n=/<#list\s+(\w+)\s+as\s+\w+>/g,t=e.matchAll(n),r=new Set;for(let g of t)r.add(g[1]);return Array.from(r)}generateVariable(e){return`\${${e}}`}generateIf(e,n=!1){let{variable:t,operator:r,value:g}=e,b=`<#if ${t} ${r} ${g}>
  
`;return n&&(b+=`<#else>
  
`),b+="</#if>",b}generateForLoop(e,n){return`<#list ${e} as ${n}>
  \${${n}}
</#list>`}generateAssign(e,n){return`<#assign ${e} = ${n}>`}generateComment(e){return`<#-- ${e} -->`}validateSyntax(e){let n=[],t=(e.match(/<#if/g)||[]).length,r=(e.match(/<\/#if>/g)||[]).length;t!==r&&n.push(`Unclosed <#if> tags: ${t} opening, ${r} closing`);let g=(e.match(/<#list/g)||[]).length,b=(e.match(/<\/#list>/g)||[]).length;return g!==b&&n.push(`Unclosed <#list> tags: ${g} opening, ${b} closing`),e.match(/\$\{[^}]*$/g)&&n.push("Malformed variable syntax detected"),{valid:n.length===0,errors:n}}getOperators(){return[{value:"==",label:"equals"},{value:"!=",label:"not equals"},{value:">",label:"greater than"},{value:"<",label:"less than"},{value:">=",label:"greater or equal"},{value:"<=",label:"less or equal"},{value:"??",label:"exists"},{value:"!",label:"not"}]}wrapWithTag(e,n,t){if(n==="if"){let{condition:r}=t;return`<#if ${r}>
${e}
</#if>`}else if(n==="list"){let{listVar:r,itemName:g}=t;return`<#list ${r} as ${g}>
${e}
</#list>`}return e}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var je=(a,_)=>_.name,Ae=(a,_)=>_.value;function Le(a,_){if(a&1){let e=w();i(0,"div",18)(1,"strong"),s(2,"Selected Text:"),o(),i(3,"div",27),s(4),o(),i(5,"label")(6,"input",28),E("ngModelChange",function(t){d(e);let r=l(2);return O(r.replaceWithVariable,t)||(r.replaceWithVariable=t),m(t)}),o(),s(7," Replace selected text with variable "),o()()}if(a&2){let e=l(2);c(4),V(e.selectedText()),c(2),T("ngModel",e.replaceWithVariable)}}function ze(a,_){if(a&1&&(i(0,"option",31),s(1),o()),a&2){let e=_.$implicit;k("value",e.name),c(),V(e.name)}}function Ne(a,_){if(a&1){let e=w();i(0,"select",29),E("ngModelChange",function(t){d(e);let r=l(2);return O(r.selectedVariable,t)||(r.selectedVariable=t),m(t)}),i(1,"option",30),s(2,"-- Select Variable --"),o(),L(3,ze,2,2,"option",31,je),o()}if(a&2){let e=l(2);T("ngModel",e.selectedVariable),c(3),z(e.availableVariables)}}function He(a,_){if(a&1){let e=w();i(0,"input",32),E("ngModelChange",function(t){d(e);let r=l(2);return O(r.customVariableName,t)||(r.customVariableName=t),m(t)}),o()}if(a&2){let e=l(2);T("ngModel",e.customVariableName)}}function Re(a,_){if(a&1){let e=w();i(0,"div",13),p("click",function(){d(e);let t=l();return m(t.closeDialog("variable"))}),i(1,"div",14),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",15)(3,"h3"),s(4,"Insert Variable"),o(),i(5,"button",16),p("click",function(){d(e);let t=l();return m(t.closeDialog("variable"))}),s(6,"\xD7"),o()(),i(7,"div",17),y(8,Le,8,2,"div",18),i(9,"div",19)(10,"label")(11,"input",20),p("change",function(){d(e);let t=l();return m(t.useCustomVariable.set(!1))}),o(),s(12," Select from attributes "),o(),y(13,Ne,5,1,"select",21),o(),i(14,"div",19)(15,"label")(16,"input",20),p("change",function(){d(e);let t=l();return m(t.useCustomVariable.set(!0))}),o(),s(17," Custom variable name "),o(),y(18,He,1,1,"input",22),o(),i(19,"div",23)(20,"strong"),s(21,"Preview:"),o(),i(22,"code"),s(23),o()()(),i(24,"div",24)(25,"button",25),p("click",function(){d(e);let t=l();return m(t.closeDialog("variable"))}),s(26,"Cancel"),o(),i(27,"button",26),p("click",function(){d(e);let t=l();return m(t.insertVariable())}),s(28,"Insert"),o()()()()}if(a&2){let e=l();c(8),C(8,e.selectedText().trim()?8:-1),c(3),k("checked",!e.useCustomVariable()),c(2),C(13,e.useCustomVariable()?-1:13),c(3),k("checked",e.useCustomVariable()),c(2),C(18,e.useCustomVariable()?18:-1),c(5),de("\\$","{","",e.useCustomVariable()?e.customVariableName():e.selectedVariable(),"","}","")}}function We(a,_){if(a&1&&(i(0,"option",31),s(1),o()),a&2){let e=_.$implicit;k("value",e.value),c(),V(e.label)}}function $e(a,_){a&1&&s(0,`
<#else>
  Alternative content
`)}function Ue(a,_){if(a&1){let e=w();i(0,"div",13),p("click",function(){d(e);let t=l();return m(t.closeDialog("if"))}),i(1,"div",14),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",15)(3,"h3"),s(4,"Insert If Statement"),o(),i(5,"button",16),p("click",function(){d(e);let t=l();return m(t.closeDialog("if"))}),s(6,"\xD7"),o()(),i(7,"div",17)(8,"div",19)(9,"label"),s(10,"Variable"),o(),i(11,"input",32),E("ngModelChange",function(t){d(e);let r=l();return O(r.ifConditionVariable,t)||(r.ifConditionVariable=t),m(t)}),o()(),i(12,"div",19)(13,"label"),s(14,"Operator"),o(),i(15,"select",29),E("ngModelChange",function(t){d(e);let r=l();return O(r.ifConditionOperator,t)||(r.ifConditionOperator=t),m(t)}),L(16,We,2,2,"option",31,Ae),o()(),i(18,"div",19)(19,"label"),s(20,"Value"),o(),i(21,"input",33),E("ngModelChange",function(t){d(e);let r=l();return O(r.ifConditionValue,t)||(r.ifConditionValue=t),m(t)}),o()(),i(22,"div",19)(23,"label")(24,"input",28),E("ngModelChange",function(t){d(e);let r=l();return O(r.includeElse,t)||(r.includeElse=t),m(t)}),o(),s(25," Include else block "),o()(),i(26,"div",23)(27,"strong"),s(28,"Preview:"),o(),i(29,"pre")(30,"code"),s(31),y(32,$e,1,0),s(33,`
</#if>`),o()()()(),i(34,"div",24)(35,"button",25),p("click",function(){d(e);let t=l();return m(t.closeDialog("if"))}),s(36,"Cancel"),o(),i(37,"button",26),p("click",function(){d(e);let t=l();return m(t.insertIf())}),s(38,"Insert"),o()()()()}if(a&2){let e=l();c(11),T("ngModel",e.ifConditionVariable),c(4),T("ngModel",e.ifConditionOperator),c(),z(e.operators),c(5),T("ngModel",e.ifConditionValue),c(3),T("ngModel",e.includeElse),c(7),de("<#if ",e.ifConditionVariable()," ",e.ifConditionOperator()," ",e.ifConditionValue(),`>
  Content here
`),c(),C(32,e.includeElse()?32:-1)}}function Ge(a,_){if(a&1){let e=w();i(0,"div",13),p("click",function(){d(e);let t=l();return m(t.closeDialog("for"))}),i(1,"div",14),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",15)(3,"h3"),s(4,"Insert For Loop"),o(),i(5,"button",16),p("click",function(){d(e);let t=l();return m(t.closeDialog("for"))}),s(6,"\xD7"),o()(),i(7,"div",17)(8,"div",19)(9,"label"),s(10,"List Variable"),o(),i(11,"input",34),E("ngModelChange",function(t){d(e);let r=l();return O(r.forListVariable,t)||(r.forListVariable=t),m(t)}),o()(),i(12,"div",19)(13,"label"),s(14,"Item Name"),o(),i(15,"input",35),E("ngModelChange",function(t){d(e);let r=l();return O(r.forItemName,t)||(r.forItemName=t),m(t)}),o()(),i(16,"div",23)(17,"strong"),s(18,"Preview:"),o(),i(19,"pre")(20,"code"),s(21),o()()()(),i(22,"div",24)(23,"button",25),p("click",function(){d(e);let t=l();return m(t.closeDialog("for"))}),s(24,"Cancel"),o(),i(25,"button",26),p("click",function(){d(e);let t=l();return m(t.insertFor())}),s(26,"Insert"),o()()()()}if(a&2){let e=l();c(11),T("ngModel",e.forListVariable),c(4),T("ngModel",e.forItemName),c(6),be("<#list ",e.forListVariable()," as ",e.forItemName(),`>
  \\$`,"{","",e.forItemName(),"","}",`
</#list>`)}}function Be(a,_){if(a&1){let e=w();i(0,"div",13),p("click",function(){d(e);let t=l();return m(t.closeDialog("assign"))}),i(1,"div",14),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",15)(3,"h3"),s(4,"Assign Variable"),o(),i(5,"button",16),p("click",function(){d(e);let t=l();return m(t.closeDialog("assign"))}),s(6,"\xD7"),o()(),i(7,"div",17)(8,"div",19)(9,"label"),s(10,"Variable Name"),o(),i(11,"input",36),E("ngModelChange",function(t){d(e);let r=l();return O(r.assignName,t)||(r.assignName=t),m(t)}),o()(),i(12,"div",19)(13,"label"),s(14,"Value"),o(),i(15,"input",33),E("ngModelChange",function(t){d(e);let r=l();return O(r.assignValue,t)||(r.assignValue=t),m(t)}),o()(),i(16,"div",23)(17,"strong"),s(18,"Preview:"),o(),i(19,"code"),s(20),o()()(),i(21,"div",24)(22,"button",25),p("click",function(){d(e);let t=l();return m(t.closeDialog("assign"))}),s(23,"Cancel"),o(),i(24,"button",26),p("click",function(){d(e);let t=l();return m(t.insertAssign())}),s(25,"Insert"),o()()()()}if(a&2){let e=l();c(11),T("ngModel",e.assignName),c(4),T("ngModel",e.assignValue),c(5),ie("<#assign ",e.assignName()," = ",e.assignValue(),">")}}function qe(a,_){if(a&1){let e=w();i(0,"div",13),p("click",function(){d(e);let t=l();return m(t.closeDialog("comment"))}),i(1,"div",14),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",15)(3,"h3"),s(4,"Insert Comment"),o(),i(5,"button",16),p("click",function(){d(e);let t=l();return m(t.closeDialog("comment"))}),s(6,"\xD7"),o()(),i(7,"div",17)(8,"div",19)(9,"label"),s(10,"Comment Text"),o(),i(11,"textarea",37),E("ngModelChange",function(t){d(e);let r=l();return O(r.commentText,t)||(r.commentText=t),m(t)}),o()(),i(12,"div",23)(13,"strong"),s(14,"Preview:"),o(),i(15,"code"),s(16),o()()(),i(17,"div",24)(18,"button",25),p("click",function(){d(e);let t=l();return m(t.closeDialog("comment"))}),s(19,"Cancel"),o(),i(20,"button",26),p("click",function(){d(e);let t=l();return m(t.insertComment())}),s(21,"Insert"),o()()()()}if(a&2){let e=l();c(11),T("ngModel",e.commentText),c(5),D("<#-- ",e.commentText()," -->")}}var Se=(()=>{class a{constructor(e){this.freemarkerService=e,this.availableVariables=[],this.selectedText=u(""),this.insertCode=new A,this.showVariableDialog=u(!1),this.showIfDialog=u(!1),this.showForDialog=u(!1),this.showAssignDialog=u(!1),this.showCommentDialog=u(!1),this.selectedVariable=u(""),this.customVariableName=u(""),this.useCustomVariable=u(!0),this.replaceWithVariable=u(!1),this.ifConditionVariable=u(""),this.ifConditionOperator=u("=="),this.ifConditionValue=u(""),this.includeElse=u(!1),this.forListVariable=u(""),this.forItemName=u("item"),this.assignName=u(""),this.assignValue=u(""),this.commentText=u(""),this.operators=this.freemarkerService.getOperators()}openVariableDialog(){this.selectedVariable.set(""),this.customVariableName.set(""),this.useCustomVariable.set(!0),this.replaceWithVariable.set(!!this.selectedText().trim()),this.showVariableDialog.set(!0)}openIfDialog(){this.ifConditionVariable.set(""),this.ifConditionOperator.set("=="),this.ifConditionValue.set(""),this.includeElse.set(!1),this.showIfDialog.set(!0)}openForDialog(){this.forListVariable.set(""),this.forItemName.set("item"),this.showForDialog.set(!0)}openAssignDialog(){this.assignName.set(""),this.assignValue.set(""),this.showAssignDialog.set(!0)}openCommentDialog(){this.commentText.set(""),this.showCommentDialog.set(!0)}insertVariable(){let e=this.useCustomVariable()?this.customVariableName():this.selectedVariable();if(!e.trim())return;let n=this.freemarkerService.generateVariable(e),t=this.replaceWithVariable()&&!!this.selectedText().trim();this.insertCode.emit({type:"variable",code:n,wrapSelection:t}),this.showVariableDialog.set(!1)}insertIf(){if(!this.ifConditionVariable().trim())return;let e={variable:this.ifConditionVariable(),operator:this.ifConditionOperator(),value:this.ifConditionValue()},n=this.freemarkerService.generateIf(e,this.includeElse());this.insertCode.emit({type:this.includeElse()?"if-else":"if",code:n,wrapSelection:!0}),this.showIfDialog.set(!1)}insertFor(){if(!this.forListVariable().trim()||!this.forItemName().trim())return;let e=this.freemarkerService.generateForLoop(this.forListVariable(),this.forItemName());this.insertCode.emit({type:"for",code:e,wrapSelection:!0}),this.showForDialog.set(!1)}insertAssign(){if(!this.assignName().trim())return;let e=this.freemarkerService.generateAssign(this.assignName(),this.assignValue());this.insertCode.emit({type:"assign",code:e}),this.showAssignDialog.set(!1)}insertComment(){if(!this.commentText().trim())return;let e=this.freemarkerService.generateComment(this.commentText());this.insertCode.emit({type:"comment",code:e}),this.showCommentDialog.set(!1)}closeDialog(e){switch(e){case"variable":this.showVariableDialog.set(!1);break;case"if":this.showIfDialog.set(!1);break;case"for":this.showForDialog.set(!1);break;case"assign":this.showAssignDialog.set(!1);break;case"comment":this.showCommentDialog.set(!1);break}}static{this.\u0275fac=function(n){return new(n||a)(Y(le))}}static{this.\u0275cmp=N({type:a,selectors:[["app-freemarker-toolbar"]],inputs:{availableVariables:"availableVariables",selectedText:"selectedText"},outputs:{insertCode:"insertCode"},standalone:!0,features:[H],decls:31,vars:5,consts:[[1,"freemarker-toolbar"],["title","Insert Variable",1,"fm-btn",3,"click"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],["title","Insert If Statement",1,"fm-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["title","Insert For Loop",1,"fm-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Assign Variable",1,"fm-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["title","Insert Comment",1,"fm-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"],[1,"fm-modal-overlay"],[1,"fm-modal-overlay",3,"click"],[1,"fm-modal",3,"click"],[1,"fm-modal-header"],[1,"fm-close",3,"click"],[1,"fm-modal-body"],[1,"fm-form-group","fm-selected-text"],[1,"fm-form-group"],["type","radio",3,"change","checked"],[1,"fm-select",3,"ngModel"],["type","text","placeholder","variableName",1,"fm-input",3,"ngModel"],[1,"fm-preview"],[1,"fm-modal-footer"],[1,"fm-btn-secondary",3,"click"],[1,"fm-btn-primary",3,"click"],[1,"fm-selected-preview"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"fm-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","text","placeholder","variableName",1,"fm-input",3,"ngModelChange","ngModel"],["type","text","placeholder","value",1,"fm-input",3,"ngModelChange","ngModel"],["type","text","placeholder","items",1,"fm-input",3,"ngModelChange","ngModel"],["type","text","placeholder","item",1,"fm-input",3,"ngModelChange","ngModel"],["type","text","placeholder","myVariable",1,"fm-input",3,"ngModelChange","ngModel"],["placeholder","Your comment here","rows","3",1,"fm-textarea",3,"ngModelChange","ngModel"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"button",1),p("click",function(){return t.openVariableDialog()}),f(),i(2,"svg",2),h(3,"path",3),o(),M(),i(4,"span"),s(5,"Variable"),o()(),i(6,"button",4),p("click",function(){return t.openIfDialog()}),f(),i(7,"svg",2),h(8,"path",5),o(),M(),i(9,"span"),s(10,"If"),o()(),i(11,"button",6),p("click",function(){return t.openForDialog()}),f(),i(12,"svg",2),h(13,"path",7),o(),M(),i(14,"span"),s(15,"For Loop"),o()(),i(16,"button",8),p("click",function(){return t.openAssignDialog()}),f(),i(17,"svg",2),h(18,"path",9),o(),M(),i(19,"span"),s(20,"Assign"),o()(),i(21,"button",10),p("click",function(){return t.openCommentDialog()}),f(),i(22,"svg",2),h(23,"path",11),o(),M(),i(24,"span"),s(25,"Comment"),o()()(),y(26,Re,29,8,"div",12)(27,Ue,39,8,"div",12)(28,Ge,27,7,"div",12)(29,Be,26,4,"div",12)(30,qe,22,2,"div",12)),n&2&&(c(26),C(26,t.showVariableDialog()?26:-1),c(),C(27,t.showIfDialog()?27:-1),c(),C(28,t.showForDialog()?28:-1),c(),C(29,t.showAssignDialog()?29:-1),c(),C(30,t.showCommentDialog()?30:-1))},dependencies:[R,G,oe,ae,W,Pe,re,$,U],styles:["[_nghost-%COMP%]{display:flex;align-items:center;flex-shrink:0}.freemarker-toolbar[_ngcontent-%COMP%]{display:flex;gap:.25rem;padding:0;background:transparent;border:none;flex-wrap:nowrap;align-items:center;position:static;box-shadow:none}.fm-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;height:36px;padding:0 .75rem;background:transparent;border:1px solid transparent;border-radius:6px;color:var(--text-secondary);font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);white-space:nowrap}.fm-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover);border-color:transparent;color:var(--primary);transform:translateY(-1px)}.fm-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;width:18px;height:18px}.fm-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.fm-modal[_ngcontent-%COMP%]{background:var(--surface);border-radius:16px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:100%;max-width:500px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_scaleIn .2s cubic-bezier(.16,1,.3,1);border:1px solid var(--border)}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fm-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;border-bottom:1px solid var(--border-light);background:var(--surface-ground)}.fm-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin:0;color:var(--text)}.fm-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:50%;color:var(--text-muted);font-size:1.25rem;cursor:pointer;transition:all .2s}.fm-close[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--text)}.fm-modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem}.fm-modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.25rem 1.5rem;border-top:1px solid var(--border-light);background:var(--surface-ground)}.fm-form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.fm-form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.fm-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:var(--text);font-size:.875rem}.fm-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .fm-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem}.fm-input[_ngcontent-%COMP%], .fm-select[_ngcontent-%COMP%], .fm-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:var(--background);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:.95rem;transition:all .2s;font-family:inherit}.fm-input[_ngcontent-%COMP%]:focus, .fm-select[_ngcontent-%COMP%]:focus, .fm-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px rgba(var(--primary-rgb),.1)}.fm-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.fm-preview[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background:var(--background);border:1px solid var(--border);border-radius:8px}.fm-preview[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-secondary);font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;font-weight:600}.fm-preview[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;padding:.75rem;background:var(--surface);border-radius:6px;font-family:Monaco,Menlo,Courier New,monospace;font-size:.85rem;color:#10b981;line-height:1.5}.fm-preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}.fm-preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word}.fm-btn-primary[_ngcontent-%COMP%], .fm-btn-secondary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border-radius:8px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .2s;border:none}.fm-btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff;box-shadow:0 1px 2px #0000000d}.fm-btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:translateY(-1px);box-shadow:0 4px 6px -1px rgba(var(--primary-rgb),.2)}.fm-btn-secondary[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border);color:var(--text)}.fm-btn-secondary[_ngcontent-%COMP%]:hover{background:var(--surface-hover);border-color:var(--border-focus)}@media (max-width: 768px){.freemarker-toolbar[_ngcontent-%COMP%]{padding:0;gap:.25rem}.fm-btn[_ngcontent-%COMP%]{padding:.5rem;height:36px;width:auto}}@media (max-width: 480px){.fm-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.fm-btn[_ngcontent-%COMP%]{padding:.5rem;min-width:36px;justify-content:center}}[data-theme=dark][_ngcontent-%COMP%]   .fm-preview[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#34d399}[dir=rtl][_ngcontent-%COMP%]   .fm-btn[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .fm-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .fm-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:0;margin-left:.5rem}.fm-selected-text[_ngcontent-%COMP%]{background:var(--primary-light);border:1px solid var(--primary);border-radius:8px;padding:1rem;margin-bottom:1.5rem}.fm-selected-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--primary);font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}.fm-selected-preview[_ngcontent-%COMP%]{padding:.75rem;background:var(--background);border-radius:6px;font-family:Monaco,Menlo,Courier New,monospace;font-size:.85rem;color:var(--text);margin-bottom:.75rem;max-height:100px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.fm-selected-text[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:0;cursor:pointer;-webkit-user-select:none;user-select:none}.fm-selected-text[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem;cursor:pointer}"]})}}return a})();function Ye(a,_){if(a&1){let e=w();i(0,"div",33),p("click",function(){d(e);let t=l();return m(t.closeDialog("link"))}),i(1,"div",34),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",35)(3,"h3"),s(4,"Insert Link"),o(),i(5,"button",36),p("click",function(){d(e);let t=l();return m(t.closeDialog("link"))}),s(6,"\xD7"),o()(),i(7,"div",37)(8,"div",38)(9,"label"),s(10,"URL"),o(),i(11,"input",39),E("ngModelChange",function(t){d(e);let r=l();return O(r.linkUrl,t)||(r.linkUrl=t),m(t)}),o()(),i(12,"div",38)(13,"label"),s(14,"Text to display"),o(),i(15,"input",40),E("ngModelChange",function(t){d(e);let r=l();return O(r.linkText,t)||(r.linkText=t),m(t)}),o()()(),i(16,"div",41)(17,"button",42),p("click",function(){d(e);let t=l();return m(t.closeDialog("link"))}),s(18,"Cancel"),o(),i(19,"button",43),p("click",function(){d(e);let t=l();return m(t.insertLink())}),s(20,"Insert"),o()()()()}if(a&2){let e=l();c(11),T("ngModel",e.linkUrl),c(4),T("ngModel",e.linkText)}}function Ke(a,_){if(a&1){let e=w();i(0,"div",33),p("click",function(){d(e);let t=l();return m(t.closeDialog("image"))}),i(1,"div",34),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",35)(3,"h3"),s(4,"Insert Image"),o(),i(5,"button",36),p("click",function(){d(e);let t=l();return m(t.closeDialog("image"))}),s(6,"\xD7"),o()(),i(7,"div",37)(8,"div",38)(9,"label"),s(10,"Image URL"),o(),i(11,"input",44),E("ngModelChange",function(t){d(e);let r=l();return O(r.imageUrl,t)||(r.imageUrl=t),m(t)}),o()(),i(12,"div",38)(13,"label"),s(14,"Alt Text"),o(),i(15,"input",45),E("ngModelChange",function(t){d(e);let r=l();return O(r.imageAlt,t)||(r.imageAlt=t),m(t)}),o()()(),i(16,"div",41)(17,"button",42),p("click",function(){d(e);let t=l();return m(t.closeDialog("image"))}),s(18,"Cancel"),o(),i(19,"button",43),p("click",function(){d(e);let t=l();return m(t.insertImage())}),s(20,"Insert"),o()()()()}if(a&2){let e=l();c(11),T("ngModel",e.imageUrl),c(4),T("ngModel",e.imageAlt)}}var Ve=(()=>{class a{constructor(){this.selectedText=u(""),this.insertHtml=new A,this.showLinkDialog=u(!1),this.showImageDialog=u(!1),this.linkUrl=u(""),this.linkText=u(""),this.imageUrl=u(""),this.imageAlt=u("")}formatText(e){let n;switch(e){case"bold":n={tag:"b",startTag:"<b>",endTag:"</b>"};break;case"italic":n={tag:"i",startTag:"<i>",endTag:"</i>"};break;case"underline":n={tag:"u",startTag:"<u>",endTag:"</u>"};break;case"strike":n={tag:"s",startTag:"<s>",endTag:"</s>"};break;case"h1":n={tag:"h1",startTag:"<h1>",endTag:"</h1>"};break;case"h2":n={tag:"h2",startTag:"<h2>",endTag:"</h2>"};break;case"h3":n={tag:"h3",startTag:"<h3>",endTag:"</h3>"};break;case"ul":n={tag:"ul",startTag:`<ul>
  <li>`,endTag:`</li>
</ul>`,defaultText:"List item"};break;case"ol":n={tag:"ol",startTag:`<ol>
  <li>`,endTag:`</li>
</ol>`,defaultText:"List item"};break;case"quote":n={tag:"blockquote",startTag:"<blockquote>",endTag:"</blockquote>"};break;case"code":n={tag:"code",startTag:"<code>",endTag:"</code>"};break;case"hr":n={tag:"hr",startTag:"<hr>",endTag:""};break;default:return}this.insertHtml.emit(n)}openLinkDialog(){this.linkUrl.set(""),this.linkText.set(this.selectedText()||""),this.showLinkDialog.set(!0)}openImageDialog(){this.imageUrl.set(""),this.imageAlt.set(""),this.showImageDialog.set(!0)}insertLink(){if(!this.linkUrl())return;let e=this.linkUrl(),n=this.linkText()||e;this.insertHtml.emit({tag:"a",startTag:`<a href="${e}">`,endTag:"</a>",defaultText:n,hasAttributes:!0}),this.showLinkDialog.set(!1)}insertImage(){if(!this.imageUrl())return;let e=this.imageUrl(),n=this.imageAlt();this.insertHtml.emit({tag:"img",startTag:`<img src="${e}" alt="${n}" style="max-width: 100%;">`,endTag:"",hasAttributes:!0}),this.showImageDialog.set(!1)}closeDialog(e){e==="link"&&this.showLinkDialog.set(!1),e==="image"&&this.showImageDialog.set(!1)}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=N({type:a,selectors:[["app-rich-text-toolbar"]],inputs:{selectedText:"selectedText"},outputs:{insertHtml:"insertHtml"},standalone:!0,features:[H],decls:55,vars:2,consts:[[1,"rich-text-toolbar"],[1,"toolbar-group"],["title","Bold",1,"rt-btn",3,"click"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6V4zm0 8h9a4 4 0 014 4 4 4 0 01-4 4H6v-8z"],["title","Italic",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M10 20l4-16m4 4l8 0M6 16l-4 0M14 4l-4 0M10 20l-4 0"],["title","Underline",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M6 3v7a6 6 0 006 6 6 6 0 006-6V3M4 21h16"],["title","Strikethrough",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M4 12h16M4 10h16M10 3v4m4-4v4m0 10v4m-4-4v4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 12a7 7 0 1014 0 7 7 0 10-14 0z",2,"display","none"],["x","6","y","18","font-size","20","font-weight","bold","fill","currentColor",2,"text-decoration","line-through"],[1,"divider"],["title","Heading 1",1,"rt-btn",3,"click"],[1,"btn-text"],["title","Heading 2",1,"rt-btn",3,"click"],["title","Heading 3",1,"rt-btn",3,"click"],["title","Bulleted List",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16M8 6h.01M8 12h.01M8 18h.01M3 6h.01M3 12h.01M3 18h.01"],["title","Numbered List",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h12M7 13h12M7 19h12M4 7h.01M4 13h.01M4 19h.01"],["title","Quote",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"],["title","Code",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 20l4-16m4 4l8 0M6 16l-4 0M14 4l-4 0M10 20l-4 0"],["title","Insert Link",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],["title","Insert Image",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],["title","Horizontal Line",1,"rt-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"rt-modal-overlay"],[1,"rt-modal-overlay",3,"click"],[1,"rt-modal",3,"click"],[1,"rt-modal-header"],[1,"rt-close",3,"click"],[1,"rt-modal-body"],[1,"rt-form-group"],["type","text","placeholder","https://example.com",1,"rt-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Link text",1,"rt-input",3,"ngModelChange","ngModel"],[1,"rt-modal-footer"],[1,"rt-btn-secondary",3,"click"],[1,"rt-btn-primary",3,"click"],["type","text","placeholder","https://example.com/image.jpg",1,"rt-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Image description",1,"rt-input",3,"ngModelChange","ngModel"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return t.formatText("bold")}),f(),i(3,"svg",3),h(4,"path",4),o()(),M(),i(5,"button",5),p("click",function(){return t.formatText("italic")}),f(),i(6,"svg",3),h(7,"path",6),o()(),M(),i(8,"button",7),p("click",function(){return t.formatText("underline")}),f(),i(9,"svg",3),h(10,"path",8),o()(),M(),i(11,"button",9),p("click",function(){return t.formatText("strike")}),f(),i(12,"svg",3),h(13,"path",10)(14,"path",11),i(15,"text",12),s(16,"S"),o()()()(),M(),h(17,"div",13),i(18,"div",1)(19,"button",14),p("click",function(){return t.formatText("h1")}),i(20,"span",15),s(21,"H1"),o()(),i(22,"button",16),p("click",function(){return t.formatText("h2")}),i(23,"span",15),s(24,"H2"),o()(),i(25,"button",17),p("click",function(){return t.formatText("h3")}),i(26,"span",15),s(27,"H3"),o()()(),h(28,"div",13),i(29,"div",1)(30,"button",18),p("click",function(){return t.formatText("ul")}),f(),i(31,"svg",3),h(32,"path",19),o()(),M(),i(33,"button",20),p("click",function(){return t.formatText("ol")}),f(),i(34,"svg",3),h(35,"path",21),o()(),M(),i(36,"button",22),p("click",function(){return t.formatText("quote")}),f(),i(37,"svg",3),h(38,"path",23),o()(),M(),i(39,"button",24),p("click",function(){return t.formatText("code")}),f(),i(40,"svg",3),h(41,"path",25),o()()(),M(),h(42,"div",13),i(43,"div",1)(44,"button",26),p("click",function(){return t.openLinkDialog()}),f(),i(45,"svg",3),h(46,"path",27),o()(),M(),i(47,"button",28),p("click",function(){return t.openImageDialog()}),f(),i(48,"svg",3),h(49,"path",29),o()(),M(),i(50,"button",30),p("click",function(){return t.formatText("hr")}),f(),i(51,"svg",3),h(52,"path",31),o()()()(),y(53,Ye,21,2,"div",32)(54,Ke,21,2,"div",32)),n&2&&(c(53),C(53,t.showLinkDialog()?53:-1),c(),C(54,t.showImageDialog()?54:-1))},dependencies:[R,G,W,$,U],styles:["[_nghost-%COMP%]{display:flex;align-items:center;flex-shrink:0}.rich-text-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:0;background:transparent;border:none;flex-wrap:nowrap}.toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.divider[_ngcontent-%COMP%]{width:1px;height:20px;background:var(--border);margin:0 .5rem;opacity:.6}.rt-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;padding:0;background:transparent;border:1px solid transparent;border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);flex-shrink:0}.rt-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--primary);transform:translateY(-1px)}.rt-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.rt-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:0 .5rem}.rt-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:2000;animation:_ngcontent-%COMP%_fadeIn .2s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.rt-modal[_ngcontent-%COMP%]{background:var(--surface);border-radius:16px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:90%;max-width:420px;border:1px solid var(--border);overflow:hidden;animation:_ngcontent-%COMP%_scaleIn .2s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.rt-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;border-bottom:1px solid var(--border-light);background:var(--surface-ground)}.rt-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin:0;color:var(--text)}.rt-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:50%;color:var(--text-muted);cursor:pointer;transition:all .2s}.rt-close[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--text)}.rt-modal-body[_ngcontent-%COMP%]{padding:1.5rem}.rt-form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.rt-form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.rt-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--text);margin-bottom:.5rem}.rt-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:var(--background);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:.95rem;transition:all .2s}.rt-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px rgba(var(--primary-rgb),.1)}.rt-modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.25rem 1.5rem;border-top:1px solid var(--border-light);background:var(--surface-ground)}.rt-btn-primary[_ngcontent-%COMP%], .rt-btn-secondary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;border:1px solid transparent;transition:all .2s}.rt-btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff;box-shadow:0 1px 2px #0000000d}.rt-btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 4px 6px -1px rgba(var(--primary-rgb),.2)}.rt-btn-secondary[_ngcontent-%COMP%]{background:transparent;border-color:var(--border);color:var(--text)}.rt-btn-secondary[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--text-emphasis)}"]})}}return a})();var Qe=["textEditor"],Je=["htmlEditor"],Xe=["previewDiv"];function Ze(a,_){if(a&1){let e=w();h(0,"div",8),i(1,"div",14)(2,"button",15),p("click",function(){d(e);let t=l();return m(t.setPreviewDevice("desktop"))}),f(),i(3,"svg",16),h(4,"rect",17)(5,"line",18)(6,"line",19),o()(),M(),i(7,"button",20),p("click",function(){d(e);let t=l();return m(t.setPreviewDevice("tablet"))}),f(),i(8,"svg",16),h(9,"rect",21)(10,"line",22),o()(),M(),i(11,"button",23),p("click",function(){d(e);let t=l();return m(t.setPreviewDevice("mobile"))}),f(),i(12,"svg",16),h(13,"rect",24)(14,"line",22),o()()()}if(a&2){let e=l();c(2),I("active",e.previewDevice()==="desktop"),c(5),I("active",e.previewDevice()==="tablet"),c(4),I("active",e.previewDevice()==="mobile")}}function et(a,_){a&1&&(f(),i(0,"svg",25),h(1,"path",26)(2,"path",27),o(),M(),i(3,"span",28),s(4,"Preview"),o())}function tt(a,_){a&1&&(f(),i(0,"svg",25),h(1,"path",29),o(),M(),i(2,"span",28),s(3,"Code"),o())}function nt(a,_){if(a&1){let e=w();i(0,"textarea",31,0),E("ngModelChange",function(t){d(e);let r=l(2);return O(r.content,t)||(r.content=t),m(t)}),p("ngModelChange",function(t){d(e);let r=l(2);return m(r.onContentChange(t))})("mouseup",function(){d(e);let t=l(2);return m(t.onTextSelect())})("keyup",function(){d(e);let t=l(2);return m(t.onTextSelect())}),o()}if(a&2){let e=l(2);T("ngModel",e.content),k("placeholder",e.placeholder)}}function it(a,_){if(a&1){let e=w();i(0,"textarea",32,1),E("ngModelChange",function(t){d(e);let r=l(2);return O(r.content,t)||(r.content=t),m(t)}),p("ngModelChange",function(t){d(e);let r=l(2);return m(r.onContentChange(t))})("mouseup",function(){d(e);let t=l(2);return m(t.onTextSelect())})("keyup",function(){d(e);let t=l(2);return m(t.onTextSelect())}),o()}if(a&2){let e=l(2);T("ngModel",e.content),k("placeholder",e.placeholder)}}function rt(a,_){if(a&1&&y(0,nt,2,2,"textarea",30)(1,it,2,2),a&2){let e=l();C(0,e.editorType==="text"?0:1)}}function ot(a,_){if(a&1){let e=w();i(0,"div",33)(1,"div",34,2),p("input",function(t){d(e);let r=l();return m(r.onPreviewInput(t))})("mouseup",function(){d(e);let t=l();return m(t.onTextSelect())})("keyup",function(){d(e);let t=l();return m(t.onTextSelect())}),o()()}if(a&2){let e=l();c(),I("device-desktop",e.previewDevice()==="desktop")("device-tablet",e.previewDevice()==="tablet")("device-mobile",e.previewDevice()==="mobile")}}var pe=(()=>{class a{constructor(){this.content="",this.editorType="html",this.placeholder="",this.availableVariables=[],this.contentChange=new A,this.textSelection=new A,this.freemarkerInsert=new A,this.sanitizer=ue(ve),this.currentSelection=u(""),this.selectionStart=0,this.selectionEnd=0,this.savedRange=null,this.viewMode=u("code"),this.previewDevice=u("desktop")}ngOnInit(){this.placeholder||(this.placeholder=this.editorType==="text"?"Enter your text content here...":"<h1>Your HTML content here...</h1>")}ngOnChanges(e){e.content&&!e.content.firstChange&&(this.updateEditorContent(),this.viewMode()==="view"&&this.previewDiv&&this.previewDiv.nativeElement.innerHTML!==this.content&&(this.previewDiv.nativeElement.innerHTML=this.content||"<p>No content</p>"))}toggleViewMode(){this.viewMode.update(e=>{let n=e==="code"?"view":"code";return n==="view"?setTimeout(()=>{this.previewDiv&&(this.previewDiv.nativeElement.innerHTML=this.content||"<p>No content</p>")},0):this.savedRange=null,n})}setPreviewDevice(e){this.previewDevice.set(e)}sanitizedContent(){return this.sanitizer.bypassSecurityTrustHtml(this.content||"<p>No content</p>")}onPreviewInput(e){let t=e.target.innerHTML;this.content!==t&&(this.content=t,this.onContentChange(t))}updateEditorContent(){let e=this.getActiveEditor();if(e&&e.value!==this.content){let n=e.selectionStart;e.value=this.content,e.setSelectionRange(n,n)}}getActiveEditor(){return this.editorType==="text"?this.textEditor?.nativeElement:this.htmlEditor?.nativeElement}onContentChange(e){this.content=e;let n=this.getActiveEditor(),t=n?.selectionStart??this.selectionStart,r=n?.selectionEnd??this.selectionEnd;this.contentChange.emit({content:e,selectionStart:t,selectionEnd:r})}onTextSelect(){if(this.viewMode()==="view"){let g=window.getSelection();if(g&&g.rangeCount>0){let b=g.toString();this.currentSelection.set(b);let P=g.getRangeAt(0);this.previewDiv&&this.previewDiv.nativeElement.contains(P.commonAncestorContainer)&&(this.savedRange=P.cloneRange())}else this.currentSelection.set(""),this.savedRange=null;return}let e=this.getActiveEditor();if(!e)return;let n=e.selectionStart,t=e.selectionEnd,r=e.value.substring(n,t);this.currentSelection.set(r),this.selectionStart=n,this.selectionEnd=t,r.trim()&&this.textSelection.emit({selectedText:r,selectionStart:n,selectionEnd:t})}restoreSelection(){if(this.savedRange&&this.viewMode()==="view"){let e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(this.savedRange))}}handleRichTextInsert(e){if(this.viewMode()==="view"){this.restoreSelection(),this.executeVisualCommand(e);return}if(!this.getActiveEditor())return;let t=this.selectionStart,r=this.selectionEnd,g=this.currentSelection(),b=this.content,P=b.substring(0,t),x=b.substring(r),v,S;if(e.hasAttributes)v=P+e.startTag+(e.defaultText||g)+e.endTag+x,S=t+e.startTag.length+(e.defaultText||g).length+e.endTag.length;else if(g)v=P+e.startTag+g+e.endTag+x,S=t+e.startTag.length+g.length+e.endTag.length;else{let F=e.defaultText||"";v=P+e.startTag+F+e.endTag+x,S=t+e.startTag.length+F.length}this.updateContentAndCursor(v,S)}handleFreeMarkerInsert(e){if(this.viewMode()==="view"){this.restoreSelection(),document.execCommand("insertText",!1,e.code),this.previewDiv&&this.onPreviewInput({target:this.previewDiv.nativeElement});return}let n=this.getActiveEditor();if(!n)return;let t=this.selectionStart,r=this.selectionEnd,g=this.currentSelection(),b=this.content,P,x;if(e.wrapSelection&&g){let v=e.code.split("\\n");if(e.type==="if"||e.type==="if-else"){let S=v[0],F=v[v.length-1],B=`${S}\\n  ${g}\\n${F}`;P=b.substring(0,t)+B+b.substring(r),x=t+B.length}else if(e.type==="for"){let S=v[0],F=v[v.length-1],B=`${S}\\n  ${g}\\n${F}`;P=b.substring(0,t)+B+b.substring(r),x=t+B.length}else{let S=b.substring(0,t),F=b.substring(r);P=S+e.code+F,x=t+e.code.length}}else{let v=n.selectionStart,S=b.substring(0,v),F=b.substring(v);P=S+e.code+F,x=v+e.code.length}this.updateContentAndCursor(P,x),this.freemarkerInsert.emit(e)}executeVisualCommand(e){let n=e.startTag.toLowerCase();n.includes("<b>")||n.includes("<strong>")?document.execCommand("bold"):n.includes("<i>")||n.includes("<em>")?document.execCommand("italic"):n.includes("<u>")?document.execCommand("underline"):n.includes("<s>")||n.includes("<strike>")?document.execCommand("strikeThrough"):n.includes("<h1>")?document.execCommand("formatBlock",!1,"H1"):n.includes("<h2>")?document.execCommand("formatBlock",!1,"H2"):n.includes("<h3>")?document.execCommand("formatBlock",!1,"H3"):n.includes("<ul>")?document.execCommand("insertUnorderedList"):n.includes("<ol>")?document.execCommand("insertOrderedList"):n.includes("blockquote")?document.execCommand("formatBlock",!1,"blockquote"):n.includes("<hr>")?document.execCommand("insertHorizontalRule"):n.includes("<a")?this.insertVisualHtml(e):n.includes("<img")?this.insertVisualHtml(e):n.includes("<code>")?this.insertVisualHtml(e):this.insertVisualHtml(e),this.previewDiv&&this.onPreviewInput({target:this.previewDiv.nativeElement})}insertVisualHtml(e){let n=e.defaultText||window.getSelection()?.toString()||"",t=e.startTag+n+e.endTag;document.execCommand("insertHTML",!1,t)}updateContentAndCursor(e,n){let t=this.getActiveEditor();this.content=e,this.onContentChange(e),this.currentSelection.set(""),setTimeout(()=>{t&&(t.focus(),t.setSelectionRange(n,n))},0)}insertText(e,n){let t=this.getActiveEditor();if(!t)return;let r=n!==void 0?n:t.selectionStart,g=this.content.substring(0,r),b=this.content.substring(r),P=g+e+b;this.updateContentAndCursor(P,r+e.length)}getSelection(){return{text:this.currentSelection(),start:this.selectionStart,end:this.selectionEnd}}focus(){let e=this.getActiveEditor();e&&e.focus()}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=N({type:a,selectors:[["app-editor-content"]],viewQuery:function(n,t){if(n&1&&(J(Qe,5),J(Je,5),J(Xe,5)),n&2){let r;X(r=Z())&&(t.textEditor=r.first),X(r=Z())&&(t.htmlEditor=r.first),X(r=Z())&&(t.previewDiv=r.first)}},inputs:{content:"content",editorType:"editorType",placeholder:"placeholder",availableVariables:"availableVariables"},outputs:{contentChange:"contentChange",textSelection:"textSelection",freemarkerInsert:"freemarkerInsert"},standalone:!0,features:[ne,H],decls:17,vars:11,consts:[["textEditor",""],["htmlEditor",""],["previewDiv",""],[1,"editor-content-container"],[1,"ribbon-container"],[1,"ribbon-scroll-area"],[1,"ribbon-group"],[3,"insertHtml","selectedText"],[1,"ribbon-divider"],[3,"insertCode","availableVariables","selectedText"],[1,"ribbon-spacer"],[1,"ribbon-group","view-toggle-group"],[1,"toggle-btn",3,"click","title"],[1,"editor-area"],[1,"ribbon-group","device-toggles"],["title","Desktop View",1,"ribbon-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","2","y","3","width","20","height","14","rx","2","ry","2"],["x1","8","y1","21","x2","16","y2","21"],["x1","12","y1","17","x2","12","y2","21"],["title","Tablet View",1,"ribbon-btn",3,"click"],["x","4","y","2","width","16","height","20","rx","2","ry","2"],["x1","12","y1","18","x2","12.01","y2","18"],["title","Mobile View",1,"ribbon-btn",3,"click"],["x","5","y","2","width","14","height","20","rx","2","ry","2"],["width","18","height","18","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"btn-label"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 20l4-16m4 4l8 0M6 16l-4 0M14 4l-4 0M10 20l-4 0"],[1,"txt-editor",3,"ngModel","placeholder"],[1,"txt-editor",3,"ngModelChange","mouseup","keyup","ngModel","placeholder"],[1,"html-textarea",3,"ngModelChange","mouseup","keyup","ngModel","placeholder"],[1,"preview-container"],["contenteditable","true",1,"preview-area",3,"input","mouseup","keyup"]],template:function(n,t){n&1&&(i(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"app-rich-text-toolbar",7),p("insertHtml",function(g){return t.handleRichTextInsert(g)}),o()(),h(5,"div",8),i(6,"div",6)(7,"app-freemarker-toolbar",9),p("insertCode",function(g){return t.handleFreeMarkerInsert(g)}),o()(),y(8,Ze,15,6),h(9,"div",10),i(10,"div",11)(11,"button",12),p("click",function(){return t.toggleViewMode()}),y(12,et,5,0)(13,tt,4,0),o()()()(),i(14,"div",13),y(15,rt,2,1)(16,ot,3,6),o()()),n&2&&(c(4),k("selectedText",t.currentSelection),c(3),k("availableVariables",t.availableVariables)("selectedText",t.currentSelection),c(),C(8,t.viewMode()==="view"?8:-1),c(3),I("active",t.viewMode()==="view"),k("title",t.viewMode()==="code"?"Switch to Preview HTML":"Switch to Source Code"),c(),C(12,t.viewMode()==="code"?12:13),c(2),I("visual-mode",t.viewMode()==="view"),c(),C(15,t.viewMode()==="code"?15:16))},dependencies:[R,G,W,$,U,Se,Ve],styles:[".editor-content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--surface);position:relative}.ribbon-container[_ngcontent-%COMP%]{background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:50;box-shadow:0 4px 6px -1px #00000005,0 2px 4px -1px #00000005}.ribbon-scroll-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;overflow-x:auto;scrollbar-width:thin;scrollbar-color:var(--border) transparent;white-space:nowrap}.ribbon-scroll-area[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.ribbon-scroll-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}.ribbon-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;flex-shrink:0}.ribbon-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:var(--border);margin:0 .5rem;flex-shrink:0;opacity:.6}.ribbon-spacer[_ngcontent-%COMP%]{flex:1;min-width:1rem}.ribbon-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;padding:0;background:transparent;border:1px solid transparent;border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);flex-shrink:0}.ribbon-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--primary);transform:translateY(-1px)}.ribbon-btn.active[_ngcontent-%COMP%]{background:var(--primary-light, #e0e7ff);color:var(--primary);box-shadow:inset 0 0 0 1px rgba(var(--primary-rgb),.2)}.toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;height:36px;border:1px solid var(--border);background:var(--surface);color:var(--text);border-radius:6px;cursor:pointer;font-weight:600;font-size:.8125rem;transition:all .2s;white-space:nowrap}.toggle-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover);border-color:var(--primary);color:var(--primary)}.toggle-btn.active[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:var(--primary);box-shadow:0 4px 6px -1px rgba(var(--primary-rgb),.3)}.editor-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative}.editor-area.visual-mode[_ngcontent-%COMP%]{background:#f3f4f6}[data-theme=dark][_ngcontent-%COMP%]   .editor-area.visual-mode[_ngcontent-%COMP%]{background:#111827}.txt-editor[_ngcontent-%COMP%], .html-textarea[_ngcontent-%COMP%]{flex:1;width:100%;padding:2rem;border:none;font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:14px;line-height:1.6;background:var(--surface);color:var(--text);resize:none;outline:none;overflow-y:auto}.preview-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:2rem;display:flex;justify-content:center;align-items:flex-start}.preview-area[_ngcontent-%COMP%]{flex:1;min-height:100px;background:#fff;color:#000;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;outline:none;transition:all .4s cubic-bezier(.25,.8,.25,1)}.preview-area.device-desktop[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:2rem}.preview-area.device-tablet[_ngcontent-%COMP%]{width:768px;flex:none;padding:3rem 2rem;border:8px solid #2d3748;border-radius:24px;box-shadow:0 25px 50px -12px #00000040}.preview-area.device-mobile[_ngcontent-%COMP%]{width:375px;flex:none;padding:2rem 1rem;border:8px solid #1a202c;border-radius:32px;box-shadow:0 25px 50px -12px #00000040}[data-theme=dark][_ngcontent-%COMP%]   .preview-area[_ngcontent-%COMP%]{background:#1e1e1e;color:#e0e0e0}[data-theme=dark][_ngcontent-%COMP%]   .preview-area.device-tablet[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .preview-area.device-mobile[_ngcontent-%COMP%]{border-color:#4b5563}.txt-editor[_ngcontent-%COMP%]::placeholder, .html-textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}@media (max-width: 992px){.ribbon-scroll-area[_ngcontent-%COMP%]{padding:.5rem}}@media (max-width: 600px){.btn-label[_ngcontent-%COMP%]{display:none}.toggle-btn[_ngcontent-%COMP%]{padding:.5rem}}"]})}}return a})();var ge=(a,_)=>_.name;function at(a,_){a&1&&(i(0,"div",14)(1,"div",21),h(2,"div",22),o(),i(3,"p"),s(4,"Detecting FreeMarker parameters..."),o()())}function lt(a,_){a&1&&(i(0,"div",24),f(),i(1,"svg",25),h(2,"path",26),o(),M(),i(3,"h3"),s(4,"No Parameters Detected"),o(),i(5,"p"),s(6,"No FreeMarker variables found in your template. You can generate the PDF without parameters."),o()())}function st(a,_){a&1&&(i(0,"span",36),s(1,"*"),o())}function ct(a,_){if(a&1&&(i(0,"span",37),s(1),o()),a&2){let e=l().$implicit;c(),V(e.description)}}function dt(a,_){if(a&1){let e=w();i(0,"input",43),p("input",function(t){d(e);let r=l().$implicit,g=l(5);return m(g.updateParameterValue(r.name,t.target.value))}),o()}if(a&2){let e=l().$implicit,n=l(5);k("value",n.parameterValues()[e.name])("placeholder","Enter "+e.name)}}function mt(a,_){if(a&1){let e=w();i(0,"input",44),p("input",function(t){d(e);let r=l().$implicit,g=l(5);return m(g.updateParameterValue(r.name,+t.target.value))}),o()}if(a&2){let e=l().$implicit,n=l(5);k("value",n.parameterValues()[e.name])("placeholder","Enter "+e.name)}}function pt(a,_){if(a&1){let e=w();i(0,"label",40)(1,"input",45),p("change",function(t){d(e);let r=l().$implicit,g=l(5);return m(g.updateParameterValue(r.name,t.target.checked))}),o(),i(2,"span",46),s(3),o()()}if(a&2){let e=l().$implicit,n=l(5);c(),k("checked",n.parameterValues()[e.name]),c(2),V(e.name)}}function gt(a,_){if(a&1){let e=w();i(0,"div",57)(1,"label"),s(2),o(),i(3,"input",58),p("input",function(t){let r=d(e).$implicit,g=l(2).$index,b=l(2).$implicit,P=l(5);return m(P.updateArrayItemProperty(b.name,g,r.name,t.target.value))}),o()()}if(a&2){let e=_.$implicit,n=l(2).$implicit;c(2),V(e.name),c(),k("value",n[e.name])}}function _t(a,_){if(a&1&&(i(0,"div",56),L(1,gt,4,2,"div",57,ge),o()),a&2){let e=l(3).$implicit;c(),z(e.objectProperties)}}function ut(a,_){if(a&1){let e=w();i(0,"input",58),p("input",function(t){d(e);let r=l().$index,g=l(2).$implicit,b=l(5);return m(b.parameterValues()[g.name][r]=t.target.value)}),o()}if(a&2){let e=l().$implicit;k("value",e)}}function ht(a,_){if(a&1){let e=w();i(0,"div",51)(1,"div",52)(2,"span"),s(3),o(),i(4,"button",53),p("click",function(){let t=d(e).$index,r=l(2).$implicit,g=l(5);return m(g.removeArrayItem(r.name,t))}),f(),i(5,"svg",54),h(6,"path",55),o()()(),y(7,_t,3,0,"div",56)(8,ut,1,1),o()}if(a&2){let e=_.$index,n=l(2).$implicit;c(3),D("Item ",e+1,""),c(4),C(7,n.arrayItemType==="object"&&n.objectProperties?7:8)}}function bt(a,_){if(a&1){let e=w();i(0,"div",41)(1,"div",47)(2,"span"),s(3),o(),i(4,"button",48),p("click",function(){d(e);let t=l().$implicit,r=l(5);return m(r.addArrayItem(t.name))}),f(),i(5,"svg",49),h(6,"path",50),o(),s(7," Add Item "),o()(),L(8,ht,9,2,"div",51,he),o()}if(a&2){let e,n=l().$implicit,t=l(5);c(3),D("Array Items (",((e=t.parameterValues()[n.name])==null?null:e.length)||0,")"),c(5),z(t.parameterValues()[n.name])}}function ft(a,_){if(a&1){let e=w();i(0,"div",57)(1,"label"),s(2),o(),i(3,"input",59),p("input",function(t){let r=d(e).$implicit,g=l(2).$implicit,b=l(5);return m(b.updateObjectProperty(g.name,r.name,t.target.value))}),o()()}if(a&2){let e,n=_.$implicit,t=l(2).$implicit,r=l(5);c(2),V(n.name),c(),k("value",(e=r.parameterValues()[t.name])==null?null:e[n.name])}}function xt(a,_){if(a&1&&(i(0,"div",42),L(1,ft,4,2,"div",57,ge),o()),a&2){let e=l().$implicit;c(),z(e.objectProperties)}}function Ct(a,_){if(a&1&&(i(0,"div",32)(1,"div",33)(2,"label",34),s(3),i(4,"span",35),s(5),o(),y(6,st,2,0,"span",36),o(),y(7,ct,2,1,"span",37),o(),y(8,dt,1,2,"input",38)(9,mt,1,2,"input",39)(10,pt,4,2,"label",40)(11,bt,10,1,"div",41)(12,xt,3,0,"div",42),o()),a&2){let e=_.$implicit;c(3),D(" ",e.name," "),c(2),V(e.type),c(),C(6,e.required?6:-1),c(),C(7,e.description?7:-1),c(),C(8,e.type==="string"?8:-1),c(),C(9,e.type==="number"?9:-1),c(),C(10,e.type==="boolean"?10:-1),c(),C(11,e.type==="array"?11:-1),c(),C(12,e.type==="object"&&e.objectProperties?12:-1)}}function vt(a,_){if(a&1){let e=w();i(0,"div",27)(1,"h3"),s(2),o(),i(3,"button",28),p("click",function(){d(e);let t=l(4);return m(t.generateFakeData())}),f(),i(4,"svg",29),h(5,"path",30),o(),s(6," Generate Sample Data "),o()(),M(),i(7,"div",31),L(8,Ct,13,9,"div",32,ge),o()}if(a&2){let e=l(4);c(2),D("Detected Parameters (",e.detectedParameters().length,")"),c(6),z(e.detectedParameters())}}function wt(a,_){if(a&1&&(i(0,"div",23),y(1,lt,7,0,"div",24)(2,vt,10,1),o()),a&2){let e=l(3);c(),C(1,e.detectedParameters().length===0?1:2)}}function Mt(a,_){if(a&1&&(i(0,"div",66),f(),i(1,"svg",10),h(2,"path",67),o(),s(3),o()),a&2){let e=l(4);c(3),D(" ",e.jsonError()," ")}}function Pt(a,_){if(a&1){let e=w();i(0,"div",60)(1,"div",61)(2,"h3"),s(3,"JSON Parameters"),o(),i(4,"div",62)(5,"button",63),p("click",function(){d(e);let t=l(3);return m(t.generateFakeData())}),f(),i(6,"svg",29),h(7,"path",30),o(),s(8," Generate Sample "),o()()(),M(),i(9,"div",64)(10,"textarea",65),E("ngModelChange",function(t){d(e);let r=l(3);return O(r.jsonParameters,t)||(r.jsonParameters=t),m(t)}),o(),y(11,Mt,4,1,"div",66),o()()}if(a&2){let e=l(3);c(10),T("ngModel",e.jsonParameters),c(),C(11,e.jsonError()?11:-1)}}function yt(a,_){if(a&1&&y(0,wt,3,1,"div",23)(1,Pt,12,2),a&2){let e=l(2);C(0,e.mode()==="form"?0:1)}}function kt(a,_){if(a&1){let e=w();i(0,"div",1),p("click",function(){d(e);let t=l();return m(t.onClose())}),i(1,"div",2),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",3)(3,"div",4),f(),i(4,"svg",5),h(5,"path",6),o(),M(),i(6,"h2"),s(7,"PDF Export Parameters"),o()(),i(8,"button",7),p("click",function(){d(e);let t=l();return m(t.onClose())}),s(9,"\xD7"),o()(),i(10,"div",8)(11,"button",9),p("click",function(){d(e);let t=l();return m(t.mode.set("form"))}),f(),i(12,"svg",10),h(13,"path",11),o(),s(14," Form Mode "),o(),M(),i(15,"button",9),p("click",function(){d(e);let t=l();return m(t.mode.set("json"))}),f(),i(16,"svg",10),h(17,"path",12),o(),s(18," JSON Mode "),o()(),M(),i(19,"div",13),y(20,at,5,0,"div",14)(21,yt,2,1),o(),i(22,"div",15)(23,"div",16)(24,"button",17),p("click",function(){d(e);let t=l();return m(t.onClose())}),s(25,"Cancel"),o(),i(26,"button",18),p("click",function(){d(e);let t=l();return m(t.onSkipParameters())}),s(27," Skip & Generate "),o(),i(28,"button",19),p("click",function(){d(e);let t=l();return m(t.onGeneratePdf())}),f(),i(29,"svg",10),h(30,"path",20),o(),s(31," Generate PDF "),o()()()()()}if(a&2){let e=l();c(11),I("active",e.mode()==="form"),c(4),I("active",e.mode()==="json"),c(5),C(20,e.detecting()?20:21),c(8),k("disabled",e.detecting())}}var De=(()=>{class a{constructor(){this.show=!1,this.templateContent="",this.templatePages=[],this.close=new A,this.generatePdf=new A,this.skipParameters=new A,this.mode=u("form"),this.detecting=u(!1),this.detectedParameters=u([]),this.parameterValues=u({}),this.jsonParameters=u(""),this.jsonError=u("")}ngOnInit(){this.show&&this.detectParameters()}ngOnChanges(){this.show&&this.detectParameters()}detectParameters(){this.detecting.set(!0),setTimeout(()=>{let e=this.templateContent||"";this.templatePages.forEach(x=>{x.content&&(e+=`
`+x.content)});let n=new Map,t=/\$\{([^}]+)\}/g,r;for(;(r=t.exec(e))!==null;){let x=r[1].trim(),v=this.extractVariableName(x);if(v&&!n.has(v)){let S=this.analyzeParameter(v,x,e);n.set(v,S)}}let g=/<#list\s+(\w+)\s+as\s+\w+>/g;for(;(r=g.exec(e))!==null;){let x=r[1];n.has(x)||n.set(x,{name:x,type:"array",arrayItemType:"object",required:!0,description:"Array used in list iteration"})}let b=Array.from(n.values());this.detectedParameters.set(b);let P={};b.forEach(x=>{P[x.name]=this.getDefaultValue(x)}),this.parameterValues.set(P),this.detecting.set(!1)},500)}extractVariableName(e){return!e.includes(".")&&!e.includes("[")?e:e.includes(".")?e.split(".")[0]:e.includes("[")?e.split("[")[0]:e}analyzeParameter(e,n,t){let r={name:e,type:"string",required:!0},g=new RegExp(`\\$\\{${e}\\.(\\w+)\\}`,"g"),b=t.match(g);if(b){r.type="object",r.objectProperties=[],r.description=`Object with properties: ${b.map(v=>v.match(/\.(\w+)/)?.[1]).filter(Boolean).join(", ")}`;let x=new Set;b.forEach(v=>{let S=v.match(/\.(\w+)/);S&&x.add(S[1])}),x.forEach(v=>{r.objectProperties.push({name:v,type:"string",required:!1,description:`Property of ${e} object`})})}if(new RegExp(`<#list\\s+${e}\\s+as\\s+\\w+>`,"g").test(t)&&(r.type="array",r.arrayItemType=r.objectProperties?"object":"string",r.description=`Array used in list iteration${r.objectProperties?" containing objects":""}`),!r.description){let x=e.toLowerCase();x.includes("user")||x.includes("person")?r.description="User or person information":x.includes("company")||x.includes("organization")?r.description="Company or organization data":x.includes("item")||x.includes("product")?r.description="Item or product information":x.includes("date")||x.includes("time")?r.description="Date or time value":r.description=`Template variable: ${e}`}return r}getDefaultValue(e){switch(e.type){case"string":return"";case"number":return 0;case"boolean":return!1;case"array":return e.arrayItemType==="object"&&e.objectProperties?[this.createObjectFromProperties(e.objectProperties)]:[""];case"object":return e.objectProperties?this.createObjectFromProperties(e.objectProperties):{};default:return""}}createObjectFromProperties(e){let n={};return e.forEach(t=>{n[t.name]=this.getDefaultValue(t)}),n}generateFakeData(){let e={};this.detectedParameters().forEach(n=>{e[n.name]=this.generateFakeValue(n)}),this.mode()==="json"?this.jsonParameters.set(JSON.stringify(e,null,2)):this.parameterValues.set(e)}generateFakeValue(e){switch(e.type){case"string":return this.getFakeString(e.name);case"number":return Math.floor(Math.random()*1e3)+1;case"boolean":return Math.random()>.5;case"array":return e.arrayItemType==="object"&&e.objectProperties?Array.from({length:3},()=>this.generateFakeObject(e.objectProperties)):this.generateFakeArrayData(e.name);case"object":return e.objectProperties?this.generateFakeObject(e.objectProperties):{};default:return""}}generateFakeObject(e){let n={};return e.forEach(t=>{n[t.name]=this.generateFakeValue(t)}),n}getFakeString(e){let n=e.toLowerCase();return n.includes("name")?"John Doe":n.includes("email")?"john.doe@example.com":n.includes("phone")?"+1 (555) 123-4567":n.includes("address")?"123 Main Street, City, State 12345":n.includes("company")?"Acme Corporation":n.includes("title")||n.includes("position")?"Software Developer":n.includes("date")?new Date().toLocaleDateString():n.includes("amount")||n.includes("price")?"$1,234.56":`Sample ${e}`}generateFakeArrayData(e){let n=e.toLowerCase();return n.includes("experience")?[{role:"Senior Software Developer",company:"Tech Solutions Inc",from:"2021",to:"2023",responsibilities:["Led development of web applications","Mentored junior developers","Improved system performance by 40%"]},{role:"Software Developer",company:"StartUp Innovations",from:"2019",to:"2021",responsibilities:["Developed REST APIs","Implemented frontend features","Collaborated with cross-functional teams"]}]:n.includes("education")?[{degree:"Bachelor of Computer Science",institution:"University of Technology",year:"2019"},{degree:"Master of Software Engineering",institution:"Tech Institute",year:"2021"}]:n.includes("skill")?["JavaScript/TypeScript","Java/Spring Boot","Angular/React","SQL/NoSQL Databases","AWS/Cloud Services","Docker/Kubernetes"]:n.includes("transaction")?[{date:"2025-12-01",reference:"TXN001",description:"Salary Credit",debit:"",credit:"5000.00",balance:"15000.00"},{date:"2025-12-05",reference:"TXN002",description:"ATM Withdrawal",debit:"500.00",credit:"",balance:"14500.00"},{date:"2025-12-10",reference:"TXN003",description:"Online Purchase",debit:"250.00",credit:"",balance:"14250.00"}]:["Item 1","Item 2","Item 3"]}onClose(){this.close.emit()}onGeneratePdf(){let e={};if(this.mode()==="json")try{this.jsonParameters().trim()&&(e=JSON.parse(this.jsonParameters())),this.jsonError.set("")}catch{this.jsonError.set("Invalid JSON format");return}else e=j({},this.parameterValues());this.generatePdf.emit(e)}onSkipParameters(){this.skipParameters.emit()}updateParameterValue(e,n){let t=this.parameterValues();t[e]=n,this.parameterValues.set(j({},t))}addArrayItem(e){let n=this.parameterValues(),t=this.detectedParameters().find(r=>r.name===e);if(t&&t.type==="array"){Array.isArray(n[e])||(n[e]=[]);let r=t.arrayItemType==="object"&&t.objectProperties?this.createObjectFromProperties(t.objectProperties):"";n[e].push(r),this.parameterValues.set(j({},n))}}removeArrayItem(e,n){let t=this.parameterValues();Array.isArray(t[e])&&(t[e].splice(n,1),this.parameterValues.set(j({},t)))}updateArrayItemProperty(e,n,t,r){let g=this.parameterValues();Array.isArray(g[e])&&g[e][n]&&(g[e][n][t]=r,this.parameterValues.set(j({},g)))}updateObjectProperty(e,n,t){let r=this.parameterValues();r[e]||(r[e]={}),r[e][n]=t,this.parameterValues.set(j({},r))}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=N({type:a,selectors:[["app-pdf-parameters-dialog"]],inputs:{show:"show",templateContent:"templateContent",templatePages:"templatePages"},outputs:{close:"close",generatePdf:"generatePdf",skipParameters:"skipParameters"},standalone:!0,features:[ne,H],decls:1,vars:1,consts:[[1,"modal-overlay"],[1,"modal-overlay",3,"click"],[1,"modal-content","pdf-params-modal",3,"click"],[1,"modal-header"],[1,"header-title"],["width","20","height","20","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"btn-close",3,"click"],[1,"params-mode-selector"],[1,"mode-btn",3,"click"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"],[1,"modal-body","params-body"],[1,"detecting-params"],[1,"modal-footer","params-footer"],[1,"footer-actions"],[1,"btn","btn-outline",3,"click"],["title","Generate PDF without parameters",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"spinner-container"],[1,"spinner"],[1,"params-form-mode"],[1,"no-params-message"],["width","48","height","48","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"params-header"],["title","Generate sample data",1,"btn","btn-sm","btn-secondary",3,"click"],["width","14","height","14","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"params-list"],[1,"param-group"],[1,"param-header"],[1,"param-label"],[1,"param-type"],[1,"required"],[1,"param-description"],["type","text",1,"form-control",3,"value","placeholder"],["type","number",1,"form-control",3,"value","placeholder"],[1,"checkbox-label"],[1,"array-param"],[1,"object-param"],["type","text",1,"form-control",3,"input","value","placeholder"],["type","number",1,"form-control",3,"input","value","placeholder"],["type","checkbox",3,"change","checked"],[1,"checkbox-text"],[1,"array-header"],[1,"btn","btn-xs","btn-primary",3,"click"],["width","12","height","12","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"array-item"],[1,"array-item-header"],[1,"btn","btn-xs","btn-danger",3,"click"],["width","10","height","10","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"object-properties"],[1,"property-field"],["type","text",1,"form-control","form-control-sm",3,"input","value"],["type","text",1,"form-control",3,"input","value"],[1,"params-json-mode"],[1,"json-header"],[1,"json-actions"],["title","Generate sample JSON",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"json-editor"],["placeholder",`Enter JSON parameters, e.g.:
{
  "name": "John Doe",
  "email": "john@example.com",
  "items": [
    {"title": "Item 1", "price": 100},
    {"title": "Item 2", "price": 200}
  ]
}`,"rows","12",1,"json-textarea",3,"ngModelChange","ngModel"],[1,"json-error"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(n,t){n&1&&y(0,kt,32,6,"div",0),n&2&&C(0,t.show?0:-1)},dependencies:[R,G,W,$,U],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem}.pdf-params-modal[_ngcontent-%COMP%]{width:90vw;max-width:800px;max-height:90vh;background-color:var(--surface, #ffffff);border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;display:flex;flex-direction:column;overflow:hidden}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid var(--border, #e5e7eb);flex-shrink:0;display:flex;align-items:center;justify-content:space-between}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.header-title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--primary, #3b82f6)}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--text, #111827)}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:var(--text-secondary, #6b7280);cursor:pointer;padding:.25rem;border-radius:4px;transition:all .15s ease}.btn-close[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover, #f3f4f6);color:var(--text, #111827)}.params-mode-selector[_ngcontent-%COMP%]{display:flex;padding:0 1.5rem;border-bottom:1px solid var(--border, #e5e7eb);background-color:var(--surface-secondary, #f9fafb)}.mode-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:none;border:none;color:var(--text-secondary, #6b7280);cursor:pointer;transition:all .15s ease;border-bottom:2px solid transparent;font-size:.875rem;font-weight:500}.mode-btn[_ngcontent-%COMP%]:hover{color:var(--text, #111827);background-color:var(--surface-hover, #f3f4f6)}.mode-btn.active[_ngcontent-%COMP%]{color:var(--primary, #3b82f6);border-bottom-color:var(--primary, #3b82f6);background-color:var(--surface, #ffffff)}.params-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem;min-height:300px}.detecting-params[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.spinner-container[_ngcontent-%COMP%]{margin-bottom:1rem}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid transparent;border-top:2px solid var(--primary, #3b82f6);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-params-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.no-params-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-secondary, #6b7280);margin-bottom:1rem}.no-params-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text, #111827);font-size:1.125rem}.no-params-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary, #6b7280);margin:0;max-width:400px}.params-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--border, #e5e7eb)}.params-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--text, #111827)}.params-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.param-group[_ngcontent-%COMP%]{padding:1.25rem;border:1px solid var(--border, #e5e7eb);border-radius:8px;background-color:var(--surface, #ffffff)}.param-header[_ngcontent-%COMP%]{margin-bottom:1rem}.param-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:var(--text, #111827);margin-bottom:.25rem}.param-type[_ngcontent-%COMP%]{padding:.125rem .5rem;background-color:var(--primary, #3b82f6);color:#fff;border-radius:4px;font-size:.75rem;font-weight:500;text-transform:uppercase}.required[_ngcontent-%COMP%]{color:var(--danger, #ef4444);font-weight:700}.param-description[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--text-secondary, #6b7280);font-weight:400;margin-top:.25rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border, #e5e7eb);border-radius:6px;background-color:var(--background, #ffffff);color:var(--text, #111827);font-size:.875rem;transition:border-color .15s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary, #3b82f6);box-shadow:0 0 0 2px #3b82f61a}.form-control-sm[_ngcontent-%COMP%]{padding:.5rem;font-size:.8125rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border:1px solid transparent;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease;text-decoration:none}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary, #3b82f6);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark, #2563eb)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--surface-secondary, #f3f4f6);color:var(--text, #111827);border-color:var(--border, #e5e7eb)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover, #e5e7eb)}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;color:var(--text, #111827);border-color:var(--border, #e5e7eb)}.btn-outline[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover, #f3f4f6)}.btn-danger[_ngcontent-%COMP%]{background-color:var(--danger, #ef4444);color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:var(--danger-dark, #dc2626)}.btn-xs[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:400}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:1rem;height:1rem;accent-color:var(--primary, #3b82f6)}.array-param[_ngcontent-%COMP%]{border:1px solid var(--border-secondary, #d1d5db);border-radius:6px;overflow:hidden}.array-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem;background-color:var(--surface-secondary, #f9fafb);border-bottom:1px solid var(--border-secondary, #d1d5db);font-weight:500;color:var(--text, #111827)}.array-item[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid var(--border-secondary, #d1d5db)}.array-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.array-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem;font-weight:500;color:var(--text-secondary, #6b7280)}.object-param[_ngcontent-%COMP%], .object-properties[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.property-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.property-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary, #6b7280)}.json-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.json-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--text, #111827)}.json-textarea[_ngcontent-%COMP%]{width:100%;min-height:300px;padding:1rem;border:1px solid var(--border, #e5e7eb);border-radius:8px;background-color:var(--background, #ffffff);color:var(--text, #111827);font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:.875rem;line-height:1.5;resize:vertical;transition:border-color .15s ease}.json-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary, #3b82f6);box-shadow:0 0 0 2px #3b82f61a}.json-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;padding:.75rem;background-color:var(--danger-bg, #fef2f2);color:var(--danger, #ef4444);border-radius:6px;font-size:.875rem}.params-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid var(--border, #e5e7eb);flex-shrink:0}.footer-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.75rem}@media (max-width: 768px){.pdf-params-modal[_ngcontent-%COMP%]{width:95vw;max-height:95vh}.modal-header[_ngcontent-%COMP%], .params-body[_ngcontent-%COMP%], .params-footer[_ngcontent-%COMP%]{padding:1rem}.params-mode-selector[_ngcontent-%COMP%]{padding:0 1rem}.mode-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.8125rem}.params-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.footer-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.footer-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.json-textarea[_ngcontent-%COMP%]{min-height:250px;font-size:.8125rem}}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--surface-secondary, #f9fafb)}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border, #e5e7eb);border-radius:3px}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary, #6b7280)}"]})}}return a})();var Ie=(()=>{class a{constructor(e){this.http=e,this.apiUrl=ye.apiUrl}getAllFolders(){return this.http.get(`${this.apiUrl}/template-folders`)}getRootFolders(){return this.http.get(`${this.apiUrl}/template-folders/root`)}getFolderById(e){return this.http.get(`${this.apiUrl}/template-folders/${e}`)}getSubFolders(e){return this.http.get(`${this.apiUrl}/template-folders/${e}/children`)}createFolder(e){return this.http.post(`${this.apiUrl}/template-folders`,e)}updateFolder(e,n){return this.http.put(`${this.apiUrl}/template-folders/${e}`,n)}deleteFolder(e){return this.http.delete(`${this.apiUrl}/template-folders/${e}`)}getAllPages(e){return this.http.get(`${this.apiUrl}/templates/${e}/pages`)}getPageById(e,n){return this.http.get(`${this.apiUrl}/templates/${e}/pages/${n}`)}createPage(e,n){return this.http.post(`${this.apiUrl}/templates/${e}/pages`,n)}updatePage(e,n,t){return this.http.put(`${this.apiUrl}/templates/${e}/pages/${n}`,t)}deletePage(e,n){return this.http.delete(`${this.apiUrl}/templates/${e}/pages/${n}`)}reorderPages(e,n){return this.http.post(`${this.apiUrl}/templates/${e}/pages/reorder`,n)}getAllAttributes(e){return this.http.get(`${this.apiUrl}/templates/${e}/attributes`)}getAttributeById(e,n){return this.http.get(`${this.apiUrl}/templates/${e}/attributes/${n}`)}createAttribute(e,n){return this.http.post(`${this.apiUrl}/templates/${e}/attributes`,n)}updateAttribute(e,n,t){return this.http.put(`${this.apiUrl}/templates/${e}/attributes/${n}`,t)}deleteAttribute(e,n){return this.http.delete(`${this.apiUrl}/templates/${e}/attributes/${n}`)}createTemplate(e,n){return n?this.http.post(`${this.apiUrl}/template-editor`,e,{params:{appName:n}}):this.http.post(`${this.apiUrl}/template-editor`,e)}updateTemplate(e,n,t){return t?this.http.put(`${this.apiUrl}/template-editor/${e}`,n,{params:{appName:t}}):this.http.put(`${this.apiUrl}/template-editor/${e}`,n)}getTemplate(e,n){return n?this.http.get(`${this.apiUrl}/template-editor/${e}`,{params:{appName:n}}):this.http.get(`${this.apiUrl}/template-editor/${e}`)}exportToPdf(e,n){return this.http.post(`${this.apiUrl}/template-editor/${e}/preview-pdf`,n,{responseType:"blob",observe:"body"})}exportToWord(e,n){return this.http.post(`${this.apiUrl}/template-editor/${e}/preview-word`,n,{responseType:"blob",observe:"body"})}getTemplateInfo(e,n){return n?this.http.get(`${this.apiUrl}/template-editor/${e}/info`,{params:{appName:n}}):this.http.get(`${this.apiUrl}/template-editor/${e}/info`)}static{this.\u0275fac=function(n){return new(n||a)(_e(Ce))}}static{this.\u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Fe=(a,_)=>_.id;function Ot(a,_){a&1&&h(0,"span",10)}function Et(a,_){a&1&&(i(0,"div",17),h(1,"div",36),o())}function St(a,_){a&1&&(f(),i(0,"svg",12),h(1,"path",37),o())}function Vt(a,_){a&1&&s(0," Generating... ")}function Dt(a,_){a&1&&s(0," PDF ")}function It(a,_){if(a&1&&(i(0,"div",62),s(1),o()),a&2){let e=l().$implicit;c(),V(e.description)}}function Ft(a,_){if(a&1){let e=w();i(0,"div",50)(1,"div",51)(2,"div",52),s(3),o(),i(4,"div",53)(5,"button",54),p("click",function(){let t=d(e).$implicit,r=l(3);return m(r.editAttribute(t))}),f(),i(6,"svg",55),h(7,"path",23),o()(),M(),i(8,"button",56),p("click",function(){let t=d(e).$implicit,r=l(3);return m(r.confirmDeleteAttribute(t))}),f(),i(9,"svg",55),h(10,"path",57),o()()()(),M(),i(11,"div",58)(12,"div",59),s(13),o(),i(14,"div",60),s(15),o(),y(16,It,2,1,"div",61),o()()}if(a&2){let e=_.$implicit;c(2),ce("data-type",e.attributeType),c(),D(" ",e.attributeType," "),c(10),V(e.attributeKey),c(2),V(e.attributeValue||"(no default)"),c(),k("ngIf",e.description)}}function jt(a,_){if(a&1&&(i(0,"div",49),L(1,Ft,17,5,"div",50,Fe),o()),a&2){let e=l(2);c(),z(e.attributes())}}function At(a,_){if(a&1){let e=w();i(0,"div",63),f(),i(1,"svg",64),h(2,"path",65),o(),M(),i(3,"h4"),s(4,"No Variables Yet"),o(),i(5,"p"),s(6),o(),i(7,"button",66),p("click",function(){d(e);let t=l(2);return m(t.openAttributeModal())}),s(8,"Add Your First Variable"),o()()}a&2&&(c(6),fe("Add variables like ","{","","{","name","}","","}",", ","{","","{","email","}","","}"," to make your template dynamic"))}function Lt(a,_){if(a&1){let e=w();i(0,"div",38),p("click",function(){d(e);let t=l();return m(t.closeVariablesPanel())}),i(1,"div",39),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",40)(3,"div",41),f(),i(4,"svg",42),h(5,"path",13),o(),M(),i(6,"h3"),s(7,"Attributes"),o(),i(8,"span",43),s(9),o()(),i(10,"div",44)(11,"button",45),p("click",function(){d(e);let t=l();return m(t.openAttributeModal())}),f(),i(12,"svg",28),h(13,"path",46),o()(),M(),i(14,"button",47),p("click",function(){d(e);let t=l();return m(t.closeVariablesPanel())}),s(15,"\xD7"),o()()(),i(16,"div",48),y(17,jt,3,0,"div",49)(18,At,9,8),o()()()}if(a&2){let e=l();c(9),D("",e.attributes().length," variables"),c(8),C(17,e.attributes().length>0?17:18)}}function zt(a,_){if(a&1&&(i(0,"span",24),s(1),o()),a&2){let e=l();c(),D("",e.htmlContent().length," chars")}}function Nt(a,_){if(a&1){let e=w();i(0,"button",67),p("click",function(){d(e);let t=l();return m(t.openPageModal())}),f(),i(1,"svg",42),h(2,"path",46),o()()}}function Ht(a,_){a&1&&(i(0,"div",30)(1,"div",68)(2,"div",69)(3,"div",70)(4,"h4"),s(5,"\u{1F4C4} Pages"),o(),i(6,"p"),s(7,"Break your template into multiple pages for better organization. Each page can have different content. "),o()(),i(8,"div",70)(9,"h4"),s(10,"\u{1F3F7}\uFE0F Variables"),o(),i(11,"p"),s(12,"Use variables like "),i(13,"code"),s(14),o(),s(15," or "),i(16,"code"),s(17),o(),s(18," to make your template dynamic. "),o()(),i(19,"div",70)(20,"h4"),s(21,"\u270F\uFE0F Editor"),o(),i(22,"p"),s(23,"Write HTML in the editor and see live preview. Use the toolbar to insert FreeMarker syntax."),o()(),i(24,"div",70)(25,"h4"),s(26,"\u{1F441}\uFE0F Preview"),o(),i(27,"p"),s(28,"See how your template looks with real data. Variables will be replaced with their values."),o()()()()()),a&2&&(c(14),me("","{","","{","name","}","","}",""),c(3),me("","{","","{","email","}","","}",""))}function Rt(a,_){if(a&1){let e=w();i(0,"app-editor-content",71),p("contentChange",function(t){d(e);let r=l();return m(r.onEditorContentChange(t))})("textSelection",function(t){d(e);let r=l();return m(r.onEditorTextSelection(t))})("freemarkerInsert",function(t){d(e);let r=l();return m(r.onEditorFreeMarkerInsert(t))}),o()}if(a&2){let e=l();k("content",e.htmlContent())("editorType",e.isTxtType()?"text":"html")("availableVariables",e.allVariables())}}function Wt(a,_){if(a&1){let e=w();i(0,"button",86),p("click",function(){let t=d(e).$implicit,r=l(3);return m(r.selectPage(t))}),s(1),o()}if(a&2){let e,n=_.$implicit,t=_.$index,r=l(3);I("active",((e=r.activePage())==null?null:e.id)===n.id),k("title",n.name||"Page "+(t+1)),ce("aria-label","Go to page "+(t+1)),c(),D(" ",t+1," ")}}function $t(a,_){if(a&1){let e=w();i(0,"div",76)(1,"span",77),s(2),o(),i(3,"span",78),s(4),o()(),i(5,"div",79)(6,"button",80),p("click",function(){d(e);let t=l(2);return m(t.goToPreviousPage())}),f(),i(7,"svg",12),h(8,"path",81),o(),M(),i(9,"span",14),s(10,"Previous"),o()(),i(11,"div",82),L(12,Wt,2,5,"button",83,Fe),o(),i(14,"button",84),p("click",function(){d(e);let t=l(2);return m(t.goToNextPage())}),i(15,"span",14),s(16,"Next"),o(),f(),i(17,"svg",12),h(18,"path",85),o()()()}if(a&2){let e,n=l(2);c(2),ie(" Page ",n.getCurrentPageIndex()+1," of ",n.pages().length," "),c(2),V(((e=n.activePage())==null?null:e.name)||"Untitled Page"),c(2),k("disabled",n.getCurrentPageIndex()===0),c(6),z(n.pages()),c(2),k("disabled",n.getCurrentPageIndex()===n.pages().length-1)}}function Ut(a,_){if(a&1){let e=w();i(0,"div",87)(1,"div",88),f(),i(2,"svg",89),h(3,"path",90),o(),M(),i(4,"span"),s(5,"No pages yet"),o()(),i(6,"button",66),p("click",function(){d(e);let t=l(2);return m(t.openPageModal())}),f(),i(7,"svg",12),h(8,"path",46),o(),s(9," Create First Page "),o()()}}function Gt(a,_){if(a&1){let e=w();i(0,"button",91),p("click",function(){d(e);let t=l(2);return m(t.editPage(t.activePage()))}),f(),i(1,"svg",28),h(2,"path",23),o()()}}function Bt(a,_){if(a&1){let e=w();i(0,"button",92),p("click",function(){d(e);let t=l(2);return m(t.confirmDeletePage(t.activePage()))}),f(),i(1,"svg",28),h(2,"path",57),o()()}}function qt(a,_){if(a&1&&(i(0,"div",33)(1,"div",72),y(2,$t,19,5)(3,Ut,10,0),i(4,"div",73),y(5,Gt,3,0,"button",74)(6,Bt,3,0,"button",75),o()()()),a&2){let e=l();c(2),C(2,e.pages().length>0?2:3),c(3),k("ngIf",e.activePage()),c(),k("ngIf",e.activePage()&&e.pages().length>1)}}function Yt(a,_){if(a&1){let e=w();i(0,"div",93),p("click",function(){d(e);let t=l();return m(t.closeModal("type"))}),i(1,"div",94),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",95)(3,"h2"),s(4,"Select Template Type"),o(),i(5,"button",47),p("click",function(){d(e);let t=l();return m(t.closeModal("type"))}),s(6,"\xD7"),o()(),i(7,"div",96)(8,"div",97)(9,"div",98),p("click",function(){d(e);let t=l();return m(t.selectType(t.TemplateType.HTML))}),f(),i(10,"svg",64),h(11,"path",90),o(),M(),i(12,"h3"),s(13,"HTML Template"),o(),i(14,"p"),s(15,"Rich HTML editor with multiple pages, styling, and live preview"),o()(),i(16,"div",98),p("click",function(){d(e);let t=l();return m(t.selectType(t.TemplateType.TXT))}),f(),i(17,"svg",64),h(18,"path",90),o(),M(),i(19,"h3"),s(20,"Text Template"),o(),i(21,"p"),s(22,"Simple plain text template for emails and messages"),o()(),i(23,"div",99),f(),i(24,"svg",64),h(25,"path",100),o(),M(),i(26,"h3"),s(27,"Form Template"),o(),i(28,"p"),s(29,"Coming soon - Dynamic form builder"),o()()()()()()}}function Kt(a,_){if(a&1){let e=w();i(0,"div",93),p("click",function(){d(e);let t=l();return m(t.closeModal("page"))}),i(1,"div",94),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",95)(3,"h2"),s(4),o(),i(5,"button",47),p("click",function(){d(e);let t=l();return m(t.closeModal("page"))}),s(6,"\xD7"),o()(),i(7,"div",96)(8,"div",101)(9,"label"),s(10,"Page Name"),o(),i(11,"input",102),E("ngModelChange",function(t){d(e);let r=l();return O(r.pageName,t)||(r.pageName=t),m(t)}),o()(),i(12,"div",101)(13,"label"),s(14,"Initial Content (optional)"),o(),i(15,"textarea",103),E("ngModelChange",function(t){d(e);let r=l();return O(r.pageContent,t)||(r.pageContent=t),m(t)}),o()()(),i(16,"div",104)(17,"button",105),p("click",function(){d(e);let t=l();return m(t.closeModal("page"))}),s(18,"Cancel"),o(),i(19,"button",66),p("click",function(){d(e);let t=l();return m(t.savePage())}),s(20),o()()()()}if(a&2){let e=l();c(4),V(e.editingPageId()?"Edit Page":"Add Page"),c(7),T("ngModel",e.pageName),c(4),T("ngModel",e.pageContent),c(5),D(" ",e.editingPageId()?"Update":"Create"," ")}}function Qt(a,_){if(a&1){let e=w();i(0,"div",93),p("click",function(){d(e);let t=l();return m(t.closeModal("attribute"))}),i(1,"div",94),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",95)(3,"h2"),s(4),o(),i(5,"button",47),p("click",function(){d(e);let t=l();return m(t.closeModal("attribute"))}),s(6,"\xD7"),o()(),i(7,"div",96)(8,"div",101)(9,"label"),s(10,"Attribute Key *"),o(),i(11,"input",106),E("ngModelChange",function(t){d(e);let r=l();return O(r.attributeKey,t)||(r.attributeKey=t),m(t)}),o()(),i(12,"div",101)(13,"label"),s(14,"Default Value"),o(),i(15,"input",107),E("ngModelChange",function(t){d(e);let r=l();return O(r.attributeValue,t)||(r.attributeValue=t),m(t)}),o()(),i(16,"div",101)(17,"label"),s(18,"Type"),o(),i(19,"select",108),E("ngModelChange",function(t){d(e);let r=l();return O(r.attributeType,t)||(r.attributeType=t),m(t)}),i(20,"option",109),s(21,"String"),o(),i(22,"option",110),s(23,"Number"),o(),i(24,"option",111),s(25,"Date"),o(),i(26,"option",112),s(27,"Boolean"),o()()(),i(28,"div",101)(29,"label"),s(30,"Description"),o(),i(31,"textarea",113),E("ngModelChange",function(t){d(e);let r=l();return O(r.attributeDescription,t)||(r.attributeDescription=t),m(t)}),o()()(),i(32,"div",104)(33,"button",105),p("click",function(){d(e);let t=l();return m(t.closeModal("attribute"))}),s(34,"Cancel"),o(),i(35,"button",66),p("click",function(){d(e);let t=l();return m(t.saveAttribute())}),s(36),o()()()()}if(a&2){let e=l();c(4),V(e.editingAttributeId()?"Edit Attribute":"Add Attribute"),c(7),T("ngModel",e.attributeKey),c(4),T("ngModel",e.attributeValue),c(4),T("ngModel",e.attributeType),c(12),T("ngModel",e.attributeDescription),c(5),D(" ",e.editingAttributeId()?"Update":"Create"," ")}}function Jt(a,_){if(a&1){let e=w();i(0,"div",93),p("click",function(){d(e);let t=l();return m(t.closeModal("delete"))}),i(1,"div",114),p("click",function(t){return d(e),m(t.stopPropagation())}),i(2,"div",95)(3,"h2"),s(4,"Confirm Delete"),o(),i(5,"button",47),p("click",function(){d(e);let t=l();return m(t.closeModal("delete"))}),s(6,"\xD7"),o()(),i(7,"div",96)(8,"p"),s(9,"Are you sure you want to delete "),i(10,"strong"),s(11),o(),s(12,"?"),o(),i(13,"p",115),s(14,"This action cannot be undone."),o()(),i(15,"div",104)(16,"button",105),p("click",function(){d(e);let t=l();return m(t.closeModal("delete"))}),s(17,"Cancel"),o(),i(18,"button",116),p("click",function(){d(e);let t=l();return m(t.confirmDelete())}),s(19,"Delete"),o()()()()}if(a&2){let e=l();c(11),V(e.deleteName())}}var Bn=(()=>{class a{constructor(e,n,t,r,g){this.templateService=e,this.appContext=n,this.route=t,this.router=r,this.freemarkerService=g,this.showTypeModal=u(!1),this.showFolderModal=u(!1),this.showPageModal=u(!1),this.showAttributeModal=u(!1),this.showDeleteModal=u(!1),this.templateId=u(null),this.templateName=u(""),this.templateType=u(Q.HTML),this.pageOrientation=u(q.PORTRAIT),this.selectedFolder=u(null),this.newFolderName=u(""),this.folders=u([]),this.rootFolders=u([]),this.pages=u([]),this.activePage=u(null),this.pageContent=u(""),this.pageName=u(""),this.editingPageId=u(null),this.attributes=u([]),this.attributeKey=u(""),this.attributeValue=u(""),this.attributeType=u("STRING"),this.attributeDescription=u(""),this.editingAttributeId=u(null),this.activeTab=u("html"),this.htmlContent=u(""),this.previewHtml=u(""),this.currentSelection=u(""),this.selectionStart=u(0),this.selectionEnd=u(0),this.deleteType=u(null),this.deleteId=u(null),this.deleteName=u(""),this.loading=u(!1),this.saving=u(!1),this.sidebarOpen=u(!0),this.sidebarActiveTab=u("pages"),this.showHelp=!1,this.showVariablesPanel=u(!1),this.showPdfOptions=!1,this.pdfExporting=u(!1),this.showPdfParametersDialog=u(!1),this.templatePages=K(()=>this.pages()),this.templateContent=K(()=>this.htmlContent()),this.detectedVariables=u([]),this.allVariables=K(()=>[...this.attributes().map(P=>({name:P.attributeKey,type:"attribute",source:"Template Attribute"})),...this.detectedVariables()]),this.isHtmlType=K(()=>this.templateType()===Q.HTML),this.isTxtType=K(()=>this.templateType()===Q.TXT),this.hasPages=K(()=>this.pages().length>0),this.TemplateType=Q,this.PageOrientation=q,this.PageOrientationLabels=Te,this.PageOrientationDescriptions=Oe}getCurrentAppName(){let e=this.appContext.selectedApp();return e?e.name:void 0}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.templateId.set(+e),this.loadTemplate()):this.showTypeModal.set(!0),this.loadFolders(),this.isHtmlType()?this.sidebarActiveTab.set("pages"):this.sidebarActiveTab.set("attributes"),this.setupSidebarClickOutside(),this.setupDropdownClickOutside()}selectType(e){this.templateType.set(e),this.showTypeModal.set(!1),e===Q.HTML&&this.createFirstPage()}updateTemplateName(){this.templateId()&&this.saveTemplateMetadata()}onPageOrientationChange(){this.templateId()&&this.saveTemplateMetadata()}loadFolders(){this.templateService.getRootFolders().subscribe({next:e=>{this.rootFolders.set(e),this.folders.set(e)},error:e=>console.error("Error loading folders:",e)})}selectFolder(e){this.selectedFolder.set(e)}openFolderModal(){this.newFolderName.set(""),this.showFolderModal.set(!0)}createFolder(){this.newFolderName().trim()&&this.templateService.createFolder({name:this.newFolderName(),parentId:this.selectedFolder()?.id}).subscribe({next:e=>{this.loadFolders(),this.selectedFolder.set(e),this.showFolderModal.set(!1)},error:e=>console.error("Error creating folder:",e)})}loadPages(){let e=this.templateId();e&&this.templateService.getAllPages(e).subscribe({next:n=>{this.pages.set(n),n.length>0&&!this.activePage()?this.selectPage(n[0]):n.length===0&&this.isHtmlType()&&this.createDefaultPageForExistingTemplate()},error:n=>console.error("Error loading pages:",n)})}createDefaultPageForExistingTemplate(){let e=this.templateId();e&&this.templateService.createPage(e,{name:"Page 1",content:`<h1>Welcome to your template</h1>
<p>Start editing your content here...</p>`,pageOrder:0}).subscribe({next:n=>{this.pages.set([n]),this.selectPage(n),this.htmlContent.set(n.content)},error:n=>{console.error("Error creating default page:",n);let t=new Date().toISOString(),r={id:Date.now(),name:"Page 1",content:`<h1>Welcome to your template</h1>
<p>Start editing your content here...</p>`,pageOrder:0,templateId:e,createdAt:t,updatedAt:t};this.pages.set([r]),this.selectPage(r),this.htmlContent.set(r.content)}})}createFirstPage(){let e=new Date().toISOString(),n={id:Date.now(),name:"Page 1",content:`<h1>Welcome to your template</h1>
<p>Start editing your content here...</p>`,pageOrder:0,templateId:this.templateId()||0,createdAt:e,updatedAt:e};this.pages.set([n]),this.selectPage(n),this.htmlContent.set(n.content)}openPageModal(){this.pageName.set(`Page ${this.pages().length+1}`),this.pageContent.set(""),this.editingPageId.set(null),this.showPageModal.set(!0)}editPage(e){this.pageName.set(e.name),this.pageContent.set(e.content),this.editingPageId.set(e.id),this.showPageModal.set(!0)}savePage(){let e=this.templateId();if(!e){this.createTemplateWithPage();return}let n={name:this.pageName(),content:this.pageContent()},t=this.editingPageId();t?this.templateService.updatePage(e,t,n).subscribe({next:r=>{let g=this.pages(),b=g.findIndex(P=>P.id===t);b!==-1&&(g[b]=j(j({},g[b]),r),this.pages.set([...g])),this.showPageModal.set(!1)},error:r=>console.error("Error updating page:",r)}):this.templateService.createPage(e,n).subscribe({next:r=>{this.pages.set([...this.pages(),r]),this.showPageModal.set(!1),this.selectPage(r)},error:r=>console.error("Error creating page:",r)})}createTemplateWithPage(){let e=this.templateName()||"New Template",n={name:this.pageName(),content:this.pageContent()},t={id:Date.now(),templateId:0,name:n.name,content:n.content||"",pageOrder:this.pages().length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.pages.set([...this.pages(),t]),this.selectPage(t),this.showPageModal.set(!1)}selectPage(e){this.activePage.set(e),this.htmlContent.set(e.content),this.detectFreeMarkerVariables(),window.innerWidth<=768&&this.sidebarOpen.set(!1)}confirmDeletePage(e){this.deleteType.set("page"),this.deleteId.set(e.id),this.deleteName.set(e.name),this.showDeleteModal.set(!0)}movePage(e,n){let t=this.pages(),r=t.findIndex(v=>v.id===e.id);if(r===-1||n==="up"&&r===0||n==="down"&&r===t.length-1)return;let g=[...t],b=n==="up"?r-1:r+1;[g[r],g[b]]=[g[b],g[r]];let P=g.map(v=>v.id),x=this.templateId();x&&this.templateService.reorderPages(x,P).subscribe({next:()=>this.loadPages(),error:v=>console.error("Error reordering pages:",v)})}loadAttributes(){let e=this.templateId();e&&this.templateService.getAllAttributes(e).subscribe({next:n=>this.attributes.set(n),error:n=>console.error("Error loading attributes:",n)})}openAttributeModal(){this.attributeKey.set(""),this.attributeValue.set(""),this.attributeType.set("STRING"),this.attributeDescription.set(""),this.editingAttributeId.set(null),this.showAttributeModal.set(!0)}editAttribute(e){this.attributeKey.set(e.attributeKey),this.attributeValue.set(e.attributeValue),this.attributeType.set(e.attributeType),this.attributeDescription.set(e.description||""),this.editingAttributeId.set(e.id),this.showAttributeModal.set(!0)}saveAttribute(){if(!this.attributeKey().trim()){alert("Attribute key is required");return}let e=this.templateId();if(!e){this.storeAttributeTemporarily();return}let n={attributeKey:this.attributeKey(),attributeValue:this.attributeValue(),attributeType:this.attributeType(),description:this.attributeDescription()},t=this.editingAttributeId();t?this.templateService.updateAttribute(e,t,n).subscribe({next:r=>{let g=this.attributes(),b=g.findIndex(P=>P.id===t);b!==-1&&(g[b]=j(j({},g[b]),r),this.attributes.set([...g])),this.showAttributeModal.set(!1)},error:r=>console.error("Error updating attribute:",r)}):this.templateService.createAttribute(e,n).subscribe({next:r=>{this.attributes.set([...this.attributes(),r]),this.showAttributeModal.set(!1)},error:r=>console.error("Error creating attribute:",r)})}storeAttributeTemporarily(){let e={id:Date.now(),templateId:0,attributeKey:this.attributeKey(),attributeValue:this.attributeValue(),attributeType:this.attributeType(),description:this.attributeDescription(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.attributes.set([...this.attributes(),e]),this.showAttributeModal.set(!1)}confirmDeleteAttribute(e){this.deleteType.set("attribute"),this.deleteId.set(e.id),this.deleteName.set(e.attributeKey),this.showDeleteModal.set(!0)}confirmDelete(){let e=this.deleteType(),n=this.deleteId(),t=this.templateId();!e||!n||!t||(e==="page"?this.templateService.deletePage(t,n).subscribe({next:()=>{this.pages.set(this.pages().filter(r=>r.id!==n)),this.showDeleteModal.set(!1),this.activePage()?.id===n&&this.pages().length>0&&this.selectPage(this.pages()[0])},error:r=>console.error("Error deleting page:",r)}):e==="attribute"&&this.templateService.deleteAttribute(t,n).subscribe({next:()=>{this.attributes.set(this.attributes().filter(r=>r.id!==n)),this.showDeleteModal.set(!1)},error:r=>console.error("Error deleting attribute:",r)}))}onContentChange(e){this.htmlContent.set(e);let n=this.activePage();n&&(n.content=e),this.detectFreeMarkerVariables()}onEditorContentChange(e){this.onContentChange(e.content)}onEditorTextSelection(e){this.currentSelection.set(e.selectedText),this.selectionStart.set(e.selectionStart),this.selectionEnd.set(e.selectionEnd)}onEditorFreeMarkerInsert(e){this.detectFreeMarkerVariables()}handleFreeMarkerInsertInEditor(e){let n=this.currentSelection(),t=this.selectionStart(),r=this.selectionEnd(),g=this.htmlContent(),b;if(e.wrapSelection&&n){let P=e.code.split(`
`);if(e.type==="if"||e.type==="if-else"){let x=P[0],v=P[P.length-1],S=`${x}
  ${n}
${v}`,F=g.substring(0,t),B=g.substring(r);b=F+S+B}else if(e.type==="for"){let x=P[0],v=P[P.length-1],S=`${x}
  ${n}
${v}`,F=g.substring(0,t),B=g.substring(r);b=F+S+B}else if(e.type==="variable"){let x=g.substring(0,t),v=g.substring(r);b=x+e.code+v}else{let x=g.substring(0,t),v=g.substring(r);b=x+e.code+v}}else b=g+`
`+e.code;this.htmlContent.set(b),this.onContentChange(b),this.currentSelection.set("")}detectFreeMarkerVariables(){let e=this.htmlContent(),n=this.freemarkerService.extractVariables(e);this.detectedVariables.set(n)}saveTemplate(){let e=this.templateId();if(!e)this.createNewTemplate();else{this.saving.set(!0);let n={name:this.templateName(),type:this.templateType(),htmlContent:this.htmlContent()||"",cssStyles:"",subject:"",pageOrientation:this.pageOrientation(),folderId:this.selectedFolder()?.id};this.templateService.updateTemplate(e,n,this.getCurrentAppName()).subscribe({next:()=>{let t=this.activePage();t?this.templateService.updatePage(e,t.id,{name:t.name,content:this.htmlContent()}).subscribe({next:()=>{this.saving.set(!1),alert("Template saved successfully!")},error:r=>{this.saving.set(!1),console.error("Error saving page content:",r),alert("Error saving page content")}}):(this.saving.set(!1),alert("Template saved successfully!"))},error:t=>{this.saving.set(!1),console.error("Error saving template:",t),alert("Error saving template")}})}}createNewTemplate(){if(!this.templateName().trim()){alert("Please enter a template name");return}this.saving.set(!0);let e={name:this.templateName(),type:this.templateType(),htmlContent:this.htmlContent()||"",cssStyles:"",folderId:this.selectedFolder()?.id,pageOrientation:this.pageOrientation()};this.templateService.createTemplate(e,this.getCurrentAppName()).subscribe({next:n=>{this.templateId.set(n.id),this.saving.set(!1);let t=this.pages(),r=this.attributes();t.length>0||r.length>0?this.createPagesAndAttributesForTemplate(n.id,t,r):(alert("Template created successfully!"),this.router.navigate(["/admin/template-editor",n.id]))},error:n=>{this.saving.set(!1),console.error("Error creating template:",n),alert("Error creating template")}})}createPagesAndAttributesForTemplate(e,n,t){let r=0,g=0,b=n.length,P=t.length;b>0&&n.forEach((x,v)=>{this.templateService.createPage(e,{name:x.name,content:x.content,pageOrder:v}).subscribe({next:()=>{r++,this.checkCreationComplete(e,r,b,g,P)},error:S=>console.error("Error creating page:",S)})}),P>0&&t.forEach(x=>{this.templateService.createAttribute(e,{attributeKey:x.attributeKey,attributeValue:x.attributeValue,attributeType:x.attributeType,description:x.description}).subscribe({next:()=>{g++,this.checkCreationComplete(e,r,b,g,P)},error:v=>console.error("Error creating attribute:",v)})})}checkCreationComplete(e,n,t,r,g){n===t&&r===g&&(alert("Template created successfully with all pages and attributes!"),this.router.navigate(["/admin/template-editor",e]))}loadTemplate(){let e=this.templateId();e&&(this.loading.set(!0),this.templateService.getTemplate(e).subscribe({next:n=>{this.templateName.set(n.name),this.templateType.set(n.type),this.pageOrientation.set(n.pageOrientation||q.PORTRAIT),this.htmlContent.set(n.htmlContent||""),this.selectedFolder.set(n.folder||null),this.loading.set(!1),this.loadPages(),this.loadAttributes()},error:n=>{this.loading.set(!1),console.error("Error loading template:",n),n.status===403?(alert("Access denied: You do not have permission to access this template. It may belong to another organization."),this.router.navigate(["/admin/templates"])):n.status===404?(alert("Template not found. It may have been deleted."),this.router.navigate(["/admin/templates"])):alert("Error loading template: "+(n.error?.message||n.message||"Unknown error"))}}))}closeModal(e){switch(e){case"type":this.showTypeModal.set(!1);break;case"folder":this.showFolderModal.set(!1);break;case"page":this.showPageModal.set(!1);break;case"attribute":this.showAttributeModal.set(!1);break;case"delete":this.showDeleteModal.set(!1);break}}toggleSidebar(){console.log("Toggle clicked, current state:",this.sidebarOpen());let e=!this.sidebarOpen();this.sidebarOpen.set(e),console.log("New state:",this.sidebarOpen());let n=document.querySelector(".editor-sidebar");n&&(e?n.classList.add("open"):n.classList.remove("open"),console.log("Sidebar classes after manual toggle:",n.classList))}setupSidebarClickOutside(){document.addEventListener("click",e=>{let n=e.target,t=document.querySelector(".editor-sidebar"),r=document.querySelector(".sidebar-toggle");window.innerWidth<=768&&this.sidebarOpen()&&t&&!t.contains(n)&&r&&!r.contains(n)&&this.sidebarOpen.set(!1)})}setupDropdownClickOutside(){document.addEventListener("click",e=>{let n=e.target,t=document.querySelector(".btn-dropdown");this.showPdfOptions&&t&&!t.contains(n)&&(this.showPdfOptions=!1)})}toggleVariablesPanel(){this.showVariablesPanel.set(!this.showVariablesPanel())}closeVariablesPanel(){this.showVariablesPanel.set(!1)}getCurrentPageIndex(){let e=this.activePage();if(!e||this.pages().length===0)return 0;let n=this.pages().findIndex(t=>t.id===e.id);return n>=0?n:0}goToPreviousPage(){let e=this.getCurrentPageIndex();e>0&&this.selectPage(this.pages()[e-1])}goToNextPage(){let e=this.getCurrentPageIndex();e<this.pages().length-1&&this.selectPage(this.pages()[e+1])}saveTemplateMetadata(){let e=this.templateId();if(!e){alert("Please save the template first");return}this.saving.set(!0);let n={name:this.templateName(),type:this.templateType(),htmlContent:this.htmlContent()||"",cssStyles:"",subject:"",pageOrientation:this.pageOrientation(),folderId:this.selectedFolder()?.id};this.templateService.updateTemplate(e,n,this.getCurrentAppName()).subscribe({next:()=>{this.saving.set(!1),console.log("Template metadata saved successfully")},error:t=>{this.saving.set(!1),console.error("Error saving template metadata:",t)}})}exportToPdf(){if(!this.templateId()){alert("Please save the template first");return}this.openPdfParametersDialog()}openPdfParametersDialog(){this.showPdfParametersDialog.set(!0)}closePdfParametersDialog(){this.showPdfParametersDialog.set(!1)}onGeneratePdf(e){let n=this.templateId();if(!n)return;this.closePdfParametersDialog(),this.pdfExporting.set(!0);let t={parameters:e,pageNumber:void 0};this.templateService.exportToPdf(n,t).subscribe({next:r=>{this.pdfExporting.set(!1),this.openPdfInNewTab(r,`${this.templateName()}.pdf`)},error:r=>{this.pdfExporting.set(!1),console.error("Error exporting PDF:",r),alert("Error exporting PDF: "+(r.error?.message||r.message||"Unknown error"))}})}onSkipParameters(){let e=this.templateId();if(!e)return;this.closePdfParametersDialog(),this.pdfExporting.set(!0);let n={parameters:{},pageNumber:void 0};this.templateService.exportToPdf(e,n).subscribe({next:t=>{this.pdfExporting.set(!1),this.openPdfInNewTab(t,`${this.templateName()}.pdf`)},error:t=>{this.pdfExporting.set(!1),console.error("Error exporting PDF:",t),alert("Error exporting PDF: "+(t.error?.message||t.message||"Unknown error"))}})}downloadPdf(){let e=this.templateId();if(!e){alert("Please save the template first");return}this.pdfExporting.set(!0);let n={};this.attributes().forEach(r=>{n[r.attributeKey]=r.attributeValue||""});let t={parameters:n,pageNumber:void 0};this.templateService.exportToPdf(e,t).subscribe({next:r=>{this.pdfExporting.set(!1),this.downloadFile(r,`${this.templateName()}.pdf`,"application/pdf")},error:r=>{this.pdfExporting.set(!1),console.error("Error downloading PDF:",r),alert("Error downloading PDF: "+(r.error?.message||r.message||"Unknown error"))}})}exportToWord(){let e=this.templateId();if(!e){alert("Please save the template first");return}let n={};this.attributes().forEach(r=>{n[r.attributeKey]=r.attributeValue||""});let t={parameters:n};this.templateService.exportToWord(e,t).subscribe({next:r=>{this.downloadFile(r,`${this.templateName()}.docx`,"application/vnd.openxmlformats-officedocument.wordprocessingml.document")},error:r=>{console.error("Error exporting Word:",r),alert("Error exporting Word: "+(r.error?.message||r.message||"Unknown error"))}})}downloadFile(e,n,t){let r=window.URL.createObjectURL(e),g=document.createElement("a");g.href=r,g.download=n,g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(r)}openPdfInNewTab(e,n){let t=window.URL.createObjectURL(e),r=window.open(t,"_blank");r?(r.document.title=n,setTimeout(()=>{window.URL.revokeObjectURL(t)},1e3)):(console.warn("Popup blocked, falling back to download"),this.downloadFile(e,n,"application/pdf"))}static{this.\u0275fac=function(n){return new(n||a)(Y(Ie),Y(ke),Y(we),Y(Me),Y(le))}}static{this.\u0275cmp=N({type:a,selectors:[["app-template-editor-enhanced"]],viewQuery:function(n,t){if(n&1&&J(pe,5),n&2){let r;X(r=Z())&&(t.editorContentComponent=r.first)}},standalone:!0,features:[H],decls:53,vars:38,consts:[[1,"template-editor-enhanced"],[1,"editor-header"],[1,"header-left"],["type","text","placeholder","Enter template name",1,"template-name-input",3,"ngModelChange","blur","ngModel"],[1,"template-type-badge"],[1,"page-orientation-selector"],[1,"orientation-select",3,"ngModelChange","change","ngModel","title"],[3,"value","title"],[1,"header-actions"],[1,"btn","btn-outline",3,"click","disabled"],[1,"spinner-sm"],["title","Manage template attributes",1,"btn","btn-secondary","variables-btn",3,"click"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"btn-text"],[1,"btn-badge"],["title","Open PDF in new tab",1,"btn","btn-primary",3,"click","disabled"],[1,"spinner-container"],[1,"variables-panel-overlay"],[1,"editor-main-fullwidth"],[1,"editor-tabs-enhanced"],[1,"tabs-left"],["title","Edit your template content",1,"tab",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"tab-info"],[1,"tabs-right"],["title","Add new page",1,"btn","btn-sm","btn-primary","add-page-btn"],["title","Show help and tips",1,"btn","btn-sm","btn-outline","help-btn",3,"click"],["width","14","height","14","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"help-panel"],[1,"editor-content-fullwidth"],[3,"content","editorType","availableVariables"],[1,"pages-pagination-footer"],[1,"modal-overlay"],[3,"close","generatePdf","skipParameters","show","templateContent","templatePages"],[1,"spinner"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"variables-panel-overlay",3,"click"],[1,"variables-panel",3,"click"],[1,"variables-panel-header"],[1,"panel-title"],["width","20","height","20","fill","none","stroke","currentColor","viewBox","0 0 24 24"],[1,"variables-count"],[1,"panel-actions"],[1,"btn","btn-sm","btn-primary",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"btn-close",3,"click"],[1,"variables-panel-content"],[1,"variables-grid"],[1,"variable-card"],[1,"variable-header"],[1,"variable-type-badge"],[1,"variable-actions"],["title","Edit",1,"btn-icon-xs",3,"click"],["width","12","height","12","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["title","Delete",1,"btn-icon-xs","danger",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"variable-content"],[1,"variable-key"],[1,"variable-value"],["class","variable-description",4,"ngIf"],[1,"variable-description"],[1,"variables-empty-state"],["width","48","height","48","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"btn","btn-primary",3,"click"],["title","Add new page",1,"btn","btn-sm","btn-primary","add-page-btn",3,"click"],[1,"help-content"],[1,"help-sections"],[1,"help-section"],[3,"contentChange","textSelection","freemarkerInsert","content","editorType","availableVariables"],[1,"pagination-container"],[1,"pagination-actions"],["class","btn-icon-sm","title","Edit current page",3,"click",4,"ngIf"],["class","btn-icon-sm danger","title","Delete current page",3,"click",4,"ngIf"],[1,"pagination-info"],[1,"page-indicator"],[1,"page-title"],[1,"pagination-controls"],["title","Previous page",1,"pagination-btn","prev",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"page-numbers"],[1,"page-number",3,"active","title"],["title","Next page",1,"pagination-btn","next",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"page-number",3,"click","title"],[1,"no-pages-state"],[1,"no-pages-info"],["width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["title","Edit current page",1,"btn-icon-sm",3,"click"],["title","Delete current page",1,"btn-icon-sm","danger",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"type-cards"],[1,"type-card",3,"click"],[1,"type-card","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"form-group"],["type","text","placeholder","Page 1",1,"form-control",3,"ngModelChange","ngModel"],["rows","4","placeholder","<h1>Page content...</h1>",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-outline",3,"click"],["type","text","placeholder","e.g., subject, recipient, company",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Default value",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","STRING"],["value","NUMBER"],["value","DATE"],["value","BOOLEAN"],["rows","2","placeholder","What is this attribute for?",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-content","modal-sm",3,"click"],[1,"text-danger"],[1,"btn","btn-danger",3,"click"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),E("ngModelChange",function(g){return O(t.templateName,g)||(t.templateName=g),g}),p("blur",function(){return t.updateTemplateName()}),o(),i(4,"span",4),s(5),o(),i(6,"div",5)(7,"select",6),E("ngModelChange",function(g){return O(t.pageOrientation,g)||(t.pageOrientation=g),g}),p("change",function(){return t.onPageOrientationChange()}),i(8,"option",7),s(9),o(),i(10,"option",7),s(11),o()()()(),i(12,"div",8)(13,"button",9),p("click",function(){return t.saveTemplate()}),y(14,Ot,1,0,"span",10),s(15," Save "),o(),i(16,"button",11),p("click",function(){return t.toggleVariablesPanel()}),f(),i(17,"svg",12),h(18,"path",13),o(),M(),i(19,"span",14),s(20,"Attributes"),o(),i(21,"span",15),s(22),o()(),i(23,"button",16),p("click",function(){return t.exportToPdf()}),y(24,Et,2,0,"div",17)(25,St,2,0),i(26,"span",14),y(27,Vt,1,0)(28,Dt,1,0),o()()()(),y(29,Lt,19,2,"div",18),i(30,"div",19)(31,"div",20)(32,"div",21)(33,"button",22),p("click",function(){return t.activeTab.set("html")}),f(),i(34,"svg",12),h(35,"path",23),o(),M(),i(36,"span"),s(37),o(),y(38,zt,2,1,"span",24),o()(),i(39,"div",25),y(40,Nt,3,0,"button",26),i(41,"button",27),p("click",function(){return t.showHelp=!t.showHelp}),f(),i(42,"svg",28),h(43,"path",29),o()()()(),y(44,Ht,29,8,"div",30),M(),i(45,"div",31),y(46,Rt,1,3,"app-editor-content",32),o(),y(47,qt,7,3,"div",33),o(),y(48,Yt,30,0,"div",34)(49,Kt,21,4,"div",34)(50,Qt,37,6,"div",34)(51,Jt,20,1,"div",34),i(52,"app-pdf-parameters-dialog",35),p("close",function(){return t.closePdfParametersDialog()})("generatePdf",function(g){return t.onGeneratePdf(g)})("skipParameters",function(){return t.onSkipParameters()}),o()()),n&2&&(c(3),T("ngModel",t.templateName),c(2),V(t.templateType()),c(2),T("ngModel",t.pageOrientation),k("title",t.PageOrientationDescriptions[t.pageOrientation()]),c(),k("value",t.PageOrientation.PORTRAIT)("title",t.PageOrientationDescriptions[t.PageOrientation.PORTRAIT]),c(),D(" ",t.PageOrientationLabels[t.PageOrientation.PORTRAIT]," "),c(),k("value",t.PageOrientation.LANDSCAPE)("title",t.PageOrientationDescriptions[t.PageOrientation.LANDSCAPE]),c(),D(" ",t.PageOrientationLabels[t.PageOrientation.LANDSCAPE]," "),c(2),k("disabled",t.saving()),c(),C(14,t.saving()?14:-1),c(2),I("active",t.showVariablesPanel()),c(6),V(t.attributes().length),c(),I("loading",t.pdfExporting()),k("disabled",!t.templateId()||t.loading()||t.pdfExporting()),c(),C(24,t.pdfExporting()?24:25),c(3),C(27,t.pdfExporting()?27:28),c(2),C(29,t.showVariablesPanel()?29:-1),c(4),I("active",t.activeTab()==="html"),c(4),V(t.isTxtType()?"Text Editor":"HTML Editor"),c(),C(38,t.htmlContent()?38:-1),c(2),C(40,t.isHtmlType()?40:-1),c(),I("active",t.showHelp),c(3),C(44,t.showHelp?44:-1),c(2),C(46,t.activeTab()==="html"?46:-1),c(),C(47,t.isHtmlType()?47:-1),c(),C(48,t.showTypeModal()?48:-1),c(),C(49,t.showPageModal()?49:-1),c(),C(50,t.showAttributeModal()?50:-1),c(),C(51,t.showDeleteModal()?51:-1),c(),k("show",t.showPdfParametersDialog())("templateContent",t.templateContent())("templatePages",t.templatePages()))},dependencies:[R,xe,G,oe,ae,W,re,$,U,pe,De],styles:["[_nghost-%COMP%]{--header-height: 72px;--footer-height: 64px;--sidebar-width: 320px;--tab-height: 48px;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: 1rem;--spacing-lg: 1.5rem;--spacing-xl: 2rem;--radius-sm: 6px;--radius-md: 10px;--radius-lg: 16px;--radius-xl: 24px;--transition-fast: .15s ease;--transition-normal: .25s cubic-bezier(.4, 0, .2, 1);--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05)}.template-editor-enhanced[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 64px);background-color:var(--background);color:var(--text);overflow:hidden;position:relative;font-family:Inter,system-ui,-apple-system,sans-serif}.editor-header[_ngcontent-%COMP%]{height:var(--header-height);padding:0 var(--spacing-lg);display:flex;align-items:center;justify-content:space-between;background-color:var(--surface);border-bottom:1px solid var(--border);z-index:20;gap:var(--spacing-md);transition:var(--transition-normal)}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md);flex:1;min-width:0}.template-name-input[_ngcontent-%COMP%]{background:var(--surface-elevated);border:1px solid var(--border);color:var(--text);font-size:1rem;font-weight:500;padding:.5rem 1rem;border-radius:var(--radius-md);width:100%;max-width:320px;transition:all .2s;box-shadow:inset 0 1px 2px #0000000d}.template-name-input[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover);border-color:var(--border-light)}.template-name-input[_ngcontent-%COMP%]:focus{outline:none;background-color:var(--surface);border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}.template-type-badge[_ngcontent-%COMP%]{padding:4px 10px;background:linear-gradient(135deg,var(--primary),var(--primary-hover));color:#fff;border-radius:6px;font-size:.7rem;font-weight:700;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 2px 4px rgba(var(--primary-rgb),.25);transition:all .2s}.template-type-badge[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 3px 6px rgba(var(--primary-rgb),.3)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:.5rem 1rem;border-radius:var(--radius-md);font-weight:500;font-size:.875rem;cursor:pointer;transition:all var(--transition-fast);border:1px solid transparent;height:40px;white-space:nowrap}.btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--surface-elevated);border-color:var(--border);color:var(--text-secondary)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover);border-color:var(--border-focus);color:var(--text)}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;border-color:var(--border);color:var(--text)}.btn-outline[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary);background-color:rgba(var(--primary-rgb, 0, 0, 0),.05)}.btn-success[_ngcontent-%COMP%]{background-color:var(--success);color:#fff}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px)}.btn-danger[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}.btn-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:1.5rem;line-height:1;color:var(--text-secondary);cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:var(--text)}.spinner-sm[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.editor-main-fullwidth[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative}.editor-tabs-enhanced[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:var(--tab-height);background-color:var(--surface-elevated);border-bottom:1px solid var(--border);padding:0 var(--spacing-lg)}.tabs-left[_ngcontent-%COMP%], .tabs-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);height:100%}.add-page-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary),#a855f7);border:none;box-shadow:0 4px 6px #7c3aed40;transition:all .2s cubic-bezier(.4,0,.2,1);width:36px;height:36px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:8px}.add-page-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 10px #7c3aed59;background:linear-gradient(135deg,var(--primary-hover),#9333ea)}.tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:0 var(--spacing-md);height:calc(100% - 1px);background:transparent;border:none;border-bottom:2px solid transparent;color:var(--text-secondary);font-weight:500;font-size:.875rem;cursor:pointer;transition:var(--transition-fast)}.tab[_ngcontent-%COMP%]:hover{color:var(--primary);background-color:var(--surface-hover)}.tab.active[_ngcontent-%COMP%]{color:var(--primary);border-bottom-color:var(--primary);background-color:transparent}.tab-info[_ngcontent-%COMP%]{font-size:.75rem;padding:2px 6px;background-color:var(--border-light);border-radius:10px;color:var(--text-muted)}.help-panel[_ngcontent-%COMP%]{position:absolute;top:calc(var(--tab-height) + 12px);right:var(--spacing-lg);width:340px;background-color:var(--surface);border:1px solid var(--border);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;border-radius:var(--radius-lg);z-index:1000;padding:1.5rem;animation:_ngcontent-%COMP%_helpSlideIn .2s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_helpSlideIn{0%{opacity:0;transform:translateY(-10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.help-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.help-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--spacing-xs);color:var(--text);font-size:.95rem}.help-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:.85rem;line-height:1.5}.editor-content-fullwidth[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;background-color:var(--background)}.pages-pagination-footer[_ngcontent-%COMP%]{height:var(--footer-height);background-color:var(--surface);border-top:1px solid var(--border);padding:0 var(--spacing-lg);display:flex;align-items:center;justify-content:center;z-index:10}.pagination-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:1200px}.pagination-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-indicator[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);text-transform:uppercase;font-weight:600}.page-title[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.page-numbers[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);background-color:var(--surface-elevated);padding:4px;border-radius:20px;border:1px solid var(--border-light)}.page-number[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:none;background:transparent;color:var(--text-secondary);font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--transition-fast)}.page-number[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover);color:var(--text)}.page-number.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;box-shadow:0 2px 5px #0003}.pagination-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:transparent;border:1px solid var(--border);color:var(--text);padding:.5rem 1rem;border-radius:var(--radius-md);cursor:pointer;font-size:.875rem;transition:var(--transition-fast)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--primary);color:var(--primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;border-color:var(--border-light)}.pagination-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.btn-icon-sm[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;border:1px solid transparent;background:transparent;color:var(--text-secondary);cursor:pointer;transition:var(--transition-fast)}.btn-icon-sm[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover);color:var(--text)}.btn-icon-sm.danger[_ngcontent-%COMP%]:hover{background-color:#ff00001a;color:var(--danger)}@media (max-width: 768px){.pagination-container[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;gap:var(--spacing-sm)}.pagination-info[_ngcontent-%COMP%]{width:100%;text-align:center;order:-1;margin-bottom:var(--spacing-xs)}.btn-text[_ngcontent-%COMP%]{display:none}}.variables-panel-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000;display:flex;justify-content:flex-end;opacity:0;animation:_ngcontent-%COMP%_fadeIn .2s forwards}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}}.variables-panel[_ngcontent-%COMP%]{width:320px;max-width:90vw;height:100%;background-color:var(--surface);box-shadow:-10px 0 30px #00000026;display:flex;flex-direction:column;border-left:1px solid var(--border);transform:translate(100%);animation:_ngcontent-%COMP%_slideInRight .3s cubic-bezier(.16,1,.3,1) .1s forwards}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%)}to{transform:translate(0)}}.variables-panel-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background-color:var(--surface)}.panel-title[_ngcontent-%COMP%]{display:flex;flex-direction:column}.panel-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;letter-spacing:-.02em;color:var(--text);display:flex;align-items:center;gap:.5rem}.variables-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);margin-top:.25rem}.panel-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.btn.btn-sm.btn-primary[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border-radius:10px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 6px rgba(var(--primary-rgb),.2)}.btn.btn-sm.btn-primary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.variables-panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem;background-color:var(--background)}.variable-card[_ngcontent-%COMP%]{background-color:var(--surface);border:1px solid var(--border-light);border-radius:12px;padding:1.25rem;margin-bottom:1rem;transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.variable-card[_ngcontent-%COMP%]:hover{border-color:var(--primary);box-shadow:0 4px 12px #0000000d;transform:translateY(-2px)}.variable-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem}.variable-type-badge[_ngcontent-%COMP%]{font-size:.65rem;text-transform:uppercase;padding:4px 8px;border-radius:6px;font-weight:700;letter-spacing:.05em}.variable-type-badge[data-type=STRING][_ngcontent-%COMP%]{color:#6366f1;background-color:#e0e7ff}.variable-type-badge[data-type=NUMBER][_ngcontent-%COMP%]{color:#10b981;background-color:#d1fae5}.variable-type-badge[data-type=DATE][_ngcontent-%COMP%]{color:#f59e0b;background-color:#fef3c7}.variable-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;opacity:.6;transition:opacity .2s}.variable-card[_ngcontent-%COMP%]:hover   .variable-actions[_ngcontent-%COMP%]{opacity:1}.btn-icon-xs[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;color:var(--text-muted);padding:4px;border-radius:4px;transition:all .2s}.btn-icon-xs[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover);color:var(--primary)}.btn-icon-xs.danger[_ngcontent-%COMP%]:hover{color:var(--danger);background-color:#dc26261a}.variable-key[_ngcontent-%COMP%]{font-family:JetBrains Mono,Fira Code,monospace;font-size:1rem;font-weight:600;color:var(--primary);margin-bottom:.5rem;display:block}.variable-value[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text);margin-bottom:.25rem;word-break:break-all;line-height:1.4}.variable-description[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);font-style:italic;margin-top:.5rem;padding-top:.5rem;border-top:1px dashed var(--border-light)}.variables-empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:3rem 1.5rem;color:var(--text-muted)}.variables-empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--border);margin-bottom:1rem}.variables-empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text);margin:0 0 .5rem}.btn-icon-xs.danger[_ngcontent-%COMP%]:hover{color:var(--danger)}.variable-key[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:var(--primary);margin-bottom:4px}.variable-value[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text);word-break:break-all}.variable-description[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);margin-top:4px;font-style:italic}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-md)}.modal-content[_ngcontent-%COMP%]{background-color:var(--surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:500px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_zoomIn .2s ease;border:1px solid var(--border)}@keyframes _ngcontent-%COMP%_zoomIn{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.modal-header[_ngcontent-%COMP%]{padding:var(--spacing-lg);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.modal-footer[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:var(--spacing-md);background-color:var(--surface-elevated)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);font-weight:500;font-size:.875rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.625rem;border:1px solid var(--border);border-radius:var(--radius-sm);background-color:var(--background);color:var(--text);transition:border-color var(--transition-fast)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.1)}.type-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-md)}.type-card[_ngcontent-%COMP%]{padding:var(--spacing-lg);border:2px solid var(--border);border-radius:var(--radius-md);text-align:center;cursor:pointer;transition:all var(--transition-fast)}.type-card[_ngcontent-%COMP%]:hover{border-color:var(--primary);background-color:var(--surface-hover);transform:translateY(-2px)}.type-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:var(--spacing-md) 0 var(--spacing-xs)}.type-card.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;filter:grayscale(1)}@media (max-width: 992px){[_nghost-%COMP%]{--header-height: auto;--sidebar-width: 280px}.editor-header[_ngcontent-%COMP%]{flex-wrap:wrap;padding:var(--spacing-md);height:auto}.header-left[_ngcontent-%COMP%]{width:100%;order:1;margin-bottom:var(--spacing-sm)}.header-actions[_ngcontent-%COMP%]{width:100%;order:2;overflow-x:auto;padding-bottom:4px;justify-content:flex-start}.template-name-input[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 600px){.editor-tabs-enhanced[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);overflow-x:auto}.tabs-right[_ngcontent-%COMP%]{position:fixed;bottom:var(--footer-height);right:var(--spacing-md);height:auto;z-index:90;flex-direction:column-reverse}.add-page-btn[_ngcontent-%COMP%]{box-shadow:var(--shadow-lg);border-radius:24px;padding:.75rem 1.25rem}.help-btn[_ngcontent-%COMP%]{display:none}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;padding:var(--spacing-sm) 0}.variables-panel[_ngcontent-%COMP%]{width:100%}}.btn-group[_ngcontent-%COMP%]{display:inline-flex;position:relative}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.btn-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-flex}.btn-dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0;border-left:1px solid rgba(255,255,255,.2);padding:.5rem .75rem;min-width:auto}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;z-index:1000;min-width:180px;padding:.5rem 0;margin:.125rem 0 0;background-color:var(--surface);border:1px solid var(--border);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);opacity:0;visibility:hidden;transform:translateY(-10px);transition:all var(--transition-fast)}.dropdown-menu.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;width:100%;padding:.5rem 1rem;background:none;border:none;color:var(--text);text-align:left;cursor:pointer;transition:background-color var(--transition-fast);font-size:.875rem}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover)}.dropdown-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.7}@media (max-width: 768px){.btn-group[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:160px}}.page-orientation-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-left:1rem}.orientation-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary);margin:0}.orientation-select[_ngcontent-%COMP%]{padding:.375rem .75rem;border:1px solid var(--border);border-radius:var(--radius-sm);background-color:var(--surface);color:var(--text);font-size:.875rem;cursor:pointer;transition:all var(--transition-fast);min-width:180px}.orientation-select[_ngcontent-%COMP%]:hover{border-color:var(--primary)}.orientation-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.orientation-info[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--text-secondary);cursor:help;opacity:.7;transition:opacity var(--transition-fast)}.orientation-info[_ngcontent-%COMP%]:hover{opacity:1;color:var(--primary)}.orientation-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}@media (max-width: 768px){.page-orientation-selector[_ngcontent-%COMP%]{margin-left:.5rem}.orientation-label[_ngcontent-%COMP%]{display:none}.orientation-select[_ngcontent-%COMP%]{min-width:140px;font-size:.8rem}.orientation-info[_ngcontent-%COMP%]{display:none}}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:16px;height:16px}.spinner[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn.loading[_ngcontent-%COMP%]{position:relative;pointer-events:none;opacity:.8}.btn.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:currentColor;opacity:.8}.btn-primary.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:#fffc}.btn-secondary.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:var(--text)}.btn-outline.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:var(--primary)}@media (prefers-color-scheme: dark){.btn-primary.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:#ffffffe6}.btn-secondary.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:var(--text-secondary)}}@media (prefers-color-scheme: light){.btn-primary.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:#ffffffe6}.btn-secondary.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-top-color:var(--text)}}.btn.loading[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.btn[_ngcontent-%COMP%]{transition:all var(--transition-fast)}.btn.loading[_ngcontent-%COMP%]{transition:opacity var(--transition-fast)}@media (max-width: 768px){.spinner-container[_ngcontent-%COMP%]{width:14px;height:14px}.spinner[_ngcontent-%COMP%]{width:12px;height:12px;border-width:1.5px}}.pdf-params-overlay[_ngcontent-%COMP%]{z-index:2000}.pdf-params-modal[_ngcontent-%COMP%]{width:90vw;max-width:800px;max-height:90vh;display:flex;flex-direction:column}.pdf-params-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid var(--border);flex-shrink:0}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.header-title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--primary)}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600}.params-mode-selector[_ngcontent-%COMP%]{display:flex;padding:0 1.5rem;border-bottom:1px solid var(--border);background-color:var(--surface-secondary)}.mode-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:none;border:none;color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast);border-bottom:2px solid transparent;font-size:.875rem;font-weight:500}.mode-btn[_ngcontent-%COMP%]:hover{color:var(--text);background-color:var(--surface-hover)}.mode-btn.active[_ngcontent-%COMP%]{color:var(--primary);border-bottom-color:var(--primary);background-color:var(--surface)}.mode-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.params-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem;min-height:300px}.detecting-params[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.detecting-params[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{margin-bottom:1rem}.detecting-params[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.no-params-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.no-params-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:1rem}.no-params-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text);font-size:1.125rem}.no-params-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;max-width:400px}.params-form-mode[_ngcontent-%COMP%]{width:100%}.params-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}.params-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--text)}.params-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.param-group[_ngcontent-%COMP%]{padding:1.25rem;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--surface)}.param-header[_ngcontent-%COMP%]{margin-bottom:1rem}.param-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:var(--text);margin-bottom:.25rem}.param-type[_ngcontent-%COMP%]{padding:.125rem .5rem;background-color:var(--primary);color:#fff;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;text-transform:uppercase}.required[_ngcontent-%COMP%]{color:var(--danger);font-weight:700}.param-description[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--text-secondary);font-weight:400;margin-top:.25rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border);border-radius:var(--radius-sm);background-color:var(--background);color:var(--text);font-size:.875rem;transition:border-color var(--transition-fast)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.form-control-sm[_ngcontent-%COMP%]{padding:.5rem;font-size:.8125rem}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:400}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:1rem;height:1rem;accent-color:var(--primary)}.checkbox-text[_ngcontent-%COMP%]{color:var(--text)}.array-param[_ngcontent-%COMP%]{border:1px solid var(--border-secondary);border-radius:var(--radius-sm);overflow:hidden}.array-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem;background-color:var(--surface-secondary);border-bottom:1px solid var(--border-secondary);font-weight:500;color:var(--text)}.array-item[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid var(--border-secondary)}.array-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.array-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem;font-weight:500;color:var(--text-secondary)}.object-param[_ngcontent-%COMP%], .object-properties[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.property-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.property-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary)}.params-json-mode[_ngcontent-%COMP%]{width:100%}.json-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.json-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--text)}.json-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.json-editor[_ngcontent-%COMP%]{position:relative}.json-textarea[_ngcontent-%COMP%]{width:100%;min-height:300px;padding:1rem;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--background);color:var(--text);font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:.875rem;line-height:1.5;resize:vertical;transition:border-color var(--transition-fast)}.json-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.json-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;padding:.75rem;background-color:var(--danger-bg);color:var(--danger);border-radius:var(--radius-sm);font-size:.875rem}.json-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.params-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid var(--border);flex-shrink:0}.footer-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.75rem}.btn-xs[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem;line-height:1}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}@media (max-width: 768px){.pdf-params-modal[_ngcontent-%COMP%]{width:95vw;max-height:95vh}.pdf-params-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%], .params-body[_ngcontent-%COMP%], .params-footer[_ngcontent-%COMP%]{padding:1rem}.params-mode-selector[_ngcontent-%COMP%]{padding:0 1rem}.mode-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.8125rem}.params-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.footer-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.footer-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.json-textarea[_ngcontent-%COMP%]{min-height:250px;font-size:.8125rem}}@media (prefers-color-scheme: dark){.json-textarea[_ngcontent-%COMP%]{background-color:var(--surface)}.param-type[_ngcontent-%COMP%]{background-color:var(--primary-dark)}}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--surface-secondary)}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}.params-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}"]})}}return a})();export{Bn as TemplateEditorEnhancedComponent};
