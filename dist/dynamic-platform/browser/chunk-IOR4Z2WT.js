import{b as L,d as Q,g as H,r as N}from"./chunk-BC33UU65.js";import{a as A,b as G}from"./chunk-4CTQDGJF.js";import{a as W}from"./chunk-NAK5AQJJ.js";import{b as D}from"./chunk-QRIHUA6I.js";import{Fb as I,Gb as $,Hb as j,Jb as F,Ka as o,Lb as c,Mb as d,Sa as v,W as S,Ya as P,Z as V,Za as w,_a as y,ab as O,cb as M,eb as B,fb as U,ga as f,gb as T,ha as x,hb as t,ia as h,ib as a,ic as z,ja as k,jb as _,kb as C,lb as b,mb as p,wb as l,xb as m,yb as E}from"./chunk-KOA5EEQG.js";var q=(n,u)=>u.id;function J(n,u){if(n&1){let e=C();t(0,"button",8),b("click",function(){f(e);let i=p();return x(i.clearSearch())}),h(),t(1,"svg",9),_(2,"path",10),a()()}}function K(n,u){n&1&&(t(0,"div",7),_(1,"div",11),t(2,"p"),l(3),c(4,"translate"),a()()),n&2&&(o(3),m(d(4,1,"users.loading")))}function R(n,u){n&1&&(t(0,"div",12),h(),t(1,"svg",13),_(2,"path",14),a(),k(),t(3,"h2"),l(4),c(5,"translate"),a(),t(6,"p"),l(7),c(8,"translate"),a()()),n&2&&(o(4),m(d(5,2,"users.empty.title")),o(3),m(d(8,4,"users.empty.desc")))}function X(n,u){if(n&1){let e=C();t(0,"button",25),c(1,"translate"),b("click",function(){f(e);let i=p().$implicit,s=p(2);return x(s.deactivateUser(i))}),h(),t(2,"svg",9),_(3,"path",26),a()()}n&2&&w("title",d(1,1,"users.actions.deactivate"))}function Y(n,u){if(n&1){let e=C();t(0,"button",27),c(1,"translate"),b("click",function(){f(e);let i=p().$implicit,s=p(2);return x(s.activateUser(i))}),h(),t(2,"svg",9),_(3,"path",28),a()()}n&2&&w("title",d(1,1,"users.actions.activate"))}function Z(n,u){if(n&1){let e=C();t(0,"tr")(1,"td")(2,"div",17)(3,"div",18),l(4),a(),t(5,"span",19),l(6),a()()(),t(7,"td"),l(8),a(),t(9,"td")(10,"span",20),l(11),c(12,"translate"),c(13,"translate"),a()(),t(14,"td"),l(15),a(),t(16,"td")(17,"div",21),P(18,X,4,3,"button",22)(19,Y,4,3),t(20,"button",23),c(21,"translate"),b("click",function(){let i=f(e).$implicit,s=p(2);return x(s.deleteUser(i))}),h(),t(22,"svg",9),_(23,"path",24),a()()()()()}if(n&2){let e=u.$implicit,r=p(2);o(4),m(r.getInitials(e.name||e.email)),o(2),m(e.name||e.email),o(2),m(e.email),o(2),O("active",e.enabled)("inactive",!e.enabled),o(),E(" ",e.enabled?d(12,11,"users.status.active"):d(13,13,"users.status.inactive")," "),o(4),m(r.formatDate(e.createdAt)),o(3),M(18,e.enabled?18:19),o(2),w("title",d(21,15,"users.actions.delete"))}}function ee(n,u){n&1&&(t(0,"span",32),l(1,"..."),a())}function te(n,u){if(n&1){let e=C();t(0,"button",33),b("click",function(){f(e);let i=p().$implicit,s=p(3);return x(s.goToPage(i))}),l(1),a()}if(n&2){let e=p().$implicit,r=p(3);O("active",e===r.currentPage()),o(),E(" ",e+1," ")}}function ne(n,u){if(n&1&&P(0,ee,2,0,"span",32)(1,te,2,3),n&2){let e=u.$implicit;M(0,e===-1?0:1)}}function ie(n,u){if(n&1){let e=C();t(0,"div",16)(1,"button",29),b("click",function(){f(e);let i=p(2);return x(i.goToPage(i.currentPage()-1))}),h(),t(2,"svg",3),_(3,"path",30),a()(),U(4,ne,2,1,null,null,B),k(),t(6,"button",29),b("click",function(){f(e);let i=p(2);return x(i.goToPage(i.currentPage()+1))}),h(),t(7,"svg",3),_(8,"path",31),a()()()}if(n&2){let e=p(2);o(),y("disabled",e.currentPage()===0),o(3),T(e.getPageNumbers()),o(2),y("disabled",e.currentPage()===e.totalPages()-1)}}function re(n,u){if(n&1&&(t(0,"div",15)(1,"table")(2,"thead")(3,"tr")(4,"th"),l(5),c(6,"translate"),a(),t(7,"th"),l(8),c(9,"translate"),a(),t(10,"th"),l(11),c(12,"translate"),a(),t(13,"th"),l(14),c(15,"translate"),a(),t(16,"th"),l(17),c(18,"translate"),a()()(),t(19,"tbody"),U(20,Z,24,17,"tr",null,q),a()()(),P(22,ie,9,2,"div",16)),n&2){let e=p();o(5),m(d(6,6,"users.table.name")),o(3),m(d(9,8,"users.table.email")),o(3),m(d(12,10,"users.table.status")),o(3),m(d(15,12,"users.table.joined")),o(3),m(d(18,14,"users.table.actions")),o(3),T(e.users()),o(2),M(22,e.totalPages()>1?22:-1)}}var _e=(()=>{class n{constructor(){this.http=S(D),this.apiUrl=`${W.apiUrl}/users`,this.t=S(A),this.users=v([]),this.loading=v(!0),this.currentPage=v(0),this.totalPages=v(0),this.totalElements=v(0),this.searchQuery=""}ngOnInit(){this.loadUsers()}loadUsers(){this.loading.set(!0);let e={page:this.currentPage(),size:20};this.searchQuery&&(e.search=this.searchQuery),this.http.get(this.apiUrl,{params:e}).subscribe({next:r=>{this.users.set(r.content),this.totalPages.set(r.totalPages),this.totalElements.set(r.totalElements),this.currentPage.set(r.number),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}onSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.currentPage.set(0),this.loadUsers()},500)}clearSearch(){this.searchQuery="",this.currentPage.set(0),this.loadUsers()}goToPage(e){this.currentPage.set(e),this.loadUsers(),window.scrollTo({top:0,behavior:"smooth"})}getPageNumbers(){let e=this.totalPages(),r=this.currentPage(),i=[];if(e<=7)for(let s=0;s<e;s++)i.push(s);else if(r<4){for(let s=0;s<5;s++)i.push(s);i.push(-1,e-1)}else if(r>e-5){i.push(0,-1);for(let s=e-5;s<e;s++)i.push(s)}else{i.push(0,-1);for(let s=r-1;s<=r+1;s++)i.push(s);i.push(-1,e-1)}return i}activateUser(e){confirm(this.t.translate("users.confirmActivatePrefix")+` "${e.name}"?`)&&this.http.put(`${this.apiUrl}/${e.id}/activate`,{}).subscribe({next:()=>this.loadUsers()})}deactivateUser(e){confirm(this.t.translate("users.confirmDeactivatePrefix")+` "${e.name}"?`)&&this.http.put(`${this.apiUrl}/${e.id}/deactivate`,{}).subscribe({next:()=>this.loadUsers()})}deleteUser(e){confirm(this.t.translate("users.confirmDeletePrefix")+` "${e.name}"? `+this.t.translate("common.cannotUndo"))&&this.http.delete(`${this.apiUrl}/${e.id}`).subscribe({next:()=>this.loadUsers()})}getInitials(e){return e?e.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2):"?"}formatDate(e){let r=new Date(e),s=new Date().getTime()-r.getTime(),g=Math.floor(s/(1e3*60*60*24));return g===0?this.t.translate("users.date.today"):g===1?this.t.translate("users.date.yesterday"):g<7?`${g}`+this.t.translate("users.date.daysAgoSuffix"):g<30?`${Math.floor(g/7)}`+this.t.translate("users.date.weeksAgoSuffix"):r.toLocaleDateString()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-users"]],standalone:!0,features:[F],decls:18,vars:12,consts:[[1,"users-page"],[1,"page-header"],[1,"search-bar"],["width","20","height","20","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text",1,"search-input",3,"ngModelChange","input","placeholder","ngModel"],[1,"clear-btn"],[1,"loading-state"],[1,"clear-btn",3,"click"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"spinner"],[1,"empty-state"],["width","64","height","64","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"users-table"],[1,"pagination"],[1,"user-info"],[1,"user-avatar"],[1,"user-name"],[1,"status-badge"],[1,"action-buttons"],[1,"btn-action","btn-warning"],[1,"btn-action","btn-danger",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"btn-action","btn-warning",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],[1,"btn-action","btn-success",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"page-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"page-ellipsis"],[1,"page-btn",3,"click"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4),c(5,"translate"),a(),t(6,"p"),l(7),c(8,"translate"),a()()(),t(9,"div",2),h(),t(10,"svg",3),_(11,"path",4),a(),k(),t(12,"input",5),c(13,"translate"),j("ngModelChange",function(g){return $(i.searchQuery,g)||(i.searchQuery=g),g}),b("input",function(){return i.onSearch()}),a(),P(14,J,3,0,"button",6),a(),P(15,K,5,3,"div",7)(16,R,9,6)(17,re,23,16),a()),r&2&&(o(4),m(d(5,6,"users.title")),o(3),m(d(8,8,"users.subtitle")),o(5),y("placeholder",d(13,10,"users.searchPlaceholder")),I("ngModel",i.searchQuery),o(2),M(14,i.searchQuery?14:-1),o(),M(15,i.loading()?15:i.users().length===0?16:17))},dependencies:[z,N,L,Q,H,G],styles:[".users-page[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-bar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:2rem;transition:var(--transition)}.search-bar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #2a7ae41a}.search-bar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-secondary);flex-shrink:0}.search-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;color:var(--text);font-size:1rem;outline:none}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.clear-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;background:transparent;border:none;color:var(--text-secondary);cursor:pointer;border-radius:50%;transition:var(--transition)}.clear-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--text)}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:1.5rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.users-table[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background:var(--background);border-bottom:1px solid var(--border)}th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-secondary)}td[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid var(--border)}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem}.user-name[_ngcontent-%COMP%]{font-weight:500}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e}.status-badge.inactive[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-action[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:1px solid var(--border);border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition)}.btn-success[_ngcontent-%COMP%]{color:#22c55e;border-color:#22c55e}.btn-success[_ngcontent-%COMP%]:hover{background:#22c55e1a}.btn-warning[_ngcontent-%COMP%]{color:#f59e0b;border-color:#f59e0b}.btn-warning[_ngcontent-%COMP%]:hover{background:#f59e0b1a}.btn-danger[_ngcontent-%COMP%]{color:#ef4444;border-color:#ef4444}.btn-danger[_ngcontent-%COMP%]:hover{background:#ef44441a}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.5rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border)}.page-btn[_ngcontent-%COMP%]{min-width:40px;height:40px;display:flex;align-items:center;justify-content:center;padding:0 .75rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);color:var(--text);font-size:.875rem;font-weight:500;cursor:pointer;transition:var(--transition)}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled):not(.active){background:var(--surface-hover);border-color:var(--primary);color:var(--primary)}.page-btn.active[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary);color:#fff}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-ellipsis[_ngcontent-%COMP%]{padding:0 .5rem;color:var(--text-secondary)}@media (max-width: 768px){.users-page[_ngcontent-%COMP%]{padding:1rem}.users-table[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{min-width:600px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem .5rem}}"]})}}return n})();export{_e as UsersComponent};
