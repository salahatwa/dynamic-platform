import{g as a}from"./chunk-5CKBWUIT.js";import{b as c}from"./chunk-QRIHUA6I.js";import{N as s,Q as n,W as o,k as i}from"./chunk-KOA5EEQG.js";var b=(()=>{class e{constructor(){this.http=o(c),this.router=o(a),this.baseUrl="http://localhost:8080",this.apiUrl=`${this.baseUrl}/api/auth`,this.currentUserSubject=new i(null),this.currentUser$=this.currentUserSubject.asObservable();let t=this.getToken();t&&this.currentUserSubject.next({token:t})}login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe(s(r=>{localStorage.setItem("token",r.token),this.currentUserSubject.next({token:r.token})}))}register(t){return this.http.post(`${this.apiUrl}/register`,t)}logout(){localStorage.removeItem("token"),this.currentUserSubject.next(null),localStorage.removeItem("selectedAppId"),this.router.navigate(["/"])}getToken(){return localStorage.getItem("token")}isAuthenticated(){return!!this.getToken()}refreshUserData(){let t=this.getToken();t&&this.currentUserSubject.next({token:t})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{b as a};
