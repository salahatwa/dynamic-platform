import{a as J}from"./chunk-WX3KPEVL.js";import{a as ne}from"./chunk-YRPVFBOT.js";import{b as K,d as Z,g as ee,r as te}from"./chunk-BC33UU65.js";import{b as ie}from"./chunk-PEIDCZCY.js";import{a as Y,b as q}from"./chunk-4CTQDGJF.js";import{a as F}from"./chunk-NAK5AQJJ.js";import{g as X}from"./chunk-5CKBWUIT.js";import{b as R}from"./chunk-QRIHUA6I.js";import{Fb as j,Gb as G,Hb as z,Jb as U,Ka as r,Kb as N,Lb as c,Mb as m,Sa as T,W as E,Xb as Q,Ya as k,Z as A,_a as D,a as y,ab as I,b as M,bb as H,cb as x,eb as L,fb as P,ga as f,gb as S,ha as h,hb as t,ia as v,ib as o,ic as W,ja as C,jb as _,kb as w,lb as u,mb as d,pb as O,wb as s,xb as g,yb as V,zb as B}from"./chunk-KOA5EEQG.js";var oe=(n,p)=>p.value,$=(n,p)=>p.id,re=()=>[1,2,3,4,5,6];function le(n,p){if(n&1){let e=w();t(0,"button",20),u("click",function(){f(e);let i=d();return h(i.clearSearch())}),v(),t(1,"svg",15),_(2,"path",21),o()()}}function se(n,p){n&1&&(v(),t(0,"svg",25),_(1,"path",26),o())}function pe(n,p){if(n&1){let e=w();t(0,"button",23),u("click",function(){let i=f(e).$implicit,l=d(2);return h(l.selectTypeFromDropdown(i.value))}),t(1,"span",24),s(2),o(),t(3,"span"),s(4),c(5,"translate"),o(),k(6,se,2,0,":svg:svg",25),o()}if(n&2){let e=p.$implicit,a=d(2);I("active",a.selectedType()===e.value),r(2),g(e.icon),r(2),g(m(5,5,"templates.type."+e.value)),r(2),x(6,a.selectedType()===e.value?6:-1)}}function de(n,p){if(n&1&&(t(0,"div",17),P(1,pe,7,7,"button",22,oe),o()),n&2){let e=d();r(),S(e.templateTypes)}}function ce(n,p){n&1&&(t(0,"div",18),_(1,"div",27),t(2,"p"),s(3),c(4,"translate"),o()()),n&2&&(r(3),g(m(4,1,"templates.loading")))}function me(n,p){n&1&&(t(0,"div",29),_(1,"div",30),t(2,"div",31),_(3,"div",32)(4,"div",33)(5,"div",34),o(),t(6,"div",35),_(7,"div",36)(8,"div",36)(9,"div",36),o()())}function ge(n,p){n&1&&(t(0,"div",28),P(1,me,10,0,"div",29,L),o()),n&2&&(r(),S(N(0,re)))}function _e(n,p){if(n&1){let e=w();t(0,"div",37),v(),t(1,"svg",38),_(2,"path",39),o(),C(),t(3,"h2"),s(4),c(5,"translate"),o(),t(6,"p"),s(7),c(8,"translate"),o(),t(9,"app-button",2),u("click",function(){f(e);let i=d();return h(i.createNew())}),s(10),c(11,"translate"),o()()}n&2&&(r(4),g(m(5,3,"templates.emptyTitle")),r(3),g(m(8,5,"templates.emptyDesc")),r(3),g(m(11,7,"templates.createTemplate")))}function ue(n,p){if(n&1){let e=w();t(0,"app-card")(1,"div",41)(2,"div",42)(3,"h3"),s(4),o(),t(5,"div",43)(6,"span",44),s(7),o(),t(8,"button",45),c(9,"translate"),u("click",function(){let i=f(e).$implicit,l=d(2);return h(l.openVersionsDialog(i))}),v(),t(10,"svg",46),_(11,"path",47),o(),C(),t(12,"span"),s(13),c(14,"translate"),o()()(),t(15,"p",48),s(16),c(17,"translate"),o()(),t(18,"div",49)(19,"button",50),c(20,"translate"),u("click",function(){let i=f(e).$implicit,l=d(2);return h(l.openAuditDialog(i))}),v(),t(21,"svg",51),_(22,"path",39),o()(),C(),t(23,"button",52),c(24,"translate"),u("click",function(){let i=f(e).$implicit,l=d(2);return h(l.editTemplate(i.id))}),v(),t(25,"svg",51),_(26,"path",53),o()(),C(),t(27,"button",52),c(28,"translate"),u("click",function(){let i=f(e).$implicit,l=d(2);return h(l.openDuplicateDialog(i))}),v(),t(29,"svg",51),_(30,"path",54),o()(),C(),t(31,"button",55),c(32,"translate"),u("click",function(){let i=f(e).$implicit,l=d(2);return h(l.openDeleteDialog(i))}),v(),t(33,"svg",51),_(34,"path",56),o()()()()()}if(n&2){let e=p.$implicit,a=d(2);r(4),g(e.name),r(3),g(e.type),r(),O("title",m(9,11,"templates.viewVersions")),r(5),B("",a.getVersionCount(e.id)," ",m(14,13,"templates.versionsWord"),""),r(3),B("",m(17,15,"templates.updatedPrefix")," ",a.formatDate(e.updatedAt),""),r(3),O("title",m(20,17,"templates.auditHistory")),r(4),O("title",m(24,19,"common.edit")),r(4),O("title",m(28,21,"common.duplicate")),r(4),O("title",m(32,23,"common.delete"))}}function ve(n,p){if(n&1){let e=w();t(0,"button",61),u("click",function(){let i=f(e).$implicit,l=d(3);return h(l.goToPage(i))}),s(1),o()}if(n&2){let e=p.$implicit,a=d(3);I("active",e===a.currentPage()),r(),V(" ",e+1," ")}}function fe(n,p){if(n&1){let e=w();t(0,"div",40)(1,"button",57),u("click",function(){f(e);let i=d(2);return h(i.goToPage(i.currentPage()-1))}),v(),t(2,"svg",3),_(3,"path",58),o()(),P(4,ve,2,3,"button",59,L),C(),t(6,"button",57),u("click",function(){f(e);let i=d(2);return h(i.goToPage(i.currentPage()+1))}),v(),t(7,"svg",3),_(8,"path",60),o()()()}if(n&2){let e=d(2);r(),D("disabled",e.currentPage()===0),r(3),S(e.getPageNumbers()),r(2),D("disabled",e.currentPage()===e.totalPages()-1)}}function he(n,p){if(n&1&&(t(0,"div",28),P(1,ue,35,25,"app-card",null,$),o(),k(3,fe,9,2,"div",40)),n&2){let e=d();r(),S(e.templates()),r(2),x(3,e.totalPages()>1?3:-1)}}function Ce(n,p){if(n&1&&(t(0,"div",67),v(),t(1,"svg",68),_(2,"path",56),o()(),C(),t(3,"h2"),s(4),c(5,"translate"),o(),t(6,"p"),s(7),c(8,"translate"),t(9,"strong"),s(10),o(),s(11),c(12,"translate"),o()),n&2){let e,a=d(2);r(4),g(m(5,4,"templates.dialog.deleteTitle")),r(3),V("",m(8,6,"templates.dialog.deleteConfirmPrefix")," "),r(3),g((e=a.dialog().template)==null?null:e.name),r(),V("? ",m(12,8,"templates.dialog.cannotUndo"),"")}}function xe(n,p){if(n&1&&(t(0,"div",69),v(),t(1,"svg",68),_(2,"path",54),o()(),C(),t(3,"h2"),s(4),c(5,"translate"),o(),t(6,"p"),s(7),c(8,"translate"),t(9,"strong"),s(10),o(),s(11,"?"),o()),n&2){let e,a=d(2);r(4),g(m(5,3,"templates.dialog.duplicateTitle")),r(3),V("",m(8,5,"templates.dialog.duplicateConfirmPrefix")," "),r(3),g((e=a.dialog().template)==null?null:e.name)}}function be(n,p){n&1&&(_(0,"div",70),t(1,"span"),s(2),c(3,"translate"),o()),n&2&&(r(2),g(m(3,1,"common.processing")))}function Te(n,p){if(n&1&&(t(0,"span"),s(1),c(2,"translate"),c(3,"translate"),o()),n&2){let e=d(2);r(),g(e.dialog().type==="delete"?m(2,1,"common.delete"):m(3,3,"common.duplicate"))}}function ke(n,p){if(n&1){let e=w();t(0,"div",62),u("click",function(){f(e);let i=d();return h(i.closeDialog())}),t(1,"div",63),u("click",function(i){return f(e),h(i.stopPropagation())}),k(2,Ce,13,10)(3,xe,12,7),t(4,"div",64)(5,"button",65),u("click",function(){f(e);let i=d();return h(i.closeDialog())}),s(6),c(7,"translate"),o(),t(8,"button",66),u("click",function(){f(e);let i=d();return h(i.confirmDialog())}),k(9,be,4,3)(10,Te,4,5),o()()()()}if(n&2){let e=d();r(2),x(2,e.dialog().type==="delete"?2:e.dialog().type==="duplicate"?3:-1),r(3),D("disabled",e.dialog().loading),r(),V(" ",m(7,9,"common.cancel")," "),r(2),I("btn-danger",e.dialog().type==="delete")("btn-primary",e.dialog().type==="duplicate"),D("disabled",e.dialog().loading),r(),x(9,e.dialog().loading?9:10)}}function we(n,p){n&1&&(t(0,"div",18),_(1,"div",27),t(2,"p"),s(3),c(4,"translate"),o()()),n&2&&(r(3),g(m(4,1,"templates.versionLoading")))}function ye(n,p){n&1&&(t(0,"div",76)(1,"p"),s(2),c(3,"translate"),o()()),n&2&&(r(2),g(m(3,1,"templates.versionEmpty")))}function Me(n,p){if(n&1&&(t(0,"div",78)(1,"div",79)(2,"span",80),s(3),c(4,"translate"),o(),t(5,"span",81),s(6),o()(),t(7,"p",82),s(8),c(9,"translate"),o()()),n&2){let e=p.$implicit,a=d(3);r(3),B("",m(4,4,"templates.versionWord")," ",e.version,""),r(3),g(a.formatTimestamp(e.createdAt)),r(2),g(e.changeLog||m(9,6,"templates.noChangeLog"))}}function Pe(n,p){if(n&1&&(t(0,"div",77),P(1,Me,10,8,"div",78,$),o()),n&2){let e=d(2);r(),S(e.versionsDialog().versions)}}function Se(n,p){if(n&1){let e=w();t(0,"div",62),u("click",function(){f(e);let i=d();return h(i.closeVersionsDialog())}),t(1,"div",71),u("click",function(i){return f(e),h(i.stopPropagation())}),t(2,"div",72)(3,"h2"),s(4),c(5,"translate"),o(),t(6,"button",73),u("click",function(){f(e);let i=d();return h(i.closeVersionsDialog())}),v(),t(7,"svg",74),_(8,"path",21),o()()(),C(),t(9,"div",75)(10,"h3"),s(11),o(),k(12,we,5,3,"div",18)(13,ye,4,3)(14,Pe,3,0),o()()()}if(n&2){let e,a=d();r(4),g(m(5,3,"templates.versionHistory")),r(7),g((e=a.versionsDialog().template)==null?null:e.name),r(),x(12,a.versionsDialog().loading?12:a.versionsDialog().versions.length===0?13:14)}}function Oe(n,p){n&1&&(t(0,"div",18),_(1,"div",27),t(2,"p"),s(3),c(4,"translate"),o()()),n&2&&(r(3),g(m(4,1,"templates.auditLoading")))}function Ve(n,p){n&1&&(t(0,"div",76)(1,"p"),s(2),c(3,"translate"),o()()),n&2&&(r(2),g(m(3,1,"templates.auditEmpty")))}function Ee(n,p){n&1&&(v(),_(0,"path",4))}function De(n,p){n&1&&(v(),_(0,"path",53))}function Ie(n,p){n&1&&(v(),_(0,"path",56))}function Be(n,p){n&1&&(v(),_(0,"path",39))}function Le(n,p){if(n&1&&(t(0,"div",84)(1,"div",85),v(),t(2,"svg",3),k(3,Ee,1,0,":svg:path",4)(4,De,1,0)(5,Ie,1,0)(6,Be,1,0),o()(),C(),t(7,"div",86)(8,"div",87)(9,"span",88),s(10),o(),t(11,"span",89),s(12),o()(),t(13,"p",90),s(14),o(),t(15,"div",91)(16,"span",92),s(17),o(),t(18,"span",93),s(19),o()()()()),n&2){let e=p.$implicit,a=d(3);r(),H(e.action.toLowerCase()),r(2),x(3,e.action==="CREATE"?3:e.action==="UPDATE"?4:e.action==="DELETE"?5:6),r(7),g(e.action),r(2),g(a.formatTimestamp(e.timestamp)),r(2),g(e.details),r(3),g(e.userName),r(2),g(e.ipAddress)}}function Fe(n,p){if(n&1&&(t(0,"div",83),P(1,Le,20,8,"div",84,$),o()),n&2){let e=d(2);r(),S(e.auditDialog().logs)}}function $e(n,p){if(n&1){let e=w();t(0,"div",62),u("click",function(){f(e);let i=d();return h(i.closeAuditDialog())}),t(1,"div",71),u("click",function(i){return f(e),h(i.stopPropagation())}),t(2,"div",72)(3,"h2"),s(4),c(5,"translate"),o(),t(6,"button",73),u("click",function(){f(e);let i=d();return h(i.closeAuditDialog())}),v(),t(7,"svg",74),_(8,"path",21),o()()(),C(),t(9,"div",75)(10,"h3"),s(11),o(),k(12,Oe,5,3,"div",18)(13,Ve,4,3)(14,Fe,3,0),o()()()}if(n&2){let e,a=d();r(4),g(m(5,3,"templates.auditHistory")),r(7),g((e=a.auditDialog().template)==null?null:e.name),r(),x(12,a.auditDialog().loading?12:a.auditDialog().logs.length===0?13:14)}}var Ke=(()=>{class n{constructor(){this.http=E(R),this.router=E(X),this.appContext=E(ie),this.apiUrl=`${F.apiUrl}/template-editor`,this.dashboardApiUrl=`${F.apiUrl}/dashboard`,this.selectedApp=this.appContext.selectedApp,this.templates=T([]),this.loading=T(!0),this.skeletonLoading=T(!1),this.currentPage=T(0),this.totalPages=T(0),this.totalElements=T(0),this.searchQuery="",this.selectedType=T("ALL"),this.dialog=T({show:!1,type:null,template:null,loading:!1}),this.versionsDialog=T({show:!1,template:null,versions:[],loading:!1}),this.auditDialog=T({show:!1,template:null,logs:[],loading:!1}),this.versionCounts=T(new Map),this.templateTypes=[{value:"ALL",label:"All",icon:"\u{1F4C4}",color:"#6366f1"},{value:"HTML",label:"HTML",icon:"\u2709\uFE0F",color:"#3b82f6"},{value:"TXT",label:"TXT",icon:"\u{1F4CA}",color:"#8b5cf6"}],this.showFiltersDropdown=T(!1),this.i18n=E(Y)}ngOnInit(){this.loadTemplates(),Q(()=>{let e=this.selectedApp();console.log("Templates - App changed:",e),e&&(this.currentPage.set(0),this.loadTemplates(!0))})}loadTemplates(e=!1){e?this.skeletonLoading.set(!0):this.loading.set(!0);let a={page:this.currentPage(),size:12};this.searchQuery&&(a.search=this.searchQuery);let i=this.selectedApp();i&&(a.appName=i.name),this.http.get(this.apiUrl,{params:a}).subscribe({next:l=>{let b=l.content;this.selectedType()!=="ALL"&&(b=l.content.filter(ae=>ae.type===this.selectedType())),this.templates.set(b),this.totalPages.set(l.totalPages),this.totalElements.set(l.totalElements),this.currentPage.set(l.number),this.loading.set(!1),this.skeletonLoading.set(!1),this.loadVersionCounts()},error:()=>{this.loading.set(!1),this.skeletonLoading.set(!1)}})}filterByType(e){this.selectedType.set(e),this.currentPage.set(0),this.loadTemplates(!0)}selectTypeFromDropdown(e){this.filterByType(e),this.showFiltersDropdown.set(!1)}getSelectedTypeLabel(){let e=this.templateTypes.find(i=>i.value===this.selectedType()),a="templates.type."+(e?e.value:"ALL");return this.i18n.t(a)}onSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.currentPage.set(0),this.loadTemplates()},500)}clearSearch(){this.searchQuery="",this.currentPage.set(0),this.loadTemplates(!0)}goToPage(e){this.currentPage.set(e),this.loadTemplates(!0),window.scrollTo({top:0,behavior:"smooth"})}openDeleteDialog(e){this.dialog.set({show:!0,type:"delete",template:e,loading:!1})}openDuplicateDialog(e){this.dialog.set({show:!0,type:"duplicate",template:e,loading:!1})}closeDialog(){this.dialog.set({show:!1,type:null,template:null,loading:!1})}confirmDialog(){let e=this.dialog();e.template&&(this.dialog.update(a=>M(y({},a),{loading:!0})),e.type==="delete"?this.performDelete(e.template.id):e.type==="duplicate"&&this.performDuplicate(e.template.id))}performDelete(e){this.http.delete(`${this.apiUrl}/${e}`).subscribe({next:()=>{this.closeDialog(),this.loadTemplates(!0)},error:()=>{this.dialog.update(a=>M(y({},a),{loading:!1}))}})}performDuplicate(e){this.http.get(`${this.apiUrl}/${e}`).subscribe({next:a=>{let i={name:a.name+" (Copy)",type:a.type,htmlContent:a.htmlContent,cssStyles:a.cssStyles};this.http.post(this.apiUrl,i).subscribe({next:()=>{this.closeDialog(),this.loadTemplates(!0)},error:()=>{this.dialog.update(l=>M(y({},l),{loading:!1}))}})},error:()=>{this.dialog.update(a=>M(y({},a),{loading:!1}))}})}getPageNumbers(){let e=this.totalPages(),a=this.currentPage(),i=[];if(e<=7)for(let l=0;l<e;l++)i.push(l);else if(a<4){for(let l=0;l<5;l++)i.push(l);i.push(-1,e-1)}else if(a>e-5){i.push(0,-1);for(let l=e-5;l<e;l++)i.push(l)}else{i.push(0,-1);for(let l=a-1;l<=a+1;l++)i.push(l);i.push(-1,e-1)}return i}createNew(){this.router.navigate(["/admin/template-editor"])}editTemplate(e){this.router.navigate(["/admin/template-editor",e])}getPreview(e){return`<style>${e.cssStyles}</style>${e.htmlContent}`}formatDate(e){let a=new Date(e),l=new Date().getTime()-a.getTime(),b=Math.floor(l/(1e3*60*60*24));return b===0?"today":b===1?"yesterday":b<7?`${b} days ago`:b<30?`${Math.floor(b/7)} weeks ago`:a.toLocaleDateString()}loadVersionCounts(){this.templates().forEach(e=>{this.http.get(`${this.apiUrl}/${e.id}/versions`).subscribe({next:a=>{let i=this.versionCounts();i.set(e.id,a.length),this.versionCounts.set(new Map(i))}})})}getVersionCount(e){return this.versionCounts().get(e)||0}openVersionsDialog(e){this.versionsDialog.set({show:!0,template:e,versions:[],loading:!0}),this.http.get(`${this.apiUrl}/${e.id}/versions`).subscribe({next:a=>{this.versionsDialog.update(i=>M(y({},i),{versions:a,loading:!1}))},error:()=>{this.versionsDialog.update(a=>M(y({},a),{loading:!1}))}})}closeVersionsDialog(){this.versionsDialog.set({show:!1,template:null,versions:[],loading:!1})}openAuditDialog(e){this.auditDialog.set({show:!0,template:e,logs:[],loading:!0}),this.http.get(`${this.dashboardApiUrl}/audit-logs/entity/TEMPLATE/${e.id}`).subscribe({next:a=>{this.auditDialog.update(i=>M(y({},i),{logs:a.content,loading:!1}))},error:()=>{this.auditDialog.update(a=>M(y({},a),{loading:!1}))}})}closeAuditDialog(){this.auditDialog.set({show:!1,template:null,logs:[],loading:!1})}formatTimestamp(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-templates"]],standalone:!0,features:[U],decls:39,vars:22,consts:[[1,"templates-page"],[1,"page-header"],["variant","primary",3,"click"],["width","20","height","20","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"filters-container"],[1,"filters-row"],[1,"search-wrapper"],[1,"search-bar"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text",1,"search-input",3,"ngModelChange","input","placeholder","ngModel"],[1,"clear-btn"],[1,"filter-dropdown-wrapper"],[1,"filter-dropdown-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"filter-dropdown-menu"],[1,"loading-state"],[1,"dialog-overlay"],[1,"clear-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"filter-dropdown-item",3,"active"],[1,"filter-dropdown-item",3,"click"],[1,"filter-icon"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"check-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"spinner"],[1,"templates-grid"],[1,"skeleton-card"],[1,"skeleton-preview"],[1,"skeleton-info"],[1,"skeleton-title"],[1,"skeleton-type"],[1,"skeleton-date"],[1,"skeleton-actions"],[1,"skeleton-btn"],[1,"empty-state"],["width","64","height","64","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"pagination"],[1,"template-card"],[1,"template-info"],[1,"template-meta"],[1,"template-type"],[1,"version-badge",3,"click","title"],["width","14","height","14","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"template-date"],[1,"template-actions"],[1,"btn-icon","btn-secondary",3,"click","title"],["width","18","height","18","fill","none","stroke","currentColor","viewBox","0 0 24 24"],[1,"btn-icon",3,"click","title"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"btn-icon","btn-danger",3,"click","title"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"page-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"page-btn",3,"active"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"page-btn",3,"click"],[1,"dialog-overlay",3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-actions"],[1,"dialog-btn","btn-secondary",3,"click","disabled"],[1,"dialog-btn",3,"click","disabled"],[1,"dialog-icon","delete-icon"],["width","48","height","48","fill","none","stroke","currentColor","viewBox","0 0 24 24"],[1,"dialog-icon","duplicate-icon"],[1,"btn-spinner"],[1,"dialog-content","dialog-large",3,"click"],[1,"dialog-header"],[1,"dialog-close",3,"click"],["width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24"],[1,"dialog-body"],[1,"empty-state-small"],[1,"versions-list"],[1,"version-item"],[1,"version-header"],[1,"version-number"],[1,"version-date"],[1,"version-changelog"],[1,"audit-list"],[1,"audit-item"],[1,"audit-icon"],[1,"audit-content"],[1,"audit-header"],[1,"audit-action"],[1,"audit-time"],[1,"audit-details"],[1,"audit-meta"],[1,"audit-user"],[1,"audit-ip"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),s(4),c(5,"translate"),o(),t(6,"p"),s(7),c(8,"translate"),o()(),t(9,"app-button",2),u("click",function(){return i.createNew()}),v(),t(10,"svg",3),_(11,"path",4),o(),s(12),c(13,"translate"),o()(),C(),t(14,"div",5)(15,"div",6)(16,"div",7)(17,"div",8),v(),t(18,"svg",3),_(19,"path",9),o(),C(),t(20,"input",10),c(21,"translate"),z("ngModelChange",function(b){return G(i.searchQuery,b)||(i.searchQuery=b),b}),u("input",function(){return i.onSearch()}),o(),k(22,le,3,0,"button",11),o()(),t(23,"div",12)(24,"button",13),u("click",function(){return i.showFiltersDropdown.set(!i.showFiltersDropdown())}),v(),t(25,"svg",3),_(26,"path",14),o(),C(),t(27,"span"),s(28),o(),v(),t(29,"svg",15),_(30,"path",16),o()(),k(31,de,3,0,"div",17),o()()(),k(32,ce,5,3,"div",18)(33,ge,3,1)(34,_e,12,9)(35,he,4,1)(36,ke,11,11,"div",19)(37,Se,15,5,"div",19)(38,$e,15,5,"div",19),o()),a&2&&(r(4),g(m(5,14,"templates.title")),r(3),g(m(8,16,"templates.subtitle")),r(5),V(" ",m(13,18,"templates.newTemplate")," "),r(8),O("placeholder",m(21,20,"templates.searchPlaceholder")),j("ngModel",i.searchQuery),r(2),x(22,i.searchQuery?22:-1),r(6),g(i.getSelectedTypeLabel()),r(),I("rotate",i.showFiltersDropdown()),r(2),x(31,i.showFiltersDropdown()?31:-1),r(),x(32,i.loading()?32:i.skeletonLoading()?33:i.templates().length===0?34:35),r(4),x(36,i.dialog().show?36:-1),r(),x(37,i.versionsDialog().show?37:-1),r(),x(38,i.auditDialog().show?38:-1))},dependencies:[W,te,K,Z,ee,J,ne,q],styles:[".templates-page[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0 0 .5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.filters-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.filters-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;justify-content:space-between}.search-wrapper[_ngcontent-%COMP%]{flex:1}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:var(--background);border:1px solid var(--border);border-radius:var(--radius)}.search-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;color:var(--text);font-size:.95rem}.search-input[_ngcontent-%COMP%]:focus{outline:none}.clear-btn[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:var(--radius-sm);transition:var(--transition)}.clear-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover);color:var(--danger)}.filter-dropdown-wrapper[_ngcontent-%COMP%]{position:relative}.filter-dropdown-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);color:var(--text);cursor:pointer;transition:var(--transition)}.filter-dropdown-btn[_ngcontent-%COMP%]:hover{background:var(--surface-hover)}.filter-dropdown-btn[_ngcontent-%COMP%]   .rotate[_ngcontent-%COMP%]{transform:rotate(180deg);transition:transform .2s ease}.filter-dropdown-menu[_ngcontent-%COMP%]{position:absolute;right:0;margin-top:.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);box-shadow:0 10px 30px #0003;min-width:240px;z-index:10;padding:.25rem}.filter-dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border-radius:var(--radius-sm);background:transparent;border:none;color:var(--text);cursor:pointer}.filter-dropdown-item[_ngcontent-%COMP%]:hover{background:var(--surface-hover)}.filter-dropdown-item.active[_ngcontent-%COMP%]{background:#6366f11f}.filter-icon[_ngcontent-%COMP%]{width:20px;text-align:center}.check-icon[_ngcontent-%COMP%]{margin-left:auto;color:var(--primary)}.type-filters-scroll[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.type-filters[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0}.filter-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border:1px solid var(--border);border-radius:999px;background:var(--surface);cursor:pointer;transition:var(--transition)}.filter-chip[_ngcontent-%COMP%]:hover{background:var(--surface-hover)}.filter-chip.active[_ngcontent-%COMP%]{background:color-mix(in oklab,var(--chip-color, var(--primary)) 12%,transparent);border-color:var(--chip-color, var(--primary))}.filter-label[_ngcontent-%COMP%]{font-size:.85rem}.check-mark[_ngcontent-%COMP%]{color:var(--chip-color, var(--primary))}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.5;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:1rem}.templates-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));gap:1.25rem}.skeleton-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:1rem;padding:1rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)}.skeleton-preview[_ngcontent-%COMP%]{height:180px;background:var(--background);border:1px dashed var(--border);border-radius:var(--radius)}.skeleton-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.skeleton-title[_ngcontent-%COMP%], .skeleton-type[_ngcontent-%COMP%], .skeleton-date[_ngcontent-%COMP%]{height:14px;background:var(--surface-hover);border-radius:var(--radius-sm)}.skeleton-title[_ngcontent-%COMP%]{width:70%}.skeleton-type[_ngcontent-%COMP%]{width:40%}.skeleton-date[_ngcontent-%COMP%]{width:50%}.skeleton-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.skeleton-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--surface-hover);border-radius:var(--radius-sm)}.template-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:1rem}.template-preview[_ngcontent-%COMP%]{padding:.75rem;background:var(--background);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}.preview-content[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius-sm);min-height:160px}.template-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.125rem;font-weight:600}.template-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.template-type[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:var(--radius-full);background:var(--surface);border:1px solid var(--border);font-size:.75rem;color:var(--text-secondary)}.version-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border-radius:var(--radius-full);background:#6366f11a;color:var(--primary);border:1px solid rgba(99,102,241,.2);font-size:.75rem;cursor:pointer}.template-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}.template-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:start}.btn-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);color:var(--text);cursor:pointer;transition:var(--transition)}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--surface-hover)}.btn-secondary[_ngcontent-%COMP%]{color:var(--primary);border-color:var(--primary)}.btn-danger[_ngcontent-%COMP%]{color:#ef4444;border-color:#ef4444}.pagination[_ngcontent-%COMP%]{margin-top:2rem;display:flex;gap:.5rem;justify-content:center}.page-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);color:var(--text);cursor:pointer}.page-btn.active[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:var(--primary)}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.dialog-content[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:2rem;max-width:500px;width:90%;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.dialog-large[_ngcontent-%COMP%]{max-width:800px}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.dialog-close[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--text-secondary);cursor:pointer}.dialog-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem}.dialog-btn[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.25rem;border:none;border-radius:var(--radius);font-size:1rem;font-weight:600;cursor:pointer;transition:var(--transition);display:flex;align-items:center;justify-content:center;gap:.5rem}.dialog-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:var(--surface)}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}.versions-list[_ngcontent-%COMP%], .audit-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.version-item[_ngcontent-%COMP%], .audit-item[_ngcontent-%COMP%]{padding:.75rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)}.version-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.version-number[_ngcontent-%COMP%]{font-weight:600}.version-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}.version-changelog[_ngcontent-%COMP%]{color:var(--text-secondary)}.audit-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:32px 1fr;gap:.75rem}.audit-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;width:32px;height:32px;background:var(--surface-hover)}.audit-icon.create[_ngcontent-%COMP%]{color:#22c55e}.audit-icon.update[_ngcontent-%COMP%]{color:var(--primary)}.audit-icon.delete[_ngcontent-%COMP%]{color:#ef4444}@media (max-width: 768px){.templates-page[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.type-filters[_ngcontent-%COMP%]{flex-wrap:wrap}.templates-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.dialog-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return n})();export{Ke as TemplatesComponent};
