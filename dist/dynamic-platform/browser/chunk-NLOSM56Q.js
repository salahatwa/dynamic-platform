import{e as F,f as V,h as j,r as G}from"./chunk-BC33UU65.js";import{a as N}from"./chunk-FKYQF6O6.js";import{a as H,b as q}from"./chunk-PEIDCZCY.js";import{b as D}from"./chunk-4CTQDGJF.js";import"./chunk-NAK5AQJJ.js";import{g as L,h as U}from"./chunk-5CKBWUIT.js";import"./chunk-QRIHUA6I.js";import{Ha as A,Jb as B,Ka as a,Lb as p,Mb as l,Sa as M,W as h,Ya as P,Z as k,_a as f,a as S,b as y,cb as C,ga as w,ha as E,hb as e,ia as g,ib as t,ic as I,ja as u,jb as d,kb as T,lb as b,mb as O,wb as i,xb as _,yb as x,zb as z}from"./chunk-KOA5EEQG.js";function R(r,c){r&1&&(e(0,"div",10),g(),e(1,"svg",28),d(2,"path",29),t(),u(),e(3,"div")(4,"strong"),i(5),p(6,"translate"),t(),e(7,"p"),i(8),p(9,"translate"),t()(),e(10,"a",30),i(11),p(12,"translate"),t()()),r&2&&(a(5),_(l(6,3,"apps.limitReached")),a(3),_(l(9,5,"apps.upgradePrompt")),a(3),x(" ",l(12,7,"subscription.upgrade")," "))}function Y(r,c){if(r&1&&(e(0,"div",31),g(),e(1,"svg",28),d(2,"path",24),t(),u(),e(3,"span"),i(4),p(5,"translate"),t()()),r&2){let n=O();a(4),z("",n.appsUsed," / ",n.maxApps===-1?l(5,2,"subscription.unlimited"):n.maxApps," apps used")}}function W(r,c){if(r&1&&P(0,R,13,9,"div",10)(1,Y,6,4),r&2){let n=c;C(0,n.appsUsed>=n.maxApps&&n.maxApps!==-1?0:1)}}function X(r,c){if(r&1&&(e(0,"div",10),g(),e(1,"svg",28),d(2,"path",32),t(),u(),e(3,"span"),i(4),t()()),r&2){let n=O();a(4),_(n.error())}}function J(r,c){if(r&1){let n=T();e(0,"div",21)(1,"label",18),i(2,"Icon Preview"),t(),e(3,"div",33)(4,"img",34),b("error",function(){w(n);let o=O();return E(o.updateField("iconUrl",""))}),t()()()}if(r&2){let n=O();a(4),f("src",n.formData().iconUrl,A)}}function K(r,c){r&1&&(d(0,"div",35),e(1,"span"),i(2,"Creating..."),t())}function Q(r,c){r&1&&(g(),e(0,"svg",28),d(1,"path",36),t(),u(),e(2,"span"),i(3),p(4,"translate"),t()),r&2&&(a(3),_(l(4,1,"apps.create")))}var me=(()=>{class r{constructor(){this.appContext=h(q),this.appService=h(H),this.subscriptionService=h(N),this.router=h(L),this.formData=M({name:"",description:"",iconUrl:""}),this.loading=M(!1),this.error=M(null),this.limits=M(null)}ngOnInit(){this.loadLimits()}loadLimits(){this.subscriptionService.getLimits().subscribe({next:n=>{this.limits.set(n),n.appsUsed>=n.maxApps&&n.maxApps!==-1&&this.error.set("You have reached your app limit. Please upgrade your plan.")},error:n=>{console.error("Error loading limits:",n),this.error.set("Failed to load subscription limits")}})}updateField(n,m){this.formData.update(o=>y(S({},o),{[n]:m}))}canSubmit(){return this.formData().name.trim().length>0&&!this.loading()}onSubmit(){if(!this.canSubmit())return;let n=this.limits();if(n&&n.appsUsed>=n.maxApps&&n.maxApps!==-1){this.error.set("You have reached your app limit. Please upgrade your plan.");return}this.loading.set(!0),this.error.set(null);let m={name:this.formData().name.trim(),description:this.formData().description?.trim()||void 0,iconUrl:this.formData().iconUrl?.trim()||void 0};this.appService.createApp(m).subscribe({next:o=>{this.appContext.addApp(o),this.router.navigate(["/admin/apps"])},error:o=>{console.error("Error creating app:",o),this.error.set(o.error?.message||"Failed to create application"),this.loading.set(!1)}})}cancel(){this.router.navigate(["/admin/apps"])}static{this.\u0275fac=function(m){return new(m||r)}}static{this.\u0275cmp=k({type:r,selectors:[["app-app-create"]],standalone:!0,features:[B],decls:68,vars:30,consts:[[1,"app-create-container"],[1,"page-header"],[1,"header-breadcrumb"],["routerLink","/admin/apps",1,"breadcrumb-link"],["width","16","height","16","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"breadcrumb-separator"],[1,"breadcrumb-current"],[1,"page-title"],[1,"page-subtitle"],[1,"alert","alert-danger"],[1,"app-form",3,"ngSubmit"],[1,"form-card"],[1,"form-section-title"],[1,"form-group"],[1,"form-label","required"],["type","text","placeholder","My Mobile App","required","","maxlength","255",1,"form-input",3,"input","value"],[1,"form-help"],[1,"form-label"],["placeholder","A brief description of your application...","rows","4","maxlength","1000",1,"form-textarea",3,"input","value"],["type","url","placeholder","https://example.com/icon.png",1,"form-input",3,"input","value"],[1,"icon-preview"],[1,"info-card"],["width","24","height","24","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["width","20","height","20","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["routerLink","/pricing",1,"btn","btn-sm","btn-primary"],[1,"limit-info"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"preview-container"],["alt","App icon preview",1,"preview-image",3,"error","src"],[1,"btn-spinner"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"]],template:function(m,o){if(m&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),g(),e(4,"svg",4),d(5,"path",5),t(),i(6),p(7,"translate"),t(),u(),e(8,"span",6),i(9,"/"),t(),e(10,"span",7),i(11),p(12,"translate"),t()(),e(13,"h1",8),i(14),p(15,"translate"),t(),e(16,"p",9),i(17,"Create a new application to manage translations, templates, and more"),t()(),P(18,W,2,1)(19,X,5,1,"div",10),e(20,"form",11),b("ngSubmit",function(){return o.onSubmit()}),e(21,"div",12)(22,"h2",13),i(23,"Basic Information"),t(),e(24,"div",14)(25,"label",15),i(26),p(27,"translate"),t(),e(28,"input",16),b("input",function(v){return o.updateField("name",v.target.value)}),t(),e(29,"p",17),i(30,"Choose a descriptive name for your application"),t()(),e(31,"div",14)(32,"label",18),i(33),p(34,"translate"),t(),e(35,"textarea",19),b("input",function(v){return o.updateField("description",v.target.value)}),t(),e(36,"p",17),i(37,"Optional description to help identify this app"),t()(),e(38,"div",14)(39,"label",18),i(40),p(41,"translate"),t(),e(42,"input",20),b("input",function(v){return o.updateField("iconUrl",v.target.value)}),t(),e(43,"p",17),i(44,"Optional URL to an icon image for this app"),t()(),P(45,J,5,1,"div",21),t(),e(46,"div",22),g(),e(47,"svg",23),d(48,"path",24),t(),u(),e(49,"div")(50,"h3"),i(51,"What happens next?"),t(),e(52,"ul")(53,"li"),i(54,"A unique app key will be automatically generated"),t(),e(55,"li"),i(56,"You can start adding translations, templates, and configurations"),t(),e(57,"li"),i(58,"The app will be immediately available in the app selector"),t(),e(59,"li"),i(60,"All data will be isolated to this app"),t()()()(),e(61,"div",25)(62,"button",26),b("click",function(){return o.cancel()}),i(63),p(64,"translate"),t(),e(65,"button",27),P(66,K,3,0)(67,Q,5,3),t()()()()),m&2){let s;a(6),x(" ",l(7,16,"apps.title")," "),a(5),_(l(12,18,"apps.create")),a(3),_(l(15,20,"apps.create")),a(4),C(18,(s=o.limits())?18:-1,s),a(),C(19,o.error()?19:-1),a(7),x(" ",l(27,22,"apps.name")," "),a(2),f("value",o.formData().name),a(5),x(" ",l(34,24,"apps.description")," "),a(2),f("value",o.formData().description||""),a(5),x(" ",l(41,26,"apps.iconUrl")," "),a(2),f("value",o.formData().iconUrl||""),a(3),C(45,o.formData().iconUrl?45:-1),a(17),f("disabled",o.loading()),a(),x(" ",l(64,28,"common.cancel")," "),a(2),f("disabled",!o.canSubmit()),a(),C(66,o.loading()?66:67)}},dependencies:[I,U,G,j,F,V,D],styles:['.app-create-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.header-breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;font-size:.875rem}.breadcrumb-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;color:var(--text-secondary);text-decoration:none;transition:color .2s}.breadcrumb-link[_ngcontent-%COMP%]:hover{color:var(--primary)}.breadcrumb-separator[_ngcontent-%COMP%]{color:var(--text-tertiary)}.breadcrumb-current[_ngcontent-%COMP%]{color:var(--text);font-weight:600}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text);margin:0 0 .5rem}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.alert[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1rem 1.5rem;border-radius:12px;margin-bottom:1.5rem}.alert[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;margin-top:.125rem}.alert[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem}.alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}.alert-danger[_ngcontent-%COMP%]{background:#ef44441a;border:1px solid rgba(239,68,68,.3);color:#ef4444}.limit-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin-bottom:1.5rem;font-size:.875rem;color:var(--text-secondary)}.limit-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--primary)}.app-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-card[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:2rem}.form-section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--text);margin:0 0 1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--text);margin-bottom:.5rem}.form-label.required[_ngcontent-%COMP%]:after{content:" *";color:#ef4444}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--border);border-radius:12px;background:var(--background);color:var(--text);font-size:.875rem;font-family:inherit;transition:all .2s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #6366f11a}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-help[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.75rem;color:var(--text-secondary)}.icon-preview[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)}.preview-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:var(--background);border:1px solid var(--border);border-radius:12px}.preview-image[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:12px;object-fit:cover;border:2px solid var(--border)}.info-card[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1.5rem;background:linear-gradient(135deg,#6366f10d,#a855f70d);border:1px solid rgba(99,102,241,.2);border-radius:16px}.info-card[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;color:var(--primary)}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--text);margin:0 0 .75rem}.info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1.25rem}.info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);margin-bottom:.5rem}.info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:12px;font-weight:600;text-decoration:none;transition:all .3s ease;cursor:pointer;border:2px solid transparent;font-size:.875rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-sm[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;box-shadow:0 4px 16px #6366f14d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #6366f166}.btn-secondary[_ngcontent-%COMP%]{background:var(--surface);color:var(--text);border-color:var(--border)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--surface-hover);border-color:var(--primary)}.btn-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.app-create-container[_ngcontent-%COMP%]{padding:0}.form-card[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.alert[_ngcontent-%COMP%]{flex-direction:column}}[dir=rtl][_ngcontent-%COMP%]   .header-breadcrumb[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .breadcrumb-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scaleX(-1)}[dir=rtl][_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;padding-right:1.25rem}']})}}return r})();export{me as AppCreateComponent};
